{"version":3,"file":"finder.js","mappings":"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","sources":["webpack://react-matrix-rendering/./src/browser/browser-files/finder.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__accommodation.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__bestbet.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__card.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__casestudy.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__centre.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__contact.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__course.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__event.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__funding.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__generic.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__module.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__news.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__profile.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__promo.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__research.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__checkbox.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__eventCheckbox.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__eventSelect.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__filters.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__filtersmobile.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__hiddenInput.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__paramCheckbox.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__reset.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__select.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__sort.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__tag.tsx","webpack://react-matrix-rendering/./src/shared/components/query/finder__clear.tsx","webpack://react-matrix-rendering/./src/shared/components/query/finder__query.tsx","webpack://react-matrix-rendering/./src/shared/components/results/finder__announcement.tsx","webpack://react-matrix-rendering/./src/shared/components/results/finder__didyoumean.tsx","webpack://react-matrix-rendering/./src/shared/components/results/finder__pagination.tsx","webpack://react-matrix-rendering/./src/shared/components/results/finder__results.tsx","webpack://react-matrix-rendering/./src/shared/components/results/finder__results__summary.tsx","webpack://react-matrix-rendering/./src/shared/components/results/formatLabel.tsx","webpack://react-matrix-rendering/./src/shared/components/tools/finder__toolTip.tsx","webpack://react-matrix-rendering/./src/shared/forms/finder/finder.tsx","webpack://react-matrix-rendering/./src/shared/logic/funnelback.ts","webpack://react-matrix-rendering/./src/shared/logic/has-mounted.ts","webpack://react-matrix-rendering/./src/shared/logic/hyper-link.ts","webpack://react-matrix-rendering/./src/shared/logic/logic.ts","webpack://react-matrix-rendering/./src/shared/logic/replace-history.ts","webpack://react-matrix-rendering/./src/shared/logic/url-params.ts","webpack://react-matrix-rendering/./src/shared/util.tsx","webpack://react-matrix-rendering/ignored|/home/rof/src/github.com/CityUniversityLondon/react-matrix-rendering/node_modules/stream-http/node_modules/readable-stream/lib/internal/streams|util","webpack://react-matrix-rendering/ignored|/home/rof/src/github.com/CityUniversityLondon/react-matrix-rendering/node_modules/object-inspect|./util.inspect","webpack://react-matrix-rendering/ignored|/home/rof/src/github.com/CityUniversityLondon/react-matrix-rendering/node_modules/stream-http/node_modules/readable-stream/lib|util","webpack://react-matrix-rendering/webpack/bootstrap","webpack://react-matrix-rendering/webpack/runtime/chunk loaded","webpack://react-matrix-rendering/webpack/runtime/compat get default export","webpack://react-matrix-rendering/webpack/runtime/define property getters","webpack://react-matrix-rendering/webpack/runtime/global","webpack://react-matrix-rendering/webpack/runtime/hasOwnProperty shorthand","webpack://react-matrix-rendering/webpack/runtime/make namespace object","webpack://react-matrix-rendering/webpack/runtime/node module decorator","webpack://react-matrix-rendering/webpack/runtime/jsonp chunk loading","webpack://react-matrix-rendering/webpack/before-startup","webpack://react-matrix-rendering/webpack/startup","webpack://react-matrix-rendering/webpack/after-startup"],"sourcesContent":["/**\n * Finder entry\n *\n * @author Web Development\n * @copyright City, University of London 2019\n */\nimport React from \"react\";\nimport { createRoot } from \"react-dom/client\";\nimport Finder from \"../../shared/forms/finder/finder\";\nimport { finderConfig } from \"../../shared/logic/funnelback\";\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  if (/(Trident|MSIE)/.test(navigator.userAgent)) {\n    return;\n  } else {\n    const finders = document.querySelectorAll<HTMLElement>(\".wrapper--finder\");\n    if (finders) {\n      Array.from(finders).forEach((finder) => {\n        if (finder.dataset.config) {\n          finderConfig(finder.dataset.config).then((config) => {\n            const root = createRoot(finder);\n\n            root.render(<Finder config={config} element={finder} />);\n          });\n        }\n      });\n    }\n  }\n});\n","/**\n * @module patterns/finder/components/cards/finder__results__accommodation\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { uppercaseFirstLetterLowercaseRest } from \"../../util\";\nimport type {\n  ResultsAccommodation,\n  ResultsAccommodationMetaDataList,\n} from \"../../types/cards/card\";\n\n/**\n * Render a Funnelback result as an accommodation card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\n\nfunction Finder__Results__Accommodation(props: ResultsAccommodation) {\n  const mph = 60,\n    calculateTime = (minutes: number): string | number =>\n      Math.floor(minutes / mph) > 0\n        ? Math.floor(minutes / mph) + \" hour \" + (minutes % mph)\n        : minutes,\n    thumbnail = props.details &&\n      props.details.listMetadata &&\n      props.details.listMetadata.thumbnail &&\n      props.details.listMetadata.thumbnail[0] && (\n        <img\n          src={props.details.listMetadata.thumbnail[0]}\n          alt=\"\"\n          className=\"card__thumbnail\"\n        />\n      ),\n    level = props.details &&\n      props.details.listMetadata &&\n      props.details.listMetadata.level && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-graduation-cap icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span className=\"sr-only\">Level:</span>{\" \"}\n          <span>\n            {uppercaseFirstLetterLowercaseRest(\n              props.details.listMetadata.level.join(\"|\"),\n            )\n              .split(\"|\")\n              .join(\" or \")}\n          </span>\n        </p>\n      ),\n    features = props.details.listMetadata\n      ? Object.keys(props.details.listMetadata)\n          .filter((meta) => {\n            const key = meta as keyof ResultsAccommodationMetaDataList;\n            const value = props.details.listMetadata![key];\n            return (\n              [\"accessible\", \"catered\", \"ensuite\"].includes(meta) &&\n              value &&\n              value[0] === \"Yes\"\n            );\n          })\n          .map((meta) => meta.replace(/ensuite/, \"en suite\"))\n          .sort()\n          .join(\", \")\n      : \"\",\n    type = props.details &&\n      props.details.listMetadata &&\n      props.details.listMetadata.type && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-building icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span className=\"sr-only\">Type:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.type.length > 2\n              ? uppercaseFirstLetterLowercaseRest(\n                  props.details.listMetadata.type.join(\"|\"),\n                )\n                  .split(\"|\")\n                  .slice(0, -1)\n                  .join(\", \") +\n                \" or \" +\n                uppercaseFirstLetterLowercaseRest(\n                  props.details.listMetadata.type.join(\"|\"),\n                )\n                  .split(\"|\")\n                  .slice(-1)\n              : uppercaseFirstLetterLowercaseRest(\n                  props.details.listMetadata.type.join(\"|\"),\n                )\n                  .split(\"|\")\n                  .join(\" or \")}\n            {features && \" (\" + features + \")\"}\n          </span>\n        </p>\n      ),\n    price = props.details.listMetadata && props.details.listMetadata.price && (\n      <p className=\"card__tag\">\n        <span className=\"fas fa-fw fa-pound-sign icon\" aria-hidden=\"true\" />{\" \"}\n        <span className=\"sr-only\">Price:</span>{\" \"}\n        <span>\n          {props.details.listMetadata.price[0]} (\n          {props.details.listMetadata.deposit &&\n            props.details.listMetadata.deposit[0]}{\" \"}\n          deposit)\n        </span>\n      </p>\n    ),\n    transport = props.details.listMetadata &&\n      props.details.listMetadata.transport && (\n        <React.Fragment>\n          {\" \"}\n          ({calculateTime(\n            parseInt(props.details.listMetadata.transport[0]),\n          )}{\" \"}\n          minutes by public transport)\n        </React.Fragment>\n      ),\n    location =\n      props.details.listMetadata &&\n      props.details.listMetadata.location &&\n      props.details.listMetadata.location[0] ? (\n        <React.Fragment>\n          <span className=\"sr-only\">Distance to</span>{\" \"}\n          <div\n            className={`card__details__location card__details__location-${props.details.listMetadata.location[0]\n              .trim()\n              .replace(\" \", \"-\")\n              .toLowerCase()}`}\n          >\n            <span\n              className=\"fas fa-fw fa-location-dot icon\"\n              aria-hidden=\"true\"\n            />{\" \"}\n            <span>{props.details.listMetadata.location[0]}</span>\n            <span className=\"sr-only\"> campus</span>\n          </div>\n        </React.Fragment>\n      ) : (\n        <span className=\"sr-only\">Distance to Northampton Square campus:</span>\n      ),\n    distance = props.details.listMetadata &&\n      props.details.listMetadata.walk && (\n        <p className=\"card__tag\">\n          <span className=\"fas fa-fw fa-walking icon\" aria-hidden=\"true\" />{\" \"}\n          {location}\n          <span>\n            {calculateTime(parseInt(props.details.listMetadata.walk[0]))}{\" \"}\n            minutes walk to campus\n            {transport}\n          </span>\n        </p>\n      );\n\n  return (\n    <li className=\"card card--accommodation\">\n      <a href={props.details.liveUrl} className=\"card__anchor card__details\">\n        {thumbnail}\n        <div className=\"card__details__text\">\n          <h3 className=\"card__heading\">{props.details.title}</h3>\n          {distance}\n          {type}\n          {price}\n          {level}\n        </div>\n      </a>\n    </li>\n  );\n}\n\nFinder__Results__Accommodation.propTypes = {\n  details: PropTypes.object,\n};\n\nexport default Finder__Results__Accommodation;\n","/**\n * @module patterns/finder/components/cards/finder__results__bestbet\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { BestBet } from \"../../types/FBresponse\";\n\ntype BestBetDetails = {\n  details: BestBet;\n};\n\n/**\n * Render a Funnelback best bet as a results card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__BestBet(props: BestBetDetails) {\n  return (\n    <li className=\"card card--bestbet\">\n      <a href={props.details.displayUrl} className=\"card__anchor card__details\">\n        <div className=\"card__details__text\">\n          <h3 className=\"card__heading\">{props.details.titleHtml}</h3>\n          <p className=\"card__description\">{props.details.descriptionHtml}</p>\n        </div>\n      </a>\n    </li>\n  );\n}\n\nFinder__Results__BestBet.propTypes = {\n  details: PropTypes.object,\n};\n\nexport default Finder__Results__BestBet;\n","/**\n * @module patterns/finder/components/cards/finder__results__card\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport Accommodation from \"./finder__results__accommodation\";\nimport CaseStudy from \"./finder__results__casestudy\";\nimport Centre from \"./finder__results__centre\";\nimport Contact from \"./finder__results__contact\";\nimport Course from \"./finder__results__course\";\nimport Event from \"./finder__results__event\";\nimport Funding from \"./finder__results__funding\";\nimport Generic from \"./finder__results__generic\";\nimport Module from \"./finder__results__module\";\nimport News from \"./finder__results__news\";\nimport Profile from \"./finder__results__profile\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport Research from \"./finder__results__research\";\nimport type { Card } from \"../../types/cards/card\";\n\n/**\n * Render a Funnelback result as the appropriate card type.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Card(props: Card) {\n  switch (props.type) {\n    case \"accommodation\":\n      return <Accommodation details={props.details} />;\n    case \"casestudy\":\n      return <CaseStudy details={props.details} />;\n    case \"centre\":\n      return <Centre details={props.details} />;\n    case \"contact\":\n      return <Contact details={props.details} />;\n    case \"course\":\n      return <Course details={props.details} query={props.query} />;\n    case \"event\":\n      return <Event details={props.details} />;\n    case \"funding\":\n      return <Funding details={props.details} query={props.query} />;\n    case \"module\":\n      return <Module details={props.details} query={props.query} />;\n    case \"news\":\n      return <News details={props.details} />;\n    case \"profile\":\n      return <Profile details={props.details} query={props.query} />;\n    case \"research\":\n      return <Research details={props.details} query={props.query} />;\n    default:\n      return <Generic details={props.details} />;\n  }\n}\n\nFinder__Results__Card.propTypes = {\n  details: PropTypes.object,\n  query: PropTypes.object,\n  type: PropTypes.string,\n};\n\nexport default Finder__Results__Card;\n","/**\n * @module patterns/finder/components/cards/finder__results__casestudy\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { ResultsCaseStudy } from \"../../types/cards/card\";\n\n/**\n * Render a Funnelback result as a case study card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__CaseStudy(props: ResultsCaseStudy) {\n  const subtitle =\n      props.details.listMetadata && props.details.listMetadata.status ? (\n        <p className=\"card__type\">{props.details.listMetadata.status[0]}</p>\n      ) : (\n        props.details.listMetadata &&\n        props.details.listMetadata.type && (\n          <p className=\"card__type\">{props.details.listMetadata.type[0]}</p>\n        )\n      ),\n    school = props.details.listMetadata &&\n      props.details.listMetadata.school && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-university icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>School:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.school.length > 2\n              ? props.details.listMetadata.school.slice(0, -1).join(\", \") +\n                \", and \" +\n                props.details.listMetadata.school.slice(-1)\n              : props.details.listMetadata.school.join(\", and \")}\n          </span>\n        </p>\n      ),\n    department = props.details.listMetadata &&\n      props.details.listMetadata.department && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-building icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>Department:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.department.length > 2\n              ? props.details.listMetadata.department.slice(0, -1).join(\", \") +\n                \", and \" +\n                props.details.listMetadata.department.slice(-1)\n              : props.details.listMetadata.department.join(\", and \")}\n          </span>\n        </p>\n      ),\n    centre = props.details.listMetadata &&\n      props.details.listMetadata.centre && (\n        <p className=\"card__tag\">\n          <span className=\"fas fa-fw fa-vial icon\" aria-hidden=\"true\" />{\" \"}\n          <span>Research centre:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.centre.length > 2\n              ? props.details.listMetadata.centre.slice(0, -1).join(\", \") +\n                \", and \" +\n                props.details.listMetadata.centre.slice(-1)\n              : props.details.listMetadata.centre.join(\", and \")}\n          </span>\n        </p>\n      );\n\n  return (\n    <li className=\"card card--casestudy\">\n      <a href={props.details.liveUrl} className=\"card__anchor card__details\">\n        <div className=\"card__details__text\">\n          <h3 className=\"card__heading\">{props.details.title}</h3>\n          {subtitle}\n          <p className=\"card__description\">\n            {props.details.listMetadata &&\n              props.details.listMetadata.c &&\n              props.details.listMetadata.c[0]}\n          </p>\n          {school}\n          {department}\n          {centre}\n        </div>\n      </a>\n    </li>\n  );\n}\n\nFinder__Results__CaseStudy.propTypes = {\n  details: PropTypes.object,\n};\n\nexport default Finder__Results__CaseStudy;\n","/**\n * @module patterns/finder/components/cards/finder__results__centre\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { uppercaseFirstLetterLowercaseRest } from \"../../util\";\nimport type { ResultsCentre } from \"../../types/cards/card\";\n/**\n * Render a Funnelback result as a centre card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Centre(props: ResultsCentre) {\n  const school = props.details.listMetadata &&\n      props.details.listMetadata.school && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-university icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>School:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.school.length > 2\n              ? props.details.listMetadata.school.slice(0, -1).join(\", \") +\n                \", and \" +\n                props.details.listMetadata.school.slice(-1)\n              : props.details.listMetadata.school.join(\", and \")}\n          </span>\n        </p>\n      ),\n    department = props.details.listMetadata &&\n      props.details.listMetadata.department && (\n        <p className=\"card__tag\">\n          <span className=\"fas fa-fw fa-building icon\" aria-hidden=\"true\" />{\" \"}\n          <span>Department:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.department.length > 2\n              ? props.details.listMetadata.department.slice(0, -1).join(\", \") +\n                \", and \" +\n                props.details.listMetadata.department.slice(-1)\n              : props.details.listMetadata.department.join(\", and \")}\n          </span>\n        </p>\n      ),\n    subject = props.details.listMetadata &&\n      props.details.listMetadata.related && (\n        <p className=\"card__type\">\n          {props.details.listMetadata.related.length > 2\n            ? uppercaseFirstLetterLowercaseRest(\n                props.details.listMetadata.related.join(\"|\"),\n              )\n                .split(\"|\")\n                .slice(0, -1)\n                .join(\", \") +\n              \" and \" +\n              uppercaseFirstLetterLowercaseRest(\n                props.details.listMetadata.related.join(\"|\"),\n              )\n                .split(\"|\")\n                .slice(-1)\n            : uppercaseFirstLetterLowercaseRest(\n                props.details.listMetadata.related.join(\"|\"),\n              )\n                .split(\"|\")\n                .join(\" and \")}\n        </p>\n      );\n  return (\n    <li className=\"card card--centre\">\n      <a href={props.details.liveUrl} className=\"card__anchor card__details\">\n        <div className=\"card__details__text\">\n          <h3 className=\"card__heading\">{props.details.title}</h3>\n          {subject}\n          <p className=\"card__description\">\n            {props.details.listMetadata &&\n              props.details.listMetadata.c &&\n              props.details.listMetadata.c[0]}\n          </p>\n          {school}\n          {department}\n        </div>\n      </a>\n    </li>\n  );\n}\n\nFinder__Results__Centre.propTypes = {\n  details: PropTypes.object,\n};\n\nexport default Finder__Results__Centre;\n","/**\n * @module patterns/finder/components/cards/finder__results__contact\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { ResultsContact } from \"../../types/cards/card\";\n\n/**\n * Render a Funnelback result as a contact card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Contact(props: ResultsContact) {\n  const department = props.details.listMetadata &&\n      props.details.listMetadata.department && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-building icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>Department:</span> {props.details.listMetadata.department[0]}\n        </p>\n      ),\n    school = props.details.listMetadata &&\n      props.details.listMetadata.school && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-university icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>School:</span> {props.details.listMetadata.school[0]}\n        </p>\n      ),\n    jobtitle = props.details.listMetadata &&\n      props.details.listMetadata.jobtitle && (\n        <p className=\"card__type\">{props.details.listMetadata.jobtitle[0]}</p>\n      ),\n    email = props.details.listMetadata && props.details.listMetadata.email && (\n      <p className=\"card__tag\">\n        <span className=\"fas fa-fw fa-envelope icon\" aria-hidden=\"true\" />{\" \"}\n        <span>Email:</span>{\" \"}\n        <a href={\"mailto:\" + props.details.listMetadata.email[0]}>\n          {props.details.listMetadata.email[0]}\n        </a>\n      </p>\n    ),\n    altemail = props.details.listMetadata &&\n      props.details.listMetadata.altemail && (\n        <p className=\"card__tag\">\n          <span className=\"fad fa-user icon\" aria-hidden=\"true\" />{\" \"}\n          <span>Executive Assistant:</span>{\" \"}\n          <a href={\"mailto:\" + props.details.listMetadata.altemail[0]}>\n            {props.details.listMetadata.altemail[0]}\n          </a>\n        </p>\n      ),\n    telephone = props.details.listMetadata &&\n      props.details.listMetadata.telephone && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-phone fa-rotate-90 icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>Telephone:</span>{\" \"}\n          <a href={\"tel:\" + props.details.listMetadata.telephone[0]}>\n            {props.details.listMetadata &&\n              props.details.listMetadata.friendlytelephone &&\n              props.details.listMetadata.friendlytelephone[0]}\n          </a>\n        </p>\n      ),\n    room = props.details.listMetadata && props.details.listMetadata.room && (\n      <p className=\"card__tag\">\n        <span className=\"fas fa-fw fa-door-open icon\" aria-hidden=\"true\" />{\" \"}\n        <span>Room:</span> {props.details.listMetadata.room[0]}\n      </p>\n    ),\n    enquiry = props.details.listMetadata &&\n      props.details.listMetadata.enquiryurl && (\n        <p className=\"card__tag\">\n          <span className=\"fas fa-fw fa-edit icon\" aria-hidden=\"true\" />{\" \"}\n          <span>Enquiries:</span>{\" \"}\n          <a href={props.details.listMetadata.enquiryurl[0]}>\n            {props.details.listMetadata &&\n              props.details.listMetadata.enquirylabel &&\n              props.details.listMetadata.enquirylabel[0]}\n          </a>\n        </p>\n      );\n\n  return (\n    <li className=\"card card--contact\">\n      <div className=\"card__details\">\n        <div className=\"card__details__text\">\n          <h3 className=\"card__heading\">{props.details.title}</h3>\n          {jobtitle}\n          {school}\n          {department}\n          {room}\n          {email}\n          {telephone}\n          {enquiry}\n          {altemail}\n        </div>\n      </div>\n    </li>\n  );\n}\n\nFinder__Results__Contact.propTypes = {\n  details: PropTypes.object,\n};\n\nexport default Finder__Results__Contact;\n","/**\n * @module patterns/finder/components/cards/finder__results__course\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport formatLabel from \"../results/formatLabel\";\nimport { uppercaseFirstLetterLowercaseRest } from \"../../util\";\nimport type { ResultsCourse } from \"../../types/cards/card\";\n\n/**\n * Render a Funnelback result as a course card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\n\nconst externalSiteUrl = [\"www.citystgeorges.ac.uk\"];\nfunction Finder__Results__Course(props: ResultsCourse) {\n  const subtitle =\n      (props.details.listMetadata &&\n        props.details.listMetadata.type &&\n        props.details.listMetadata.type[0]) ||\n      (props.details.listMetadata &&\n        props.details.listMetadata.level &&\n        props.details.listMetadata.level[0]) ||\n      null,\n    award = props.details.listMetadata &&\n      props.details.listMetadata.qualification && (\n        <p className=\"card__tag\">\n          <span className=\"fas fa-fw fa-award icon\" aria-hidden=\"true\" />{\" \"}\n          <span>\n            Award\n            {props.details.listMetadata.qualification.length > 1 && \"s\"}:\n          </span>{\" \"}\n          <span>{props.details.listMetadata.qualification.join(\", \")}</span>\n        </p>\n      ),\n    duration = props.details.listMetadata &&\n      props.details.listMetadata.duration && (\n        <p className=\"card__tag\">\n          <span className=\"fal fa-fw fa-clock icon\" aria-hidden=\"true\" />{\" \"}\n          <span>Duration:</span>{\" \"}\n          <span>{props.details.listMetadata.duration[0]}</span>\n        </p>\n      ),\n    method = props.details.listMetadata &&\n      props.details.listMetadata.method &&\n      props.details.listMetadata.level &&\n      props.details.listMetadata.level[0] !==\n        \"Short courses and professional development\" &&\n      ((props.query.facets && props.query.facets.method) ||\n        props.query.query.indexOf(props.details.listMetadata.method[0]) >= 0 ||\n        props.details.listMetadata.method[0].indexOf(\"Online\") >= 0) && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fa-solid fa-book-open-reader icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>\n            Method\n            {props.details.listMetadata.method.length > 1 && \"s\"} of study:\n          </span>{\" \"}\n          <span>\n            {uppercaseFirstLetterLowercaseRest(\n              Array.from(new Set(props.details.listMetadata.method)).join(\"|\"), // Remove any duplicates & format\n            )\n              .split(\"|\")\n              .join(\", \")}\n          </span>\n        </p>\n      ),\n    location =\n      props.details.listMetadata &&\n      String(props.details.listMetadata.location).toLowerCase() !== \"tooting\"\n        ? props.details.listMetadata.location &&\n          props.query.facets &&\n          props.query.facets.location && (\n            <p className=\"card__tag\">\n              <span\n                className=\"fas fa-fw fa-map-marker-alt icon\"\n                aria-hidden=\"true\"\n              />{\" \"}\n              <span>Location:</span>{\" \"}\n              <span>\n                {/* Avoid duplication of 'Online' location label if location and method of study are both online */}\n                {props.details.listMetadata.location.join(\"|\") ===\n                \"Online|Online\"\n                  ? \"Online\"\n                  : props.details.listMetadata.location.join(\", \")}\n              </span>\n            </p>\n          )\n        : null,\n    school = props.details.listMetadata &&\n      props.details.listMetadata.school && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-university icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>School:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.school.map((e, i) =>\n              i === 0 ? (\n                <React.Fragment key={i}>{e.replace(\"and\", \"&\")}</React.Fragment>\n              ) : (\n                <React.Fragment key={i}>| {e}</React.Fragment>\n              ),\n            )}\n          </span>\n        </p>\n      ),\n    // City St George's label temporarily in place according to branding guidelines\n    stGeorgesLabel =\n      props.details.listMetadata &&\n      String(props.details.listMetadata.location).toLowerCase() ===\n        \"tooting\" ? (\n        <div className=\"card__label card--course__label--stgeorges\">\n          <p>\n            <span\n              className=\"fas fa-fw fa-map-marker-alt icon\"\n              aria-hidden=\"true\"\n            />{\" \"}\n            Tooting Campus\n          </p>\n        </div>\n      ) : null,\n    // City and Business School use different metadata values; check for both\n    clearing = props.details.listMetadata &&\n      props.details.listMetadata.clearing &&\n      [\"Yes\", \"yes\"].includes(props.details.listMetadata.clearing[0]) && (\n        <div className=\"card__label card--course__label--clearing\">\n          <p className=\"card__label card--course__label--clearing\">Clearing</p>\n        </div>\n      ),\n    external = !externalSiteUrl.some(\n      (s) => props.details.indexUrl && props.details.indexUrl.indexOf(s) >= 0,\n    ) ? (\n      <>\n        {\" \"}\n        <span\n          className=\"fas fa-sharp fa-external-link icon\"\n          aria-label=\"(external link)\"\n        ></span>\n      </>\n    ) : null,\n    courseCode =\n      props.details.listMetadata &&\n      props.details.listMetadata.code &&\n      ([\n        \"Undergraduate degree\",\n        \"Foundation course\",\n        \"Postgraduate taught degree\",\n      ].some(\n        (s) =>\n          props.details.listMetadata &&\n          props.details.listMetadata.level &&\n          props.details.listMetadata.level.indexOf(s) >= 0,\n      ) ||\n        props.query.query.indexOf(props.details.listMetadata.code[0]) >= 0) ? (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-graduation-cap icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>\n            Course code\n            {props.details.listMetadata.code.length > 1 && \"s\"}:\n          </span>{\" \"}\n          <span>{props.details.listMetadata.code.join(\"/\")}</span>\n        </p>\n      ) : null,\n    entryYears =\n      props.details.listMetadata &&\n      props.details.listMetadata.entryyears &&\n      ([\"Undergraduate degree\"].some(\n        (s) =>\n          props.details.listMetadata &&\n          props.details.listMetadata.level &&\n          props.details.listMetadata.level.indexOf(s) >= 0,\n      ) ||\n        props.query.query.indexOf(props.details.listMetadata.entryyears[0]) >=\n          0) ? (\n        <p className=\"card__tag\">\n          <span className=\"fas fa-fw fa-calendar icon\" aria-hidden=\"true\" />{\" \"}\n          <span>\n            Year\n            {props.details.listMetadata.entryyears.length > 1 && \"s\"} of entry:\n          </span>{\" \"}\n          <span>{props.details.listMetadata.entryyears.join(\"/\")}</span>\n        </p>\n      ) : null,\n    description = props.details.listMetadata &&\n      props.details.listMetadata.c &&\n      props.details.listMetadata.c[0] && (\n        <p className=\"card__description\">\n          {props.query.query\n            ? formatLabel(props.details.listMetadata.c[0], props.query.query)\n            : props.details.listMetadata.c[0]}\n        </p>\n      );\n\n  return (\n    <li className=\"card card--course\">\n      <a href={props.details.liveUrl} className=\"card__anchor card__details\">\n        <div className=\"wrapper--card__label__details\">\n          {clearing}\n          <div className=\"card__details__text\">\n            <h3 className=\"card__heading\">\n              {props.query.query\n                ? formatLabel(props.details.title, props.query.query)\n                : props.details.title}\n              {external}\n            </h3>\n            <p className=\"card__type\">\n              {props.query.query && subtitle\n                ? formatLabel(subtitle, props.query.query)\n                : subtitle && subtitle}\n            </p>\n            {description}\n            {stGeorgesLabel}\n            {school}\n            {award}\n            {duration}\n            {courseCode}\n            {entryYears}\n            {method}\n            {location}\n          </div>\n        </div>\n      </a>\n    </li>\n  );\n}\n\nFinder__Results__Course.propTypes = {\n  details: PropTypes.object,\n  query: PropTypes.object,\n};\n\nexport default Finder__Results__Course;\n","/**\n * @module patterns/finder/components/cards/finder__results__event\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { formatTime, formatReactDate } from \"../../util\";\nimport type { ResultsEvents } from \"../../types/cards/card\";\n\nfunction formatShortDate(dateString: string) {\n  const months = [\n      \"Jan\",\n      \"Feb\",\n      \"Mar\",\n      \"Apr\",\n      \"May\",\n      \"Jun\",\n      \"Jul\",\n      \"Aug\",\n      \"Sep\",\n      \"Oct\",\n      \"Nov\",\n      \"Dec\",\n    ],\n    date = new Date(dateString),\n    month = months[date.getUTCMonth()];\n\n  return (\n    <p className=\"card--event__label--shortdate\">\n      <span>{date.getUTCDate()}</span> {month}\n    </p>\n  );\n}\n\nfunction compareDates(startDate: string, endDate: string, showTime: number) {\n  const sDate = new Date(startDate),\n    eDate = new Date(endDate),\n    noTimeSDate = new Date(sDate.setUTCHours(0, 0, 0)),\n    noTimeEDate = new Date(eDate.setUTCHours(0, 0, 0)),\n    time = showTime ? (\n      <React.Fragment>\n        , {formatTime(startDate)} - {formatTime(endDate, true)}\n      </React.Fragment>\n    ) : null;\n\n  return noTimeSDate.getTime() === noTimeEDate.getTime() ? (\n    <p className=\"card__type true\">\n      {formatReactDate(sDate)}\n      {time}\n    </p>\n  ) : (\n    <p className=\"card__type false\">\n      {formatReactDate(sDate)} - {formatReactDate(eDate)}\n      {time}\n    </p>\n  );\n}\n\n/**\n * Render a Funnelback result as an event card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Event(props: ResultsEvents) {\n  const shortDate =\n      props.details.listMetadata &&\n      props.details.listMetadata.d &&\n      formatShortDate(props.details.listMetadata.d[0]),\n    location = props.details.listMetadata &&\n      props.details.listMetadata.location && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw icon fa-map-marker-alt\"\n            aria-hidden=\"true\"\n          ></span>{\" \"}\n          <span>Location:</span>{\" \"}\n          <span>{props.details.listMetadata.location.join(\", \")}</span>\n        </p>\n      ),\n    audience = props.details.listMetadata &&\n      props.details.listMetadata.audience && (\n        <p className=\"card__tag\">\n          <span className=\"fas fa-fw icon fa-users\" aria-hidden=\"true\"></span>{\" \"}\n          <span>Audience:</span>{\" \"}\n          <span>\n            {Array.from(new Set(props.details.listMetadata.audience))\n              .map((str) => {\n                const capitalized = `${str[0].toUpperCase()}${str.slice(1)}`;\n                return capitalized.replace(/-/g, \" \");\n              })\n              .join(\"|\")\n              .split(\"|\")\n              .join(\"; \")}\n          </span>\n        </p>\n      ),\n    thumbnail = props.details.listMetadata &&\n      props.details.listMetadata.thumbnail && (\n        <img\n          src={props.details.listMetadata.thumbnail[0]}\n          alt=\"\"\n          className=\"card__thumbnail\"\n        />\n      ),\n    eventStartDate =\n      props.details.listMetadata &&\n      props.details.listMetadata.d &&\n      props.details.listMetadata.d[0],\n    eventEndDate =\n      props.details.listMetadata &&\n      props.details.listMetadata.d &&\n      props.details.listMetadata.d[1],\n    eventLabel =\n      eventStartDate &&\n      eventEndDate &&\n      props.details.listMetadata &&\n      props.details.listMetadata.displayTime &&\n      compareDates(\n        eventStartDate,\n        eventEndDate,\n        parseInt(props.details.listMetadata.displayTime[0]),\n      );\n\n  return (\n    <li className=\"card card--event card--landscape\">\n      <a href={props.details.liveUrl} className=\"card__anchor card__details\">\n        {thumbnail}\n        {shortDate}\n        <div className=\"card__details__text\">\n          <h3 className=\"card__heading\">{props.details.title}</h3>\n          <p className=\"card__description\">\n            {props.details.listMetadata &&\n              props.details.listMetadata.c &&\n              props.details.listMetadata.c[0]}\n          </p>\n          {eventLabel}\n          {location}\n          {audience}\n        </div>\n      </a>\n    </li>\n  );\n}\n\nFinder__Results__Event.propTypes = {\n  details: PropTypes.object,\n};\n\nexport default Finder__Results__Event;\n","/**\n * @module patterns/finder/components/cards/finder__results__funding\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { uppercaseFirstLetterLowercaseRest } from \"../../util\";\nimport type { ResultsFunding } from \"../../types/cards/card\";\n\n/**\n * Render a Funnelback result as a funding card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Funding(props: ResultsFunding) {\n  const school = props.details.listMetadata &&\n      props.details.listMetadata.school &&\n      props.query.facets &&\n      props.query.facets.school && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-university icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>School:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.school.length > 2\n              ? props.details.listMetadata.school.slice(0, -1).join(\", \") +\n                \", or \" +\n                props.details.listMetadata.school.slice(-1)\n              : props.details.listMetadata.school.join(\", or \")}\n          </span>\n        </p>\n      ),\n    hardship = props.details.listMetadata &&\n      props.details.listMetadata.hardship &&\n      props.details.listMetadata.hardship[0] === \"1\" && (\n        <div className=\"card--funding__label--hardship\">\n          <p>Hardship funding</p>\n        </div>\n      ),\n    programme = props.details.listMetadata &&\n      props.details.listMetadata.programme && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-graduation-cap icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>\n            Programme\n            {props.details.listMetadata.programme.length > 2 ? \"s\" : null}:\n          </span>{\" \"}\n          <span>\n            {props.details.listMetadata.programme.length > 2\n              ? uppercaseFirstLetterLowercaseRest(\n                  props.details.listMetadata.programme.join(\"|\"),\n                )\n                  .split(\"|\")\n                  .slice(0, -1)\n                  .join(\", \") +\n                \" or \" +\n                uppercaseFirstLetterLowercaseRest(\n                  props.details.listMetadata.programme.join(\"|\"),\n                )\n                  .split(\"|\")\n                  .slice(-1)\n              : uppercaseFirstLetterLowercaseRest(\n                  props.details.listMetadata.programme.join(\"|\"),\n                )\n                  .split(\"|\")\n                  .join(\" or \")}\n          </span>\n        </p>\n      ),\n    level = props.details.listMetadata && props.details.listMetadata.level && (\n      <p className=\"card__tag\">\n        <span className=\"fas fa-fw fa-award icon\" aria-hidden=\"true\" />{\" \"}\n        <span>Programme level:</span>{\" \"}\n        <span>\n          {props.details.listMetadata.level.length > 2\n            ? uppercaseFirstLetterLowercaseRest(\n                props.details.listMetadata.level.join(\"|\"),\n              )\n                .split(\"|\")\n                .slice(0, -1)\n                .join(\", \") +\n              \" or \" +\n              uppercaseFirstLetterLowercaseRest(\n                props.details.listMetadata.level.join(\"|\"),\n              )\n                .split(\"|\")\n                .slice(-1)\n            : uppercaseFirstLetterLowercaseRest(\n                props.details.listMetadata.level.join(\"|\"),\n              )\n                .split(\"|\")\n                .join(\" or \")}\n        </span>\n      </p>\n    ),\n    feestatus = props.details.listMetadata &&\n      props.details.listMetadata.feestatus && (\n        <p className=\"card__tag\">\n          <span className=\"far fa-fw fa-globe-europe icon\" aria-hidden=\"true\" />{\" \"}\n          <span>Fee status:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.feestatus.length > 2\n              ? props.details.listMetadata.feestatus.slice(0, -1).join(\", \") +\n                \" or \" +\n                props.details.listMetadata.feestatus.slice(-1)\n              : props.details.listMetadata.feestatus.join(\" or \")}\n          </span>\n        </p>\n      );\n\n  return (\n    <li className=\"card card--funding\">\n      <a href={props.details.liveUrl} className=\"card__anchor card__details\">\n        {hardship}\n        <div className=\"card__details__text\">\n          <h3 className=\"card__heading\">\n            {props.details.title.replace(\"&amp;\", \"&\")}\n          </h3>\n          <p className=\"card__type\">\n            {props.details.listMetadata &&\n              props.details.listMetadata.type &&\n              props.details.listMetadata.type[0]}\n          </p>\n          <p className=\"card__description\">\n            {props.details.listMetadata &&\n              props.details.listMetadata.c &&\n              props.details.listMetadata.c[0]}\n          </p>\n          {level}\n          {programme}\n          {feestatus}\n          {school}\n        </div>\n      </a>\n    </li>\n  );\n}\n\nFinder__Results__Funding.propTypes = {\n  details: PropTypes.object,\n  query: PropTypes.object,\n};\n\nexport default Finder__Results__Funding;\n","/**\n * @module patterns/finder/components/cards/finder__results__generic\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { ResultsGeneric } from \"../../types/cards/card\";\n/**\n * Render a Funnelback result as a generic card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Generic(props: ResultsGeneric) {\n  const school = props.details.listMetadata &&\n      props.details.listMetadata.school && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-university icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>School:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.school.length > 2\n              ? props.details.listMetadata.school.slice(0, -1).join(\", \") +\n                \", and \" +\n                props.details.listMetadata.school.slice(-1)\n              : props.details.listMetadata.school.join(\", and \")}\n          </span>\n        </p>\n      ),\n    department = props.details.listMetadata &&\n      props.details.listMetadata.department && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-building icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>Department:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.department.length > 2\n              ? props.details.listMetadata.department.slice(0, -1).join(\", \") +\n                \", and \" +\n                props.details.listMetadata.department.slice(-1)\n              : props.details.listMetadata.department.join(\", and \")}\n          </span>\n        </p>\n      ),\n    title = props.details.title && (\n      <h3 className=\"card__heading\">\n        {props.details.title.indexOf(\"School\") >= 0\n          ? props.details.title.replace(\"&amp;\", \"&\")\n          : props.details.title}\n      </h3>\n    );\n\n  return (\n    <li className=\"card card--generic\">\n      <a href={props.details.liveUrl} className=\"card__anchor card__details\">\n        <div className=\"card__details__text\">\n          {title}\n          <p className=\"card__description\">\n            {props.details.listMetadata &&\n              props.details.listMetadata.c &&\n              props.details.listMetadata.c[0]}\n          </p>\n          {school}\n          {department}\n        </div>\n      </a>\n    </li>\n  );\n}\n\nFinder__Results__Generic.propTypes = {\n  details: PropTypes.object,\n};\n\nexport default Finder__Results__Generic;\n","/**\n * @module patterns/finder/components/cards/finder__results__module\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { ResultsModule } from \"../../types/cards/card\";\n\n/**\n * Render a Funnelback result as a module card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Module(props: ResultsModule) {\n  const location = props.details.listMetadata &&\n      props.details.listMetadata.location && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-map-marker-alt icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>Location:</span>{\" \"}\n          <span>{props.details.listMetadata.location[0]}</span>\n        </p>\n      ),\n    title =\n      props.details.listMetadata && props.details.listMetadata.code ? (\n        <React.Fragment>\n          <span className=\"card--module__code\">\n            {props.details.listMetadata.code[0]}\n          </span>{\" \"}\n          <span>{props.details.title}</span>\n        </React.Fragment>\n      ) : (\n        <React.Fragment>\n          <span>{props.details.title}</span>\n        </React.Fragment>\n      ),\n    school = props.details.listMetadata &&\n      props.details.listMetadata.school && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-university icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>School:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.school.length > 2\n              ? props.details.listMetadata.school.slice(0, -1).join(\", \") +\n                \", and \" +\n                props.details.listMetadata.school.slice(-1)\n              : props.details.listMetadata.school.join(\", and \")}\n          </span>\n        </p>\n      ),\n    term = props.details.listMetadata && props.details.listMetadata.term && (\n      <p className=\"card__tag\">\n        <span className=\"far fa-fw fa-calendar icon\" aria-hidden=\"true\" />{\" \"}\n        <span>Semester:</span>{\" \"}\n        <span>\n          {props.details.listMetadata.term.length > 2\n            ? \"All year\"\n            : props.details.listMetadata.term.join(\" or \")}\n        </span>\n      </p>\n    ),\n    topic = props.details.listMetadata &&\n      props.details.listMetadata.related && (\n        <p className=\"card__type\">\n          {props.details.listMetadata.related\n            .sort()\n            .map((topic, i) => (i > 0 ? topic.toLowerCase() : topic))\n            .join(\", \")}\n        </p>\n      ),\n    specification = props.details.listMetadata &&\n      props.details.listMetadata.specification && (\n        <p className=\"card__tag\">\n          <span className=\"far fa-fw fa-file-pdf icon\" aria-label=\"PDF\" />{\" \"}\n          <a href={props.details.listMetadata.specification[0]}>\n            Download module specification\n          </a>\n        </p>\n      );\n\n  return (\n    <li className=\"card card--module\">\n      <div className=\"card__details\">\n        <div className=\"card__details__text\">\n          <h3 className=\"card__heading\">{title}</h3>\n          {topic}\n          <p className=\"card__description\">\n            {props.details.listMetadata &&\n              props.details.listMetadata.c &&\n              props.details.listMetadata.c[0]}\n          </p>\n          {term}\n          {school}\n          {location}\n          {specification}\n        </div>\n      </div>\n    </li>\n  );\n}\n\nFinder__Results__Module.propTypes = {\n  details: PropTypes.object,\n  query: PropTypes.object,\n};\n\nexport default Finder__Results__Module;\n","/**\n * @module patterns/finder/components/cards/finder__results__news\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { formatReactDate, toBool } from \"../../util\";\nimport Finder__ToolTip from \"../tools/finder__toolTip\";\nimport type { ResultsNews } from \"../../types/cards/card\";\n\n/**\n * Render a Funnelback result as a generic card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__News(props: ResultsNews) {\n  const thumbnailSourceName =\n      (props.details.listMetadata &&\n        props.details.listMetadata.thumbnailSourceName &&\n        props.details.listMetadata.thumbnailSourceName[0]) ||\n      false,\n    thumbnailSourceUrl =\n      (props.details.listMetadata &&\n        props.details.listMetadata.thumbnailSourceUrl &&\n        props.details.listMetadata.thumbnailSourceUrl[0]) ||\n      false,\n    thumbnailAuthorName =\n      (props.details.listMetadata &&\n        props.details.listMetadata.thumbnailAuthorName &&\n        props.details.listMetadata.thumbnailAuthorName[0]) ||\n      false,\n    thumbnailAuthorUrl =\n      (props.details.listMetadata &&\n        props.details.listMetadata.thumbnailAuthorUrl &&\n        props.details.listMetadata.thumbnailAuthorUrl[0]) ||\n      false,\n    thumbnailLicenceType =\n      (props.details.listMetadata &&\n        props.details.listMetadata.thumbnailLicenceType &&\n        props.details.listMetadata.thumbnailLicenceType[0]) ||\n      false,\n    thumbnailLicenceUrl =\n      (props.details.listMetadata &&\n        props.details.listMetadata.thumbnailLicenceUrl &&\n        props.details.listMetadata.thumbnailLicenceUrl[0]) ||\n      false,\n    displayToolTip =\n      props.details.listMetadata &&\n      props.details.listMetadata.thumbnailToolTip &&\n      toBool(props.details.listMetadata.thumbnailToolTip[0]);\n\n  const formattedDate =\n      props.details.listMetadata &&\n      props.details.listMetadata.d &&\n      formatReactDate(new Date(props.details.listMetadata.d[0])),\n    dateString = props.details.listMetadata && props.details.listMetadata.d && (\n      <p className=\"card__type\">{formattedDate}</p>\n    ),\n    hashtags = props.details.listMetadata &&\n      props.details.listMetadata.hashtagtext && (\n        <p className=\"card__tag\">\n          <span className=\"fad fa-fw fa-hashtag icon\" aria-hidden=\"true\" />{\" \"}\n          <span>\n            Hashtag\n            {props.details.listMetadata.hashtagtext.length > 1 && \"s\"}:\n          </span>{\" \"}\n          <span>{props.details.listMetadata.hashtagtext.join(\", \")}</span>\n        </p>\n      ),\n    thumbnail =\n      props.details.listMetadata &&\n      props.details.listMetadata.thumbnailTiny &&\n      props.details.listMetadata.thumbnailTiny[0] &&\n      props.details.listMetadata.thumbnailMax &&\n      props.details.listMetadata.thumbnailMax[0] &&\n      props.details.listMetadata.thumbnailMobile &&\n      props.details.listMetadata.thumbnailMobile[0] ? (\n        <picture>\n          <source\n            srcSet={props.details.listMetadata.thumbnailTiny[0]}\n            media=\"(max-width: 375px)\"\n          />\n          <source\n            srcSet={props.details.listMetadata.thumbnailMax[0]}\n            media=\"(min-width: 3840px)\"\n          />\n          <img\n            src={props.details.listMetadata.thumbnailMobile[0]}\n            alt={props.details.title}\n          />\n        </picture>\n      ) : props.details.listMetadata && props.details.listMetadata.thumbnail ? (\n        <img\n          src={props.details.listMetadata.thumbnail[0]}\n          alt=\"\"\n          className=\"card__thumbnail\"\n        />\n      ) : null;\n\n  return (\n    <li className=\"card card--news\">\n      <Finder__ToolTip\n        thumbnailSourceName={thumbnailSourceName}\n        thumbnailSourceUrl={thumbnailSourceUrl}\n        thumbnailAuthorName={thumbnailAuthorName}\n        thumbnailAuthorUrl={thumbnailAuthorUrl}\n        thumbnailLicenceType={thumbnailLicenceType}\n        thumbnailLicenceUrl={thumbnailLicenceUrl}\n        displayToolTip={displayToolTip}\n      />\n      <a href={props.details.liveUrl} className=\"card__anchor card__details\">\n        {thumbnail}\n        <div className=\"card__details__text\">\n          {dateString}\n          <h3 className=\"card__heading\">{props.details.title}</h3>\n          <p className=\"card__description\">\n            {props.details.listMetadata &&\n              props.details.listMetadata.c &&\n              props.details.listMetadata.c[0]}\n          </p>\n          {hashtags}\n        </div>\n      </a>\n    </li>\n  );\n}\n\nFinder__Results__News.propTypes = {\n  details: PropTypes.object,\n};\n\nexport default Finder__Results__News;\n","/**\n * @module patterns/finder/components/cards/finder__results__profile\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { ResultsProfile } from \"../../types/cards/card\";\n\n/**\n * Render a Funnelback result as a profile card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Profile(props: ResultsProfile) {\n  const school = props.details.listMetadata &&\n      props.details.listMetadata.school && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-university icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>School:</span>{\" \"}\n          {props.details.listMetadata.school[0].replace(\"and\", \"&\")}\n        </p>\n      ),\n    department = props.details.listMetadata &&\n      props.details.listMetadata.department && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-building icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>Department:</span> {props.details.listMetadata.department[0]}\n        </p>\n      ),\n    headshot = props.details.listMetadata &&\n      props.details.listMetadata.thumbnail && (\n        <div className=\"card__thumbnail\">\n          <img\n            src={props.details.listMetadata.thumbnail[0]}\n            alt={\"Photo of \" + props.details.title}\n          />\n        </div>\n      ),\n    EDIAmbassadors = props.details.listMetadata &&\n      props.details.listMetadata.ediAmbassador && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-people-roof icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>EDI Ambassador</span>\n        </p>\n      ),\n    thumbnailExist =\n      props.details.listMetadata &&\n      props.details.listMetadata.thumbnail &&\n      \"card--profile--thumbnailAvailable\",\n    country = props.query.facets &&\n      props.query.facets.country &&\n      props.details.listMetadata &&\n      props.details.listMetadata.country && (\n        <div className=\"card__tag\">\n          <span className=\"fad fa-fw fa-globe-europe icon\" aria-hidden=\"true\" />{\" \"}\n          <span>Country:</span>{\" \"}\n          {props.details.listMetadata.country.length > 2\n            ? props.details.listMetadata.country.slice(0, -1).join(\", \") +\n              \" and \" +\n              props.details.listMetadata.country.slice(-1)\n            : props.details.listMetadata.country.join(\" and \")}\n        </div>\n      );\n\n  return (\n    <li className=\"card card--profile\">\n      <a\n        href={props.details.liveUrl}\n        className={`card__anchor card__details ${thumbnailExist}`}\n      >\n        {headshot}\n        <div className=\"card__details__text\">\n          <h3 className=\"card__heading\">{props.details.title}</h3>\n          <p className=\"card__type\">\n            {props.details.listMetadata &&\n              props.details.listMetadata.jobtitle &&\n              props.details.listMetadata.jobtitle[0]}\n          </p>\n          {school}\n          {department}\n          {country}\n          {EDIAmbassadors}\n        </div>\n      </a>\n    </li>\n  );\n}\n\nFinder__Results__Profile.propTypes = {\n  details: PropTypes.object,\n  query: PropTypes.object,\n};\n\nexport default Finder__Results__Profile;\n","/**\n * @module patterns/finder/components/finder__results__summary\n * @author Web Development\n * @copyright City, University of London\n */\n\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport type { ResultPromoProps } from \"../../types/cards/card\";\n\nfunction Finder__Results__Promo({\n  heading,\n  body,\n  linkRef,\n  linkText,\n}: ResultPromoProps) {\n  return (\n    <li className=\"card card--finder-promo promo-area__wrap\">\n      <div className=\"promo-area layout__left--full\">\n        <div className=\"promo-area__content background--pink90\">\n          <h3 className=\"promo-area__heading\">{heading}</h3>\n          <div className=\"promo-area__container\">\n            <div className=\"promo-area__text\">\n              <p>{body}</p>\n              <p className=\"cta-block__cta\">\n                <a href={linkRef} className=\"outline-cta-arrow--bright\">\n                  <span>{linkText}</span>\n                </a>\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </li>\n  );\n}\n\nFinder__Results__Promo.propTypes = {\n  heading: PropTypes.string,\n  body: PropTypes.string,\n  linkRef: PropTypes.string,\n  linkText: PropTypes.string,\n};\n\nexport default Finder__Results__Promo;\n","/**\n * @module patterns/finder/components/cards/finder__results__research\n * @author Web Development\n * @copyright City, University of London 2021\n */\n\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport type { ResultsResearch } from \"../../types/cards/card\";\n// import parse from 'html-react-parser';\n\n/**\n * Render a Funnelback result as a PhD research project card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Research(props: ResultsResearch) {\n  const school = props.details.listMetadata &&\n      props.details.listMetadata.school && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-university icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>School:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.school.length > 2\n              ? props.details.listMetadata.school.slice(0, -1).join(\", \") +\n                \" and \" +\n                props.details.listMetadata.school.slice(-1)\n              : props.details.listMetadata.school.join(\" and \")}\n          </span>\n        </p>\n      ),\n    department = props.details.listMetadata &&\n      props.details.listMetadata.department && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-building icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>Department:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.department.length > 2\n              ? props.details.listMetadata.department.slice(0, -1).join(\", \") +\n                \" and \" +\n                props.details.listMetadata.department.slice(-1)\n              : props.details.listMetadata.department.join(\" and \")}\n          </span>\n        </p>\n      ),\n    centre = props.details.listMetadata &&\n      props.details.listMetadata.researchCentre && (\n        <p className=\"card__tag\">\n          <span className=\"fas fa-fw fa-vial icon\" aria-hidden=\"true\" />{\" \"}\n          {props.details.listMetadata.researchCentre.length > 1 ? (\n            <span>Research centres: </span>\n          ) : (\n            <span>Research centre: </span>\n          )}\n          {/* <span>\n                    {props.details.listMetadata.researchCentre.length > 2\n                        ? parse(\n                              props.details.listMetadata.researchCentre\n                                  .slice(0, -1)\n                                  .join(', ') +\n                                  ' and ' +\n                                  props.details.listMetadata.researchCentre.slice(\n                                      -1\n                                  )\n                          )\n                        : parse(\n                              props.details.listMetadata.researchCentre.join(\n                                  ' and '\n                              )\n                          )}\n                </span> */}\n        </p>\n      ),\n    academic = props.details.listMetadata &&\n      props.details.listMetadata.academic && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-chalkboard-teacher icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          {props.details.listMetadata.academic.length > 1 ? (\n            <span>Academics: </span>\n          ) : (\n            <span>Academic: </span>\n          )}\n          {/* <span>\n                    {props.details.listMetadata.academic.length > 2\n                        ? parse(\n                              props.details.listMetadata.academic\n                                  .slice(0, -1)\n                                  .join(', ') +\n                                  ' and ' +\n                                  props.details.listMetadata.academic.slice(-1)\n                          )\n                        : parse(\n                              props.details.listMetadata.academic.join(' and ')\n                          )}\n                </span> */}\n        </p>\n      ),\n    student = props.details.listMetadata &&\n      props.details.listMetadata.student && (\n        <p className=\"card__tag\">\n          <span className=\"fas fa-fw fa-users icon\" aria-hidden=\"true\" />{\" \"}\n          {props.details.listMetadata.student.length > 1 ? (\n            <span>Students: </span>\n          ) : (\n            <span>Student: </span>\n          )}\n          {/* <span>\n                    {props.details.listMetadata.student.length > 2\n                        ? parse(\n                              props.details.listMetadata.student\n                                  .slice(0, -1)\n                                  .join(', ') +\n                                  ' and ' +\n                                  props.details.listMetadata.student.slice(-1)\n                          )\n                        : parse(\n                              props.details.listMetadata.student.join(' and ')\n                          )}\n                </span> */}\n        </p>\n      ),\n    degree = props.details.listMetadata &&\n      props.details.listMetadata.relatedDegree && (\n        <p className=\"card__tag\">\n          <span className=\"far fa-fw fa-diploma icon\" aria-hidden=\"true\" />{\" \"}\n          {props.details.listMetadata.relatedDegree.length > 1 ? (\n            <span>Related degrees: </span>\n          ) : (\n            <span>Related degree: </span>\n          )}\n          {/* <span>\n                    {props.details.listMetadata.relatedDegree.length > 2\n                        ? parse(\n                              props.details.listMetadata.relatedDegree\n                                  .slice(0, -1)\n                                  .join(', ') +\n                                  ' and ' +\n                                  props.details.listMetadata.relatedDegree.slice(\n                                      -1\n                                  )\n                          )\n                        : parse(\n                              props.details.listMetadata.relatedDegree.join(\n                                  ' and '\n                              )\n                          )}\n                </span> */}\n        </p>\n      ),\n    status = props.details.listMetadata &&\n      props.details.listMetadata.status && (\n        <p className=\"card__tag\">\n          <span className=\"far fa-fw fa-hourglass icon\" aria-hidden=\"true\" />{\" \"}\n          <span>Status:</span>{\" \"}\n          <span>{props.details.listMetadata.status[0]} </span>\n          {props.details.listMetadata.status[0] === \"Completed project\" ? (\n            <span\n              className=\"far fa-fw fa-check-circle icon\"\n              aria-hidden=\"true\"\n            />\n          ) : null}\n        </p>\n      ),\n    site = props.details.listMetadata && props.details.listMetadata.site && (\n      <p className=\"card__tag\">\n        <span className=\"far fa-fw fa-globe icon\" aria-hidden=\"true\" />{\" \"}\n        <span>\n          <a href={props.details.listMetadata.site[0]}>View case study site</a>\n        </span>\n      </p>\n    );\n\n  return (\n    <li className=\"card card--research\">\n      <div className=\"card__details\">\n        <div className=\"card__details__text\">\n          <h3 className=\"card--research__title-link\">{props.details.title}</h3>\n          <p className=\"card__description\">\n            {props.details.listMetadata &&\n              props.details.listMetadata.c &&\n              props.details.listMetadata.c[0]}\n          </p>\n          {school}\n          {department}\n          {centre}\n          {degree}\n          {academic}\n          {student}\n          {status}\n          {site}\n        </div>\n      </div>\n    </li>\n  );\n}\n\nFinder__Results__Research.propTypes = {\n  details: PropTypes.object,\n};\n\nexport default Finder__Results__Research;\n","/**\n * @module patterns/finder/components/finder__checkbox\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { CheckBox } from \"../../types/filters/filters\";\n\nfunction Finder__Checkbox(props: CheckBox) {\n  const randomNumber = props.mobile ? \"mobile\" : \"desktop\",\n    toggleChecked = props.facet.meta in props.query.facets,\n    responseFacetValue =\n      props.responseFacet[0] &&\n      props.responseFacet[0].allValues &&\n      props.responseFacet[0].allValues.filter(\n        (value) =>\n          props.facet.checkedValue &&\n          value.data.toLowerCase() === props.facet.checkedValue.toLowerCase(),\n      );\n\n  if (\n    responseFacetValue &&\n    responseFacetValue[0] &&\n    responseFacetValue[0].count > 0\n  ) {\n    const toggleFacet = () => {\n      const newQuery = props.query;\n\n      if (props.dependencies) {\n        props.dependencies.forEach((facet) => {\n          delete newQuery.facets[facet.meta];\n        });\n      }\n\n      if (toggleChecked) {\n        delete newQuery.facets[props.facet.meta];\n      } else if (props.facet.checkedValue) {\n        newQuery.facets[props.facet.meta] = props.facet.checkedValue;\n}\n\n      newQuery.startRank = 1;\n      newQuery.misspelling = null;\n      newQuery.interacted = true;\n\n      props.update.query(newQuery);\n      props.update.results(!props.update.updateState);\n    };\n\n    return (\n      <div className=\"finder__filter finder__checkbox\">\n        <input\n          type=\"checkbox\"\n          id={`meta_${props.facet.meta}_and--${randomNumber}`}\n          name={`meta_${props.facet.meta}_and`}\n          value={props.facet.checkedValue}\n          onChange={() => toggleFacet()}\n          checked={toggleChecked}\n        />\n        <div\n          className=\"finder__checkbox__indicator finder__checkbox__indicator\"\n          aria-hidden=\"true\"\n          onClick={() => toggleFacet()}\n        >\n          {toggleChecked ? (\n            <span className=\"fa fa-fw fas fa-check icon\"></span>\n          ) : null}\n        </div>\n        <label\n          className=\"finder__filters__label--always\"\n          htmlFor={`meta_${props.facet.meta}_and--${randomNumber}`}\n        >\n          {props.facet.name}\n          {!toggleChecked &&\n            responseFacetValue &&\n            \" (\" + responseFacetValue[0].count + \")\"}\n        </label>\n      </div>\n    );\n  } else {\n    return null;\n  }\n}\n\nFinder__Checkbox.propTypes = {\n  facet: PropTypes.object,\n  query: PropTypes.object,\n  responseFacet: PropTypes.arrayOf(PropTypes.object),\n  update: PropTypes.object,\n  dependencies: PropTypes.arrayOf(PropTypes.object),\n  mobile: PropTypes.bool,\n};\n\nexport default Finder__Checkbox;\n","/**\n * @module patterns/finder/components/finder__checkbox\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { EventCheckBox } from \"../../types/filters/filters\";\nimport type { Query } from \"../../types/query\";\n\nfunction Finder__paramCheckbox(props: EventCheckBox) {\n  const dateDayFormat = 10;\n  const stringLength = 16,\n    stringOffset = -4,\n    randomNumber = Math.random().toString(stringLength).slice(stringOffset),\n    pastEventsResponseTotal =\n      props.pastEventsResponse &&\n      props.pastEventsResponse.resultPacket.resultsSummary &&\n      props.pastEventsResponse.resultPacket.resultsSummary.fullyMatching,\n    pastEventsPartialResponseTotal =\n      props.pastEventsResponse &&\n      props.pastEventsResponse.resultPacket.resultsSummary &&\n      props.pastEventsResponse.resultPacket.resultsSummary.partiallyMatching,\n    toggleChecked =\n      props.query.parameters && \"lt_eventDate\" in props.query.parameters,\n    totalText = pastEventsResponseTotal\n      ? pastEventsResponseTotal\n      : pastEventsPartialResponseTotal\n        ? pastEventsPartialResponseTotal\n        : 0;\n\n  const currentDate = new Date(),\n    currentYear = currentDate.getUTCFullYear(),\n    currentDateMonth =\n      currentDate.getUTCMonth() >= 10\n        ? currentDate.getUTCMonth()\n        : \"0\" + (currentDate.getUTCMonth() + 1),\n    currentDateDay = currentDate.getUTCDate(),\n    currentDateString = `${currentYear}${currentDateMonth}${\n      currentDateDay >= dateDayFormat ? currentDateDay : \"0\" + currentDateDay\n    }`;\n\n  const toggleFacet = () => {\n    const currentDate = new Date();\n    const dateDayFormat = 10;\n    const currentYear = currentDate.getUTCFullYear();\n    const currentDateMonth =\n      currentDate.getUTCMonth() + 1 >= 10\n        ? currentDate.getUTCMonth() + 1\n        : \"0\" + (currentDate.getUTCMonth() + 1);\n    const currentDateDay = currentDate.getUTCDate();\n    const currentDateString = `${currentYear}${currentDateMonth}${\n      currentDateDay >= dateDayFormat ? currentDateDay : \"0\" + currentDateDay\n    }`;\n\n    const newQuery: Query[\"query\"] = {\n      ...props.query,\n      parameters: props.query.parameters ? { ...props.query.parameters } : {},\n    };\n\n    if (newQuery.parameters && \"lt_eventDate\" in newQuery.parameters) {\n      // Remove past filters\n      delete newQuery.parameters.lt_eventDate;\n      delete newQuery.parameters.events;\n      newQuery.parameters.ge_eventDate = currentDateString;\n      newQuery.sortType = \"adate\";\n    } else if (newQuery.parameters) {\n      // Set past filters\n      delete newQuery.parameters.ge_eventDate;\n      newQuery.parameters.lt_eventDate = currentDateString;\n      newQuery.parameters.events = \"past\";\n      newQuery.sortType = \"date\";\n    }\n\n    newQuery.startRank = 1;\n    newQuery.misspelling = null;\n    newQuery.interacted = true;\n\n    props.update.query(newQuery);\n    props.update.results(!props.update.updateState);\n  };\n\n  if (totalText > 0) {\n    if (props.matrixState) {\n      return (\n        <div className=\"finder__filter finder__select\">\n          <label htmlFor=\"event--time\">Location</label>\n          <select name=\"event--time\" id=\"event--time\">\n            <option value={`ge_eventDate!${currentDateString}`}>\n              Upcoming events\n            </option>\n            <option value={`lt_eventDate!${currentDateString}`}>\n              Past events\n            </option>\n          </select>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"finder__filter finder__checkbox\">\n          <input\n            type=\"checkbox\"\n            id={`${props.facet.funnelbackName}--${randomNumber}`}\n            name={props.facet.meta}\n            value={props.facet.checkedValue}\n            onChange={() => toggleFacet()}\n            checked={toggleChecked}\n          />\n          <div\n            className=\"finder__checkbox__indicator finder__checkbox__indicator\"\n            aria-hidden=\"true\"\n            onClick={() => toggleFacet()}\n          >\n            {toggleChecked ? (\n              <span className=\"fa fa-fw fas fa-check icon\"></span>\n            ) : null}\n          </div>\n          <label\n            className=\"finder__filters__label--always\"\n            htmlFor={`${props.facet.funnelbackName}--${randomNumber}`}\n          >\n            {props.facet.name}\n            {!toggleChecked && totalText && \" (\" + totalText + \")\"}\n          </label>\n        </div>\n      );\n    }\n  } else {\n    return null;\n  }\n}\n\nFinder__paramCheckbox.propTypes = {\n  facet: PropTypes.object,\n  query: PropTypes.object,\n  pastEventsResponse: PropTypes.object,\n  update: PropTypes.object,\n  dependencies: PropTypes.arrayOf(PropTypes.object),\n  matrixState: PropTypes.bool,\n};\n\nexport default Finder__paramCheckbox;\n","/**<\n * @module patterns/finder/components/finder__select\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { EventSelect } from \"../../types/filters/filters\";\n\nfunction Finder__Select(props: EventSelect) {\n  const dateDayFormat = 10;\n  const currentDate = new Date(),\n    currentYear = currentDate.getUTCFullYear(),\n    currentDateMonth =\n      currentDate.getUTCMonth() >= 10\n        ? currentDate.getUTCMonth()\n        : \"0\" + (currentDate.getUTCMonth() + 1),\n    currentDateDay = currentDate.getUTCDate(),\n    currentDateString = `${currentYear}${currentDateMonth}${\n      currentDateDay >= dateDayFormat ? currentDateDay : \"0\" + currentDateDay\n    }`;\n\n  const randomNumber = props.mobile ? \"mobile\" : \"desktop\",\n    currentValue = (props.facet && props.query.facets[props.facet.meta]) || \"\";\n\n  // reduce the facet configuration to an array of all possible values for\n  // the facet\n  const allFacets =\n    props.facet &&\n    props.facet.values &&\n    props.facet.values.reduce((acc, data) => {\n      return [...acc, data];\n    }, []);\n\n  // reduce the Funnelback response for the facet to an array of valid\n  // values for the current query\n  const responseFacets =\n    props.responseFacet[0] && props.responseFacet[0].allValues\n      ? props.responseFacet[0].allValues.reduce((acc, data) => {\n          return [...acc, data.data];\n        }, [])\n      : [];\n\n  // count how many possible facets are not valid for the current query\n  // and will be hidden\n  const hiddenFacets =\n    allFacets &&\n    allFacets\n      .map((facet) => facet.data)\n      .filter((facet) => responseFacets.indexOf(facet.toLowerCase()) < 0)\n      .length;\n\n  const setFacet = (value: string) => {\n    const newQuery = props.query;\n\n    if (!newQuery.parameters) {\n      newQuery.parameters = {};\n    }\n\n    if (props.dependencies) {\n      props.dependencies.forEach((facet) => {\n        delete newQuery.facets[facet.meta];\n      });\n    }\n\n    if (value) {\n      newQuery.facets[props.facet.meta] = value;\n    } else {\n      delete newQuery.facets[props.facet.meta];\n    }\n\n    if (props.query.parameters && props.query.parameters.events) {\n      newQuery.parameters.lt_eventDate = currentDateString;\n    } else {\n      newQuery.parameters.ge_eventDate = currentDateString;\n    }\n\n    newQuery.startRank = 1;\n    newQuery.misspelling = null;\n    newQuery.interacted = true;\n\n    props.update.query(newQuery);\n    props.update.results(!props.update.updateState);\n  };\n\n  if (\n    props.facet &&\n    props.facet.values &&\n    hiddenFacets &&\n    props.facet.values.length > hiddenFacets\n  ) {\n    return (\n      <div\n        className={`finder__filter finder__select ${\n          currentValue && \"finder__select--selected\"\n        }`}\n      >\n        <label htmlFor={`meta_${props.facet.meta}_and--${randomNumber}`}>\n          {props.facet.name}\n        </label>\n        <select\n          name={`meta_${props.facet.meta}_and`}\n          id={`meta_${props.facet.meta}_and--${randomNumber}`}\n          onChange={(e) => setFacet(e.target.value)}\n          value={currentValue}\n        >\n          <option value=\"\" id={`meta${props.facet.meta}all--${randomNumber}`}>\n            {props.facet.noSelection}\n          </option>\n\n          {props.facet.values.map((value, i) => {\n            const responseFacetDetails =\n              props.responseFacet[0] &&\n              props.responseFacet[0].allValues &&\n              props.responseFacet[0].allValues.filter(\n                (responseFacetValue) =>\n                  responseFacetValue.data.toLowerCase() ===\n                  value.data.toLowerCase(),\n              );\n            if (\n              currentValue.toLowerCase() === value.data.toLowerCase() ||\n              (responseFacetDetails && responseFacetDetails[0])\n            ) {\n              return (\n                <option key={i} value={value.data.toLowerCase()}>\n                  {value.label}\n                  {currentValue !== value.data &&\n                  responseFacetDetails[0] &&\n                  responseFacetDetails[0].count > 0\n                    ? ` (${responseFacetDetails[0].count})`\n                    : \"\"}\n                </option>\n              );\n            } else {\n              return null;\n            }\n          })}\n        </select>\n      </div>\n    );\n  } else {\n    return null;\n  }\n}\n\nFinder__Select.propTypes = {\n  facet: PropTypes.object,\n  query: PropTypes.object,\n  responseFacet: PropTypes.arrayOf(PropTypes.object),\n  update: PropTypes.object,\n  dependencies: PropTypes.arrayOf(PropTypes.object),\n  mobile: PropTypes.bool,\n};\n\nexport default Finder__Select;\n","/**\n * @module patterns/finder/components/finder__filters\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport SelectFilter from \"./finder__select\";\nimport EventSelectFilter from \"./finder__eventSelect\";\nimport CheckboxFilter from \"./finder__checkbox\";\nimport ParamCheckBox from \"./finder__paramCheckbox\";\nimport EventCheckBox from \"./finder__eventCheckbox\";\nimport HiddenInput from \"./finder__hiddenInput\";\nimport TagFilter from \"./finder__tag\";\nimport Reset from \"./finder__reset\";\nimport Sort from \"./finder__sort\";\nimport { gaEvent } from \"../../util\";\nimport type { Filters } from \"../../types/filters/filters\";\nimport type { FacetDetails } from \"../../types/facet\";\n\n/**\n * Predicate for whether a facet should be displayed, if it's dependent on\n * another facet being set.\n *\n * @param {object} facet The facet to potentially display.\n * @param {object} facetMap The facets currently set on the query.\n * @return {bool} - Has any dependency been met\n */\nfunction dependencyMet(\n  facet: FacetDetails,\n  facetMap: { [key: string]: string },\n) {\n  const setFacets = Object.keys(facetMap);\n\n  if (!facet.dependency) {\n    return true;\n  }\n\n  if (\n    setFacets.indexOf(facet.dependency) >= 0 &&\n    facetMap[facet.dependency] !== \"\"\n  ) {\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * Component to update facet values in the query.\n *\n * @param {object} props React props.\n * @returns {object} - React component.\n */\nfunction Finder__Filters(props: Filters) {\n  const totalMatching =\n    props.response &&\n    props.response.summary &&\n    props.response.summary.fullyMatching;\n  const clearFiltersDesktop =\n      !props.updating && Object.keys(props.query.facets).length > 0 ? (\n        <div className=\"finder__filters__reset finder__filters__reset--desktop\">\n          <Reset\n            clear={props.clear}\n            resetSort={false}\n            matrixState={props.matrixState}\n            site={props.config.site || \"city\"} // Ensure site is defined\n          />\n        </div>\n      ) : null,\n    clearFiltersMobile =\n      (!props.updating && Object.keys(props.query.facets).length > 0) ||\n      props.query.sortType !== props.config.sort[0].type ? (\n        <Reset\n          clear={props.clear}\n          resetSort={true}\n          matrixState={props.matrixState}\n        />\n      ) : null;\n\n  const sort =\n    !props.matrixState &&\n    props.config.sort.length > 1 &&\n    props.config.displaySort &&\n    totalMatching ? (\n      <div className=\"wrapper--finder__select--sort--mobile\">\n        <Sort\n          key={props.mobile ? \"sort-mobile\" : \"sort-desktop\"}\n          config={props.config}\n          query={props.query}\n          update={props.update}\n        />\n      </div>\n    ) : null;\n\n  const submitSSR = props.matrixState ? (\n    <div className=\"finder__filter__submit\">\n      <button type=\"submit\" className=\"finder__query__submit finder__submit\">\n        <span\n          className=\"fal fa-sharp fa-search finder__query__submit__icon\"\n          aria-hidden=\"true\"\n        />{\" \"}\n        <span className=\"finder__query__submit__text\">Find</span>\n      </button>\n    </div>\n  ) : null;\n\n  return (\n    <div className=\"finder__filters\">\n      <h2 className=\"finder__filters__heading\">\n        <span className=\"finder__filters__heading__text\">\n          <span className=\"far fa-sharp fa-sliders-h icon\" aria-hidden=\"true\" />{\" \"}\n          {`Filter ${props.config.summariseAs && props.config.summariseAs.plural}`}\n        </span>\n        {clearFiltersMobile}\n      </h2>\n\n      <fieldset>\n        {!props.hasMounted && props.query.fixedParameters\n          ? props.query.fixedParameters.map((param) => {\n              return (\n                <HiddenInput\n                  key={param.name}\n                  name={param.name}\n                  value={param.value}\n                />\n              );\n            })\n          : null}\n        <div className=\"wrapper--finder_filters--filters\">\n          {props.config.facetLabels &&\n            props.config.facetLabels.map((facet) => {\n              if (dependencyMet(facet, props.query.facets)) {\n                switch (facet.type) {\n                  case \"eventCheckBox\":\n                    return (\n                      <EventCheckBox\n                        key={facet.meta}\n                        facet={facet}\n                        query={props.query}\n                        update={props.update}\n                        pastEventsResponse={\n                          props.response.extraSearches &&\n                          props.response.extraSearches.past &&\n                          props.response.extraSearches.past.response\n                        }\n                        matrixState={props.matrixState}\n                      />\n                    );\n                  case \"paramCheckBox\":\n                    return (\n                      <ParamCheckBox\n                        key={facet.meta}\n                        facet={facet}\n                        query={props.query}\n                        update={props.update}\n                        pastEventsResponse={\n                          props.response.extraSearches &&\n                          props.response.extraSearches.past &&\n                          props.response.extraSearches.past.response\n                        }\n                      />\n                    );\n                  case \"eventSelect\":\n                    return (\n                      <EventSelectFilter\n                        key={facet.meta}\n                        facet={facet}\n                        query={props.query}\n                        responseFacet={\n                          props.response && props.response.facets\n                            ? props.response.facets.filter(\n                                (funnelbackFacet) =>\n                                  funnelbackFacet.name === facet.funnelbackName,\n                              )\n                            : []\n                        }\n                        update={props.update}\n                        dependencies={\n                          props.config.facetLabels &&\n                          props.config.facetLabels.filter(\n                            (candidate) => candidate.dependency === facet.meta,\n                          )\n                        }\n                        mobile={props.mobile}\n                      />\n                    );\n                  case \"select\":\n                    return (\n                      <SelectFilter\n                        key={facet.meta}\n                        facet={facet}\n                        query={props.query}\n                        responseFacet={\n                          props.response && props.response.facets\n                            ? props.response.facets.filter(\n                                (funnelbackFacet) =>\n                                  funnelbackFacet.name === facet.funnelbackName,\n                              )\n                            : []\n                        }\n                        update={props.update}\n                        dependencies={\n                          props.config.facetLabels &&\n                          props.config.facetLabels.filter(\n                            (candidate) => candidate.dependency === facet.meta,\n                          )\n                        }\n                        mobile={props.mobile}\n                      />\n                    );\n                  case \"checkbox\":\n                    return (\n                      <CheckboxFilter\n                        key={facet.meta}\n                        facet={facet}\n                        query={props.query}\n                        responseFacet={\n                          props.response && props.response.facets\n                            ? props.response.facets.filter(\n                                (funnelbackFacet) =>\n                                  funnelbackFacet.name === facet.funnelbackName,\n                              )\n                            : []\n                        }\n                        update={props.update}\n                        dependencies={\n                          props.config.facetLabels &&\n                          props.config.facetLabels.filter(\n                            (candidate) => candidate.dependency === facet.meta,\n                          )\n                        }\n                        mobile={props.mobile}\n                      />\n                    );\n                  case \"tag\":\n                    return (\n                      <TagFilter\n                        key={facet.meta}\n                        facet={facet}\n                        query={props.query}\n                        responseFacet={\n                          props.response && props.response.facets\n                            ? props.response.facets.filter(\n                                (funnelbackFacet) =>\n                                  funnelbackFacet.name === facet.funnelbackName,\n                              )\n                            : []\n                        }\n                        update={props.update}\n                        dependencies={\n                          props.config.facetLabels &&\n                          props.config.facetLabels.filter(\n                            (candidate) => candidate.dependency === facet.meta,\n                          )\n                        }\n                        matrixState={props.matrixState}\n                      />\n                    );\n                  default:\n                    gaEvent(\n                      \"jsError\",\n                      \"JavaScript error\",\n                      \"finder__filters()\",\n                      \"Unknown filter type in finder__filters.js\",\n                      0,\n                      true,\n                    );\n                }\n              } else {\n                return null;\n              }\n            })}\n          <p className=\"finder__filters__nofilters\">\n            No filters are valid for the current query.\n          </p>\n          {clearFiltersDesktop}\n          {sort}\n          {submitSSR}\n        </div>\n      </fieldset>\n    </div>\n  );\n}\n\nFinder__Filters.propTypes = {\n  config: PropTypes.object,\n  query: PropTypes.object,\n  response: PropTypes.object,\n  update: PropTypes.object,\n  clear: PropTypes.func,\n  mobile: PropTypes.bool,\n  hasMounted: PropTypes.bool,\n  matrixState: PropTypes.bool,\n  updating: PropTypes.bool,\n};\n\nexport default Finder__Filters;\n","/**\n * @module patterns/finder/components/wrapper--finder__filters--mobile\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Filters from \"./finder__filters\";\nimport * as createFocusTrap from \"focus-trap\";\nimport type { FiltersMobiles } from \"../../types/filters/filters\";\n\nimport { enableBodyScroll, disableBodyScroll } from \"../../util\";\n\n/**\n * Render the mobile version of the filters.\n */\nfunction Finder__FiltersMobile(props: FiltersMobiles) {\n  const [display, setDisplay] = useState(false);\n  const [focusTrap, setFocusTrap] = useState<createFocusTrap.FocusTrap | null>(\n    null,\n  );\n  const filtersRef = useRef<HTMLDivElement | null>(null);\n\n  // Set up the focus trap once after mount\n  useEffect(() => {\n    const filtersEl = filtersRef.current;\n    if (!filtersEl) return;\n\n    const trap = createFocusTrap.createFocusTrap(filtersEl, {\n      initialFocus: filtersEl.querySelector(\n        \".wrapper--finder__filters--mobile__apply\",\n      ) as HTMLElement | undefined,\n      onDeactivate: () => setDisplay(false),\n      clickOutsideDeactivates: true,\n    });\n\n    setFocusTrap(trap);\n  }, []);\n\n  // Manage focus trap and scroll behavior based on `display`\n  useEffect(() => {\n    if (!focusTrap) return;\n\n    if (display) {\n      if (!focusTrap.active) focusTrap.activate();\n      disableBodyScroll();\n    } else {\n      if (focusTrap.active) focusTrap.deactivate();\n      enableBodyScroll();\n    }\n  }, [display, focusTrap]);\n\n  const totalMatching =\n    props.response &&\n    props.response.summary &&\n    props.response.summary.totalMatching;\n\n  const result =\n    totalMatching === 1 && props.summariseAs\n      ? props.summariseAs.singular\n      : props.summariseAs && props.summariseAs.plural\n        ? props.summariseAs.plural\n        : null;\n\n  const totalMatchingMessage = totalMatching\n    ? `Show ${totalMatching} ${result}`\n    : \"Close\";\n\n  const filtersCount = props.config.displaySort ? (\n    props.config.sort[0].type !== props.query.sortType ||\n    Object.keys(props.query.facets).length > 0 ? (\n      <span>\n        Filters{\" \"}\n        <span className=\"wrapper--finder__filters--mobile__toggle__count\">\n          (\n          {props.config.sort[0].type !== props.query.sortType\n            ? Object.keys(props.query.facets).length + 1\n            : Object.keys(props.query.facets).length}\n          )\n        </span>\n      </span>\n    ) : (\n      <span>Filter</span>\n    )\n  ) : Object.keys(props.query.facets).length > 0 ? (\n    <span>\n      Filters{\" \"}\n      <span className=\"wrapper--finder__filters--mobile__toggle__count\">\n        (\n        {props.config.sort[0].type !== props.query.sortType\n          ? Object.keys(props.query.facets).length + 1\n          : Object.keys(props.query.facets).length}\n        )\n      </span>\n    </span>\n  ) : (\n    <span>Filter</span>\n  );\n\n  const toggle = display ? null : (\n    <button\n      type=\"button\"\n      className=\"wrapper--finder__filters--mobile__toggle\"\n      aria-haspopup={true}\n      aria-expanded={display}\n      onClick={() => setDisplay(true)}\n      data-filters-applied={\n        Object.keys(props.query.facets).length !== 0 ||\n        (props.config.displaySort &&\n          props.config.sort[0].type !== props.query.sortType)\n      }\n    >\n      <span>\n        <span className=\"far fa-sharp fa-sliders-h icon\" aria-hidden=\"true\" />{\" \"}\n        {filtersCount}\n      </span>\n    </button>\n  );\n\n  return (\n    <div\n      className=\"wrapper--finder__filters\"\n      data-open={display}\n      ref={filtersRef}\n    >\n      {toggle}\n      <div className=\"wrapper--finder__filters--mobile__filters\">\n        <div className=\"wrapper--finder__filters--mobile__filters__content\">\n          <Filters\n            config={props.config}\n            query={props.query}\n            response={props.response}\n            update={props.update}\n            clear={props.clear}\n            mobile={props.mobile}\n            hasMounted={props.hasMounted}\n            matrixState={props.matrixState}\n            updating={props.updating}\n          />\n        </div>\n      </div>\n      <div className=\"wrapper--finder__filters--mobile__apply\">\n        <button\n          type=\"button\"\n          aria-expanded={display}\n          onClick={() => setDisplay(false)}\n          disabled={props.updating}\n        >\n          {Object.keys(props.query.facets).length === 0 ? null : (\n            <span className=\"far fa-chevron-left icon\"></span>\n          )}\n\n          <span aria-live=\"polite\">\n            {props.updating ? (\n              <>\n                <span\n                  className=\"fas fa-spinner fa-pulse icon\"\n                  aria-hidden=\"true\"\n                />{\" \"}\n                <span className=\"wrapper--finder__filters--mobile__apply__text\">\n                  Updating {props.summariseAs && props.summariseAs.plural}\n                </span>\n              </>\n            ) : (\n              <span className=\"wrapper--finder__filters--mobile__apply__text\">\n                {Object.keys(props.query.facets).length === 0\n                  ? \"Close\"\n                  : totalMatchingMessage}\n              </span>\n            )}\n          </span>\n        </button>\n      </div>\n    </div>\n  );\n}\n\nFinder__FiltersMobile.propTypes = {\n  config: PropTypes.object,\n  query: PropTypes.object,\n  response: PropTypes.object,\n  update: PropTypes.object,\n  clear: PropTypes.func,\n  updating: PropTypes.bool,\n  summariseAs: PropTypes.object,\n  mobile: PropTypes.bool,\n  hasMounted: PropTypes.bool,\n  matrixState: PropTypes.bool,\n};\n\nexport default Finder__FiltersMobile;\n","/**\n * @module patterns/finder/components/finder__checkbox\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { FixedParameters } from \"../../types/query\";\nfunction Finder__hiddenInput(props: FixedParameters) {\n  return (\n    <input\n      type=\"hidden\"\n      id={props.name}\n      name={props.name}\n      value={props.value}\n    />\n  );\n}\n\nFinder__hiddenInput.propTypes = {\n  name: PropTypes.string,\n  value: PropTypes.string,\n};\n\nexport default Finder__hiddenInput;\n","/**\n * @module patterns/finder/components/finder__checkbox\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { ParamCheckBox } from \"../../types/filters/filters\";\n\nfunction Finder__paramCheckbox(props: ParamCheckBox) {\n  const stringLength = 16,\n    stringOffset = -4,\n    randomNumber = Math.random().toString(stringLength).slice(stringOffset),\n    pastEventsResponseTotal =\n      props.pastEventsResponse &&\n      props.pastEventsResponse.resultPacket.resultsSummary &&\n      props.pastEventsResponse.resultPacket.resultsSummary.fullyMatching,\n    pastEventsPartialResponseTotal =\n      props.pastEventsResponse &&\n      props.pastEventsResponse.resultPacket.resultsSummary &&\n      props.pastEventsResponse.resultPacket.resultsSummary.partiallyMatching,\n    toggleChecked =\n      props.query.parameters && props.facet.meta in props.query.parameters,\n    totalText = pastEventsResponseTotal\n      ? pastEventsResponseTotal\n      : pastEventsPartialResponseTotal\n        ? pastEventsPartialResponseTotal\n        : 0;\n\n  const toggleFacet = () => {\n    const newQuery = {\n      ...props.query,\n      parameters: { ...(props.query.parameters ?? {}) },\n    };\n\n    if (toggleChecked) {\n      delete newQuery.parameters[props.facet.meta];\n    } else if (props.facet.checkedValue !== undefined) {\n      newQuery.parameters[props.facet.meta] = props.facet.checkedValue;\n    }\n\n    newQuery.startRank = 1;\n    newQuery.misspelling = null;\n    newQuery.interacted = true;\n\n    props.update.query(newQuery);\n    props.update.results(!props.update.updateState);\n  };\n\n  if (totalText > 0) {\n    return (\n      <div className=\"finder__filter finder__checkbox\">\n        <input\n          type=\"checkbox\"\n          id={`${props.facet.funnelbackName}--${randomNumber}`}\n          name={props.facet.meta}\n          value={(props.facet.checkedValue ?? \"\") as string}\n          onChange={() => toggleFacet()}\n          checked={toggleChecked}\n        />\n        <div\n          className=\"finder__checkbox__indicator finder__checkbox__indicator\"\n          aria-hidden=\"true\"\n          onClick={() => toggleFacet()}\n        >\n          {toggleChecked ? (\n            <span className=\"fa fa-fw fas fa-check icon\"></span>\n          ) : null}\n        </div>\n        <label\n          className=\"finder__filters__label--always\"\n          htmlFor={`${props.facet.funnelbackName}--${randomNumber}`}\n        >\n          {props.facet.name}\n          {!toggleChecked && totalText && \" (\" + totalText + \")\"}\n        </label>\n      </div>\n    );\n  } else {\n    return null;\n  }\n}\n\nFinder__paramCheckbox.propTypes = {\n  facet: PropTypes.object,\n  query: PropTypes.object,\n  pastEventsResponse: PropTypes.object,\n  update: PropTypes.object,\n  dependencies: PropTypes.arrayOf(PropTypes.object),\n};\n\nexport default Finder__paramCheckbox;\n","/**\n * @module patterns/finder/components/filters/finder__reset\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { Reset } from \"../../types/filters/filters\";\n\n/**\n * Clear input button.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Reset(props: Reset) {\n  const resetClassName = props.site\n    ? \"fa fa-times icon\"\n    : \"fa-sharp fa-solid fa-xmark icon\";\n  if (props.matrixState) {\n    return (\n      <a href=\"?\" className=\"finder__reset\" type=\"button\">\n        <span className={resetClassName} />\n        <span className=\"finder__reset__text\">Reset</span>\n      </a>\n    );\n  } else {\n    return (\n      <button\n        className=\"finder__reset\"\n        type=\"button\"\n        onClick={() => {\n          props.clear(props.resetSort);\n        }}\n      >\n        <span className={resetClassName} />\n        <span className=\"finder__reset__text\">Reset</span>\n      </button>\n    );\n  }\n}\n\nFinder__Reset.propTypes = {\n  clear: PropTypes.func,\n  resetSort: PropTypes.bool,\n  matrixState: PropTypes.bool,\n};\n\nexport default Finder__Reset;\n","/**<\n * @module patterns/finder/components/finder__select\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { Select } from \"../../types/filters/filters\";\n\nfunction Finder__Select(props: Select) {\n  const randomNumber = props.mobile ? \"mobile\" : \"desktop\",\n    currentValue = (props.facet && props.query.facets[props.facet.meta]) || \"\";\n\n  // reduce the facet configuration to an array of all possible values for\n  // the facet\n  const allFacets =\n    props.facet &&\n    props.facet.values &&\n    props.facet.values.reduce((acc, data) => {\n      return [...acc, data];\n    }, []);\n\n  // reduce the Funnelback response for the facet to an array of valid\n  // values for the current query\n  const responseFacets =\n    props.responseFacet[0] && props.responseFacet[0].allValues\n      ? props.responseFacet[0].allValues.reduce((acc, data) => {\n          return [...acc, data.data];\n        }, [])\n      : [];\n\n  // count how many possible facets are not valid for the current query\n  // and will be hidden\n  const hiddenFacets: number = allFacets\n    ? allFacets\n        .map((facet) => facet.data)\n        .filter((facet) => responseFacets.indexOf(facet.toLowerCase()) < 0)\n        .length\n    : 0;\n\n  const setFacet = (value: string) => {\n    const newQuery = {\n      ...props.query,\n      facets: { ...props.query.facets },\n    };\n\n    if (props.dependencies) {\n      props.dependencies.forEach((facet) => {\n        delete newQuery.facets[facet.meta];\n      });\n    }\n\n\n    if (value) {\n      newQuery.facets[props.facet.meta] = value;\n    } else{\n      delete newQuery.facets[props.facet.meta];\n    }\n\n\n    newQuery.startRank = 1;\n    newQuery.misspelling = null;\n    newQuery.interacted = true;\n\n    props.update.query(newQuery);\n    props.update.results(!props.update.updateState);\n  };\n\n  if (\n    props.facet &&\n    props.facet.values &&\n    props.facet.values.length > hiddenFacets\n  ) {\n    return (\n      <div\n        className={`finder__filter finder__select ${\n          currentValue && \"finder__select--selected\"\n        }`}\n      >\n        <label htmlFor={`meta_${props.facet.meta}_and--${randomNumber}`}>\n          {props.facet.name}\n        </label>\n        <select\n          name={`meta_${props.facet.meta}_and`}\n          id={`meta_${props.facet.meta}_and--${randomNumber}`}\n          onChange={(e) => setFacet(e.target.value)}\n          value={currentValue}\n        >\n          <option value=\"\" id={`meta${props.facet.meta}all--${randomNumber}`}>\n            {props.facet.noSelection}\n          </option>\n\n          {props.facet.values.map((value, i) => {\n            const responseFacetDetails =\n              props.responseFacet[0] &&\n              props.responseFacet[0].allValues &&\n              props.responseFacet[0].allValues.filter(\n                (responseFacetValue) =>\n                  responseFacetValue.data.toLowerCase() ===\n                  value.data.toLowerCase(),\n              );\n            if (\n              currentValue.toLowerCase() === value.data.toLowerCase() ||\n              (responseFacetDetails && responseFacetDetails[0])\n            ) {\n              return (\n                <option key={i} value={value.data.toLowerCase()}>\n                  {value.label}\n                  {currentValue !== value.data &&\n                  responseFacetDetails[0] &&\n                  responseFacetDetails[0].count > 0\n                    ? ` (${responseFacetDetails[0].count})`\n                    : \"\"}\n                </option>\n              );\n            } else {\n              return null;\n            }\n          })}\n        </select>\n      </div>\n    );\n  } else {\n    return null;\n  }\n}\n\nFinder__Select.propTypes = {\n  facet: PropTypes.object,\n  query: PropTypes.object,\n  responseFacet: PropTypes.arrayOf(PropTypes.object),\n  update: PropTypes.object,\n  dependencies: PropTypes.arrayOf(PropTypes.object),\n  mobile: PropTypes.bool,\n};\n\nexport default Finder__Select;\n","/**\n * @module patterns/finder/components/finder__sort\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { Sort } from \"../../types/filters/filters\";\n\n/**\n * Component to change the sort order of the query.\n *\n * @param {object} props React props.\n * @returns {object} - React component.\n */\nfunction Finder__Sort(props: Sort) {\n  const stringLength = 16,\n    stringOffset = -4,\n    randomNumber = Math.random().toString(stringLength).slice(stringOffset);\n\n  const setSort = (type: string) => {\n    const newQuery = props.query;\n\n    newQuery.sortType = type;\n    newQuery.startRank = 1;\n    newQuery.misspelling = null;\n    newQuery.interacted = true;\n\n    props.update.query(newQuery);\n    props.update.results(!props.update.updateState);\n  };\n\n  const validSorts = props.config.sort.filter((sortType) =>\n    sortType.type === \"\"\n      ? props.query.query !== \"\" ||\n        Object.keys(props.query.facets).length > 0 ||\n        props.query.sortType === \"\"\n        ? true\n        : false\n      : true,\n  );\n\n  return validSorts.length > 1 ? (\n    <div\n      className={`finder__select--sort finder__select${\n        props.query.sortType !== props.config.sort[0].type\n          ? \" finder__select--selected\"\n          : \"\"\n      }`}\n    >\n      <label\n        className=\"finder__select__overline\"\n        htmlFor={`sort--${randomNumber}`}\n      >\n        Sort by\n      </label>\n      <select\n        name=\"sort\"\n        id={`sort--${randomNumber}`}\n        onChange={(e) => setSort(e.target.value)}\n        value={props.query.sortType}\n      >\n        {validSorts.map((sortType, i) => {\n          return (\n            <option key={i} value={sortType.type}>\n              {sortType.label}\n            </option>\n          );\n        })}\n      </select>\n    </div>\n  ) : null;\n}\n\nFinder__Sort.propTypes = {\n  config: PropTypes.object,\n  query: PropTypes.object,\n  update: PropTypes.object,\n};\n\nexport default Finder__Sort;\n","/**\n * @module patterns/finder/components/finder__tag\n * @author Web Development\n * @copyright City St George's, University of London 2020\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { hyperLink } from \"../../logic/hyper-link\";\nimport useHasMounted from \"../../logic/has-mounted\";\nimport type { Tag } from \"../../types/filters/filters\";\n\nfunction Finder__Tag(props: Tag) {\n  const hasMounted = useHasMounted();\n\n  if (!hasMounted) return null;\n\n  // reduce the facet configuration to an array of all possible values for\n  // the facet\n  const allFacets =\n    props.facet &&\n    props.facet.values &&\n    props.facet.values.reduce((acc, data) => {\n      return [...acc, data];\n    }, []);\n\n  // reduce the Funnelback response for the facet to an array of valid\n  // values for the current query\n  const responseFacets =\n    props.responseFacet[0] && props.responseFacet[0].allValues\n      ? props.responseFacet[0].allValues.reduce((acc, data) => {\n          return [...acc, data.data];\n        }, [])\n      : [];\n\n  // count how many possible facets are not valid for the current query\n  // and will be hidden\n  const hiddenFacets =\n    allFacets &&\n    allFacets\n      .map((facet) => facet.data)\n      .filter((facet) => responseFacets.indexOf(facet.toLowerCase()) < 0)\n      .length;\n\n  const deleteFacet = () => {\n    const newQuery = {\n      ...props.query,\n      facets: { ...props.query.facets },\n    };\n\n    if (props.dependencies) {\n      props.dependencies.forEach((facet) => {\n        delete newQuery.facets[facet.meta];\n      });\n    }\n\n    delete newQuery.facets[props.facet.meta];\n\n    newQuery.startRank = 1;\n    newQuery.misspelling = null;\n    newQuery.interacted = true;\n\n    props.update.query(newQuery);\n    props.update.results(!props.update.updateState);\n  };\n\n  const labelText = props.query.facets[props.facet.meta] &&\n    props.facet.values &&\n    hiddenFacets &&\n    props.facet.values.length >= hiddenFacets && (\n      <React.Fragment>\n        <span\n          className=\"fa-sharp fa-solid fa-xmark icon\"\n          aria-hidden=\"true\"\n        ></span>\n        <span className=\"finder__tag__text\">\n          <span className=\"sr-only\">Remove filter for </span>\n          {props.facet.name}:{\" \"}\n          {\n            props.facet.values.filter(\n              (value) =>\n                value.data.toLowerCase() ===\n                props.query.facets[props.facet.meta].toLowerCase(),\n            )[0].label\n          }\n        </span>\n      </React.Fragment>\n    );\n\n  const ssrHiddenField =\n    props.matrixState && props.query.facets[props.facet.meta] ? (\n      <input\n        type=\"hidden\"\n        name={`meta_${props.facet.meta}_and`}\n        value={props.query.facets[props.facet.meta]}\n      />\n    ) : null;\n\n  if (\n    props.facet.values &&\n    hiddenFacets &&\n    props.facet.values.length >= hiddenFacets &&\n    props.query.facets[props.facet.meta]\n  ) {\n    return (\n      <div className=\"finder__filter finder__tag\">\n        {ssrHiddenField}\n        {props.matrixState && props.query.facets[props.facet.meta] ? (\n          <a href={hyperLink(props.query, props.facet)}>{labelText}</a>\n        ) : (\n          <button onClick={() => deleteFacet()} type=\"button\">\n            {labelText}\n          </button>\n        )}\n      </div>\n    );\n  } else {\n    return null;\n  }\n}\n\nFinder__Tag.propTypes = {\n  facet: PropTypes.object,\n  query: PropTypes.object,\n  responseFacet: PropTypes.arrayOf(PropTypes.object),\n  update: PropTypes.object,\n  dependencies: PropTypes.arrayOf(PropTypes.object),\n  matrixState: PropTypes.bool,\n};\n\nexport default Finder__Tag;\n","/**\n * @module patterns/finder/components/finder__clear\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { Clear, ResetSort } from \"../../types/update\";\n\n/**\n * Clear input button.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Clear(props: Clear & { resetSort?: ResetSort }) {\n  const clearIconCLassName =\n    props.site === \"bayes\"\n      ? \"fa fa-times icon\"\n      : \"fa-sharp fa-solid fa-xmark icon\";\n  return (\n    <button\n      className=\"finder__clear\"\n      type=\"button\"\n      onClick={() => {\n        props.clear(props.resetSort);\n      }}\n    >\n      <span className={clearIconCLassName} />\n      <span className=\"finder__clear__text\">Clear query</span>\n    </button>\n  );\n}\n\nFinder__Clear.propTypes = {\n  clear: PropTypes.func,\n  resetSort: PropTypes.bool,\n};\n\nexport default Finder__Clear;\n","/**\n * @module patterns/finder/components/finder__query\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { CancelTokenSource } from \"axios\";\nimport { suggest } from \"../../logic/funnelback\";\nimport Clear from \"./finder__clear\";\nimport useHasMounted from \"../../logic/has-mounted\"; //  added\nimport type { QueryInput } from \"../../types/query/query\";\n\nconst maximumSuggestions = 5;\nconst escapeKey = \"Escape\",\n  endKey = \"End\",\n  homeKey = \"Home\",\n  arrowUp = \"ArrowUp\",\n  arrowDown = \"ArrowDown\";\n\nfunction highlightQueryTerm(suggestion: string, partialQuery: string) {\n  return (\n    <span>\n      <span className=\"sr-only\">{suggestion}</span>\n      <span aria-hidden=\"true\">\n        <span className=\"finder__suggestion\">\n          {suggestion.slice(\n            suggestion.indexOf(partialQuery.toLowerCase()),\n            suggestion.indexOf(partialQuery.toLowerCase()) +\n              partialQuery.length,\n          )}\n        </span>\n        {suggestion.slice(\n          suggestion.indexOf(partialQuery.toLowerCase()) + partialQuery.length,\n        )}\n      </span>\n    </span>\n  );\n}\n\nfunction Finder__Query(props: QueryInput) {\n  const searchIconClassName =\n    props.config.site && props.config.site === \"bayes\"\n      ? \"fa fa-search fa-lg\"\n      : \"fal fa-sharp fa-search\";\n\n  const hasMounted = useHasMounted(); //  detect client vs server\n\n  const [partialQuery, setPartialQuery] = useState(props.query.query || \"\");\n  const [suggestions, setSuggestions] = useState<string[]>([]);\n  const [call, setCall] = useState<CancelTokenSource | null>(null);\n  const [inputId] = useState(\"finder--\" + props.query.collection);\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const [activeSuggestionID, setActiveSuggestionID] = useState(\"\");\n  let textInput: HTMLInputElement | null = null;\n\n  useEffect(() => {\n    setPartialQuery(props.query.query);\n  }, [props.query.query, props.updating]);\n\n  useEffect(() => {\n    return () => {\n      if (call) call.cancel();\n    };\n  }, [call]);\n\n  function focusInput() {\n    if (textInput) {\n      textInput.focus();\n    }\n  }\n\n  const clearQuery = () => {\n    if (call) call.cancel();\n\n    setPartialQuery(\"\");\n    setSuggestions([]);\n    focusInput();\n\n    const newQuery = { ...props.query };\n    newQuery.misspelling = null;\n    newQuery.query = \"\";\n    newQuery.sortType = props.config.sort[0].type;\n    newQuery.startRank = 1;\n    newQuery.interacted = true;\n\n    props.update.query(newQuery);\n    props.update.results(!props.update.updateState);\n  };\n\n  const submitForm = (query?: string) => {\n    if (call) call.cancel();\n    setSuggestions([]);\n\n    const newQuery = props.query;\n\n    newQuery.misspelling = null;\n    newQuery.query = query ? query : partialQuery ? partialQuery : \"\";\n    newQuery.sortType = partialQuery ? \"\" : props.config.sort[0].type;\n    newQuery.startRank = 1;\n    newQuery.interacted = true;\n\n    props.update.query(newQuery);\n    props.update.results(!props.update.updateState);\n  };\n\n  const clear = partialQuery && (\n    <Clear\n      clear={() => {\n        clearQuery();\n      }}\n      site={props.config.site || \"city\"}\n    />\n  );\n\n  const submitSuggestion = (suggestion: string) => {\n    setShowSuggestions(false);\n    setSuggestions([]);\n    focusInput();\n    submitForm(suggestion);\n  };\n  const suggestionsList = suggestions && suggestions.length > 0 && (\n    <ul\n      role=\"listbox\"\n      aria-label=\"Search suggestions\"\n      aria-activedescendant={activeSuggestionID}\n      className={\n        showSuggestions\n          ? \"finder__query__suggestions show\"\n          : \"finder__query__suggestions hide\"\n      }\n    >\n      {[...new Set(suggestions)]\n        .slice(0, maximumSuggestions)\n        .map((suggestion, i) => (\n          <li key={suggestion} role=\"option\" id={inputId + \"--\" + i}>\n            <button\n              type=\"button\"\n              onBlur={() => {\n                setActiveSuggestionID(\"\");\n                setShowSuggestions(false);\n              }}\n              onFocus={() => setShowSuggestions(true)}\n              onMouseDown={() => submitSuggestion(suggestion)}\n              onClick={() => submitSuggestion(suggestion)}\n              onKeyDown={(e) => {\n                switch (e.key) {\n                  case escapeKey:\n                    e.currentTarget\n                      .closest(\".finder__query\")\n                      ?.querySelector(\"input\")\n                      ?.focus();\n                    setSuggestions([]);\n                    setActiveSuggestionID(\"\");\n                    break;\n                  case arrowUp:\n                    e.preventDefault();\n                    e.currentTarget.parentElement?.previousElementSibling\n                      ?.querySelector(\"button\")\n                      ?.focus();\n                    break;\n                  case arrowDown:\n                    e.preventDefault();\n                    e.currentTarget.parentElement?.nextElementSibling\n                      ?.querySelector(\"button\")\n                      ?.focus();\n                    break;\n                  case homeKey: {\n                    e.preventDefault();\n                    const first = e.currentTarget.closest(\"ul\")?.firstChild;\n                    if (first instanceof Element) {\n                      first.querySelector(\"button\")?.focus();\n                    }\n                    break;\n                  }\n                  case endKey: {\n                    e.preventDefault();\n                    const last = e.currentTarget.closest(\"ul\")?.lastChild;\n                    if (last instanceof Element) {\n                      last.querySelector(\"button\")?.focus();\n                    }\n                    break;\n                  }\n                }\n              }}\n            >\n              {highlightQueryTerm(suggestion, partialQuery)}\n            </button>\n          </li>\n        ))}\n    </ul>\n  );\n\n  //  Server-side fallback\n  if (!hasMounted) {\n    return (\n      <fieldset className=\"finder__query\">\n        <div>\n          <div className=\"finder__query__input\">\n            <label className=\"sr-only\" htmlFor={inputId}>\n              {`Search ${props.config.summariseAs && props.config.summariseAs.plural}`}\n            </label>\n            <input\n              type=\"text\"\n              id={inputId}\n              name=\"query\"\n              className=\"finder__query-input\"\n              placeholder={props.config.placeholder}\n              defaultValue={partialQuery}\n            />\n          </div>\n          <button type=\"submit\" className=\"finder__query__submit\">\n            <span\n              className=\"fal fa-sharp fa-search finder__query__submit__icon\"\n              aria-hidden=\"true\"\n            />\n            <span className=\"finder__query__submit__text\">Find</span>\n          </button>\n        </div>\n      </fieldset>\n    );\n  }\n\n  //  Interactive version after hydration\n  return (\n    <fieldset className=\"finder__query\">\n      <div>\n        <div className=\"finder__query__input\">\n          <div className=\"finder__query__icon--wrapper\">\n            <span\n              className={`finder__icon ${searchIconClassName} icon`}\n              aria-hidden=\"true\"\n            ></span>\n          </div>\n          <label className=\"sr-only\" htmlFor={inputId}>\n            {`Search ${props.config.summariseAs && props.config.summariseAs.plural}`}\n          </label>\n          <input\n            autoComplete=\"off\"\n            id={inputId}\n            name=\"query\"\n            placeholder={props.config.placeholder}\n            ref={(input) => {\n              textInput = input;\n            }}\n            type=\"text\"\n            value={partialQuery}\n            onKeyDown={(e) => {\n              if (e.key === escapeKey) clearQuery();\n              else if (e.key === arrowDown && suggestions.length > 0) {\n                e.preventDefault();\n                const button = e.currentTarget.parentElement?.querySelector(\n                  \".finder__query__suggestions button\",\n                ) as HTMLButtonElement | null;\n\n                button?.focus();\n                setActiveSuggestionID(\n                  e.currentTarget.parentElement?.querySelector(\n                    \".finder__query__suggestions li\",\n                  )?.id || \"\",\n                );\n              }\n            }}\n            onFocus={() => setShowSuggestions(true)}\n            onBlur={() => setShowSuggestions(false)}\n            onChange={(e) => {\n              const val = e.target.value;\n              setPartialQuery(val);\n              setSuggestions([]);\n              if (call) call.cancel();\n\n              if (val) {\n                const [promise, newCall] = suggest(\n                  props.query.collection,\n                  val,\n                  props.config.dxp ? props.config.dxp : false,\n                  props.config.site ? props.config.site : undefined,\n                ) as [Promise<string[]>, CancelTokenSource];\n                setCall(newCall);\n                promise\n                  .then((data) => setSuggestions(data))\n                  .catch(() => setSuggestions([]));\n              } else {\n                setSuggestions([]);\n              }\n            }}\n          />\n          {suggestionsList}\n          {clear}\n        </div>\n        <button\n          type=\"submit\"\n          className=\"finder__query__submit\"\n          onClick={() => submitForm()}\n        >\n          <span\n            className={`${searchIconClassName} finder__query__submit__icon`}\n            aria-hidden=\"true\"\n          />\n          <span className=\"finder__query__submit__text\">Find</span>\n        </button>\n      </div>\n    </fieldset>\n  );\n}\n\nFinder__Query.propTypes = {\n  config: PropTypes.object,\n  query: PropTypes.object,\n  update: PropTypes.object,\n  updating: PropTypes.bool,\n};\n\nexport default Finder__Query;\n","/**\n * @module patterns/finder/components/results/finder__announcement\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport DOMPurify from \"dompurify\";\nimport type { Announcement } from \"../../types/results/results\";\n\n/**\n * Renders the announcement box\n *\n * @param {object} props React props.\n * @returns {object} - React component.\n */\n\nfunction Finder__Announcement(props: Announcement) {\n  const clean = DOMPurify.sanitize(props.announcement, {\n    ALLOWED_TAGS: [\"strong\", \"p\", \"h2\", \"h3\", \"a\"],\n  });\n\n  return (\n    <div className=\"finder__results__announcement\">\n      <p dangerouslySetInnerHTML={{ __html: clean }} />\n    </div>\n  );\n}\n\nFinder__Announcement.propTypes = {\n  announcement: PropTypes.string,\n};\n\nexport default Finder__Announcement;\n","/**\n * @module patterns/finder/components/finder__didyoumean\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { DidYouMean } from \"../../types/results/results\";\n\n/**\n * Returns a Funnelback spelling suggestion as a button to update the query.\n *\n * @param {object} props React props.\n * @returns {object} - React component.\n */\nfunction Finder__DidYouMean(props: DidYouMean) {\n  const suggestion = props.response.spell?.text?.split(/\\s/)[0].trim() ?? \"\";\n\n  const didyoumean = props.query.misspelling ? (\n    <p className=\"finder__results__didyoumean\">\n      No {props.summariseAs && props.summariseAs.plural} found for \n      {props.query.misspelling}. Searching instead for {props.query.query}.\n    </p>\n  ) : (\n    <p className=\"finder__results__didyoumean\">\n      Did you mean{\" \"}\n      <button\n        type=\"button\"\n        className=\"finder__didyoumean__button\"\n        onClick={() => {\n          const newQuery = { ...props.query }; // clone the query object\n          newQuery.query = suggestion;\n          newQuery.startRank = 1;\n          newQuery.misspelling = null;\n          newQuery.interacted = true;\n          newQuery.facets = {};\n          props.update.query(newQuery);\n          props.update.results(!props.update.updateState);\n        }}\n      >\n        {suggestion}\n      </button>\n      ?\n    </p>\n  );\n\n  return didyoumean;\n}\n\nFinder__DidYouMean.propTypes = {\n  query: PropTypes.object,\n  response: PropTypes.object,\n  summariseAs: PropTypes.object,\n  update: PropTypes.object,\n};\n\nexport default Finder__DidYouMean;\n","/**\n * @module patterns/finder/components/finder__pagination\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { hyperLink } from \"../../logic/hyper-link\";\nimport type { Pagination } from \"../../types/results/results\";\n\n/**\n * Renders standard pagination controls patttern for the results.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Pagination(props: Pagination) {\n  const numberOfPages =\n      props.totalMatching &&\n      props.numRanks &&\n      Math.ceil(props.totalMatching / props.numRanks),\n    currentPage =\n      props.currStart &&\n      props.numRanks &&\n      Math.ceil(props.currStart / props.numRanks),\n    pages = [];\n\n  const changePage = (pageNumber: number) => {\n    const newStartRank =\n        props.numRanks && 1 + (pageNumber - 1) * props.numRanks,\n      newQuery = props.query;\n\n    newQuery.startRank = newStartRank;\n    newQuery.misspelling = null;\n    newQuery.interacted = true;\n\n    props.update.query(newQuery);\n    props.update.results(!props.update.updateState);\n  };\n\n  pages.push(\n    currentPage === 1 ? (\n      <span key=\"previousPage\" className=\"pagination__controls__button--prev\">\n        <span>Previous page</span>\n      </span>\n    ) : (\n      <a\n        className=\"pagination__controls__button--prev\"\n        key=\"prev\"\n        onClick={(e) => {\n          e.preventDefault();\n          currentPage && changePage(currentPage - 1);\n        }}\n        href={hyperLink(props.query, null, currentPage - 1, props.numRanks)}\n      >\n        <span>Previous page {currentPage}</span>\n      </a>\n    ),\n  );\n\n  for (let page = 1; page <= numberOfPages; page++) {\n    let className;\n    switch (page - numberOfPages) {\n      case 0:\n        className =\n          \"pagination__controls__element pagination__controls__button pagination__controls__button--last\";\n        break;\n      case -1:\n        className =\n          \"pagination__controls__element pagination__controls__button pagination__controls__button--penultimate\";\n        break;\n      default:\n        className =\n          \"pagination__controls__element pagination__controls__button\";\n    }\n\n    pages.push(\n      <a\n        aria-current={page === currentPage ? \"page\" : undefined}\n        aria-expanded={page === currentPage ? true : false}\n        aria-label={`Open page ${page}`}\n        className={className}\n        data-page={page}\n        data-proximity={Math.abs(page - currentPage)}\n        key={page}\n        onClick={(e) => {\n          e.preventDefault();\n          changePage(page);\n        }}\n        href={hyperLink(props.query, null, page, props.numRanks)}\n      >\n        <span>{page}</span>\n      </a>,\n    );\n\n    if (page === 1) {\n      pages.push(\n        <span\n          key=\"firstEllipsis\"\n          className=\"pagination__controls__element pagination__controls__ellipsis pagination__controls__ellipsis--first\"\n        >\n          <span></span>\n        </span>,\n      );\n    } else if (page === numberOfPages - 1) {\n      pages.push(\n        <span\n          key=\"lastEllipsis\"\n          className=\"pagination__controls__element pagination__controls__ellipsis pagination__controls__ellipsis--last\"\n        >\n          <span></span>\n        </span>,\n      );\n    }\n  }\n\n  pages.push(\n    currentPage === numberOfPages ? (\n      <span key=\"nextPage\" className=\"pagination__controls__button--next\">\n        <span>Next page</span>\n      </span>\n    ) : (\n      <a\n        className=\"pagination__controls__button--next\"\n        key=\"next\"\n        onClick={(e) => {\n          e.preventDefault();\n          currentPage === numberOfPages ? null : changePage(currentPage + 1);\n        }}\n        href={hyperLink(props.query, null, currentPage + 1, props.numRanks)}\n      >\n        <span>Next page</span>\n      </a>\n    ),\n  );\n\n  return (\n    <div className=\"pagination__wrapper\">\n      <nav className=\"pagination__controls\" data-pagecount={numberOfPages}>\n        {pages}\n      </nav>\n    </div>\n  );\n}\n\nFinder__Pagination.propTypes = {\n  currStart: PropTypes.number,\n  query: PropTypes.object,\n  numRanks: PropTypes.number,\n  totalMatching: PropTypes.number,\n  update: PropTypes.object,\n};\n\nexport default Finder__Pagination;\n","/**\n * @module patterns/finder/components/finder__results\n * @author Web Development\n * @copyright City, University of London 2021\n */\n\nimport BestBet from \"../cards/finder__results__bestbet\";\nimport Card from \"../cards/finder__results__card\";\nimport DidYouMean from \"./finder__didyoumean\";\nimport Pagination from \"./finder__pagination\";\nimport PromoCard from \"../cards/finder__results__promo\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport Summary from \"./finder__results__summary\";\nimport Announcement from \"./finder__announcement\";\nimport type { FinderResults } from \"../../types/results/results\";\n\n/**\n * Render Funnelback results.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results(props: FinderResults) {\n  const updating = (\n    <p className=\"finder__results__updating\" aria-live=\"polite\">\n      <span className=\"fas fa-spinner fa-pulse icon\" aria-hidden=\"true\" />{\" \"}\n      <span>Updating {props.summariseAs && props.summariseAs.plural}</span>\n    </p>\n  );\n\n  /**\n   * Display promo card based on user search/filter input.\n   *\n   * Props passed from finder. If conditions are met, promo card will display between first\n   * result card and the rest of the returned results.\n   */\n  let promoCardConditionMet = false, // Are conditions met to render promo card?\n    matchedPromoGroup: { [key: string]: string }[] = [], // Matching promo group based on query parameters\n    matchedPromoGroupDetails; // Matched promo group data to render to card\n\n  if (props.promo) {\n    const promoConditions = props.promo[0][\"conditions\"], // Conditions to render promo card\n      promoDetails = props.promo[0][\"details\"], // Details rendered to promo card\n      filterFacets = props.query.facets, // User-defined filter/search values\n      searchFacets = props.query.query.toLowerCase(), // User-input search value\n      queryFacetsAll = { ...filterFacets, searchFacets }; // Combine filter and search inputs\n\n      let promoCardConditionGroup: string; // Group-specific data to render in promo card\n\n    // Promo condition check and define group\n    const queryFacetsArray = [];\n    let queries = Object.values(queryFacetsAll);\n    for (const query of queries) {\n      queryFacetsArray.push(query);\n    }\n\n    // Remove empty array items\n    queries = queries.filter((item) => item);\n\n    // Loop query parameters and check if they match any of the promo card conditions\n    for (const q of queries) {\n      matchedPromoGroup = promoConditions.filter(\n        (el) =>\n          el.school === q ||\n          el.level === q ||\n          el.related === q ||\n          el.subject === q ||\n          el.type === q ||\n          el.searchQuery1 === q,\n      );\n    }\n\n    // Assign promo group value and define if promo card conditions are met\n    if (matchedPromoGroup.length > 0) {\n      promoCardConditionGroup = matchedPromoGroup[0][\"promoGroup\"];\n      promoCardConditionMet = true;\n    } else {\n      promoCardConditionMet = false;\n    }\n\n    // Filter promo card details to match correct group of data\n    matchedPromoGroupDetails = promoDetails.filter(\n      (el) => el.promoGroup === promoCardConditionGroup,\n    );\n  }\n\n  const resultsClass =\n    \"resultsVariant\" in props.config\n      ? `finder__results__list finder__results__list--${props.config.resultsVariant}`\n      : \"finder__results__list\";\n\n  if (props.response) {\n    const summary = (\n      <Summary\n        clear={props.clear}\n        config={props.config}\n        currEnd={props.response.summary.currEnd}\n        currStart={props.response.summary.currStart}\n        numRanks={props.response.summary.numRanks}\n        query={props.query}\n        summariseAs={props.summariseAs}\n        totalMatching={props.response.summary.totalMatching}\n        update={props.update}\n        summaryHeadingRef={props.summaryHeadingRef}\n      />\n    );\n\n    const announcement = props.config.announcement && (\n      <Announcement announcement={props.config.announcement} />\n    );\n\n    const didYouMean = (props.query.misspelling || props.response.spell) && (\n      <DidYouMean\n        query={props.query}\n        summariseAs={props.summariseAs}\n        response={props.response}\n        update={props.update}\n      />\n    );\n\n    // if we have more results than will fit on a single page, we need\n    // pagination\n    const pagination = props.response.summary.totalMatching &&\n      props.response.summary.numRanks &&\n      props.response.summary.totalMatching >\n        props.response.summary.numRanks && (\n        <Pagination\n          currStart={props.response.summary.currStart}\n          numRanks={props.response.summary.numRanks}\n          query={props.query}\n          totalMatching={props.response.summary.totalMatching}\n          update={props.update}\n        />\n      );\n\n    const promoCard = matchedPromoGroupDetails && (\n      <PromoCard\n        heading={matchedPromoGroupDetails[0][\"heading\"]}\n        body={matchedPromoGroupDetails[0][\"body\"]}\n        linkRef={matchedPromoGroupDetails[0][\"linkRef\"]}\n        linkText={matchedPromoGroupDetails[0][\"linkText\"]}\n      />\n    );\n\n    let results;\n    const secondItemOnwards = props.response.results;\n      \n\n    if (\n      promoCardConditionMet &&\n      ((props.response.bestBets && props.response.bestBets.length > 0) ||\n        props.response.results.length > 0)\n    ) {\n      if (props.query.startRank === 1) {\n        const firstItemData = props.response.results[0];\n        const secondItemOnwardsData = Array.from(secondItemOnwards.slice(1));\n\n        results = (\n          <ol start={props.response.summary.currStart} className={resultsClass}>\n            <Card\n              bestBets={false}\n              details={firstItemData}\n              type={props.type}\n              query={props.query}\n            />\n            {promoCard}\n            {secondItemOnwardsData.map((s) => (\n              <Card\n                bestBets={false}\n                details={s}\n                key={s.docNum}\n                type={props.type}\n                query={props.query}\n              />\n            ))}\n          </ol>\n        );\n      } else {\n        results = (\n          <ol start={props.response.summary.currStart} className={resultsClass}>\n            {props.response.results.map((card) => (\n              <Card\n                bestBets={false}\n                details={card}\n                key={card.docNum}\n                type={props.type}\n                query={props.query}\n              />\n            ))}\n          </ol>\n        );\n      }\n    }\n\n    if (props.response.results && !promoCardConditionMet) {\n      results =\n        (props.response.bestBets && props.response.bestBets.length > 0) ||\n        props.response.results.length > 0 ? (\n          <ol start={props.response.summary.currStart} className={resultsClass}>\n            {props.response.bestBets &&\n              props.response.bestBets.map((card, i) => (\n                <BestBet details={card} key={`best-bet__${i}`} />\n              ))}\n\n            {props.response.results.map((card) => (\n              <Card\n                bestBets={false}\n                details={card}\n                key={card.docNum}\n                type={props.type}\n                query={props.query}\n              />\n            ))}\n          </ol>\n        ) : null;\n    }\n\n    // render either the results, or a spinner while we wait for Funnelback\n    const resultsContent = props.updating ? (\n      <React.Fragment>{updating}</React.Fragment>\n    ) : (\n      <React.Fragment>\n        {didYouMean}\n        {announcement}\n        {summary}\n        {results}\n        {pagination}\n      </React.Fragment>\n    );\n    return <div className=\"finder__results\">{resultsContent}</div>;\n  } else {\n    return <div className=\"finder__results\">{updating}</div>;\n  }\n}\n\nFinder__Results.propTypes = {\n  clear: PropTypes.func,\n  query: PropTypes.object,\n  response: PropTypes.object,\n  summariseAs: PropTypes.object,\n  type: PropTypes.string,\n  update: PropTypes.object,\n  updating: PropTypes.bool,\n  config: PropTypes.object,\n  promo: PropTypes.array,\n  pastEventsQuery: PropTypes.object,\n  pastEventsResponse: PropTypes.object,\n  pastEventsUpdate: PropTypes.object,\n  matrixState: PropTypes.object,\n};\n\nexport default Finder__Results;\n","/**\n * @module patterns/finder/components/finder__results__summary\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport Sort from \"../filters/finder__sort\";\nimport type { SummaryResults } from \"../../types/results/results\";\n\n/**\n * Results heading, summarising the response.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Summary(props: SummaryResults) {\n  const result =\n      props.totalMatching === 1\n        ? props.summariseAs.singular\n        : props.summariseAs.plural,\n    formatter = new Intl.NumberFormat(\"en-GB\"),\n    sort =\n      props.config.sort.length > 1 && props.config.displaySort ? (\n        <div className=\"wrapper--finder__select--sort--desktop\">\n          <Sort\n            config={props.config}\n            query={props.query}\n            update={props.update}\n          />\n        </div>\n      ) : null;\n\n  if (props.totalMatching === 0) {\n    return (\n      <div\n        className=\"finder__results__summary finder__results__summary--noresults\"\n        ref={props.summaryHeadingRef}\n      >\n        <h2 className=\"finder__results__summary__heading\">\n          Your search did not match any {props.summariseAs.plural}.\n        </h2>\n        <p>Suggestions:</p>\n        <ul>\n          <li>Make sure that all words are spelled correctly</li>\n          <li>Try different keywords</li>\n          <li>Try more general keywords</li>\n          <li>Try fewer keywords</li>\n          <li>Try fewer filters</li>\n          {Object.keys(props.query.facets).length > 0 && (\n            <li>\n              <button\n                type=\"button\"\n                onClick={() => {\n                  props.clear(true);\n                }}\n              >\n                Reset filters\n              </button>\n            </li>\n          )}\n          {props.query.query && (\n            <li>\n              <button\n                type=\"button\"\n                onClick={() => {\n                  const newQuery = props.query;\n\n                  newQuery.query = \"\";\n                  newQuery.sortType = props.config.sort[0].type;\n                  newQuery.misspelling = null;\n                  newQuery.startRank = 1;\n                  newQuery.interacted = true;\n\n                  props.update.query(newQuery);\n                  props.update.results(!props.update.updateState);\n                }}\n              >\n                Reset query\n              </button>\n            </li>\n          )}\n        </ul>\n      </div>\n    );\n  } else {\n    return (\n      <div className=\"finder__results__summary\" ref={props.summaryHeadingRef}>\n        <h2 aria-live=\"polite\" className=\"finder__results__summary__heading\">\n          {props.query.query || Object.keys(props.query.facets).length > 0\n            ? \"Matching\"\n            : \"All\"}{\" \"}\n          {result}{\" \"}\n          <span>\n            (showing{\" \"}\n            {props.totalMatching > props.numRanks && (\n              <>\n                <span>{formatter.format(props.currStart)}</span>\n                <span>{props.currEnd && formatter.format(props.currEnd)}</span>{\" \"}\n                of{\" \"}\n              </>\n            )}\n            <span>{formatter.format(props.totalMatching)}</span> {result}\n            {props.query.query && ` for ${props.query.query}`})\n          </span>\n        </h2>\n        {sort}\n      </div>\n    );\n  }\n}\n\nFinder__Results__Summary.propTypes = {\n  clear: PropTypes.func,\n  config: PropTypes.object,\n  currEnd: PropTypes.number,\n  currStart: PropTypes.number,\n  numRanks: PropTypes.number,\n  query: PropTypes.object,\n  summariseAs: PropTypes.object,\n  totalMatching: PropTypes.number,\n  update: PropTypes.object,\n};\n\nexport default Finder__Results__Summary;\n","import React from \"react\";\n\nconst formatLabel = (label: string, value: string) => {\n  if (!value) return label;\n\n  const parts = label.split(value);\n\n  return (\n    <React.Fragment>\n      {parts.reduce<React.ReactNode[]>((acc, part, i) => {\n        if (i === 0) {\n          return [part];\n        }\n        return acc.concat(\n          <span className=\"highlightText\" key={value + part}>\n            {value}\n          </span>,\n          part,\n        );\n      }, [])}\n    </React.Fragment>\n  );\n};\n\nexport default formatLabel;\n","/**\n * @module patterns/finder/component/tools/finder__toolTip\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { ToolTip } from \"../../types/cards/card\";\n\nfunction Finder__ToolTip(props: ToolTip) {\n  const toggleLabel = () => setShow(!show);\n\n  const [show, setShow] = useState(false);\n\n  const {\n    thumbnailSourceName,\n    thumbnailSourceUrl,\n    thumbnailAuthorName,\n    thumbnailAuthorUrl,\n    thumbnailLicenceType,\n    thumbnailLicenceUrl,\n    displayToolTip,\n  } = props;\n\n  const labelAuthor =\n      thumbnailAuthorUrl && thumbnailAuthorName ? (\n        <a href={thumbnailAuthorUrl}>{thumbnailAuthorName}</a>\n      ) : thumbnailAuthorName ? (\n        <span>{thumbnailAuthorName}</span>\n      ) : null,\n    labelSource =\n      thumbnailSourceUrl && thumbnailSourceName ? (\n        <a href={thumbnailSourceUrl}>{thumbnailSourceName}</a>\n      ) : thumbnailSourceName ? (\n        <span>{thumbnailSourceName}</span>\n      ) : null,\n    labelLicense =\n      thumbnailLicenceUrl && thumbnailLicenceType ? (\n        <a href={thumbnailLicenceUrl}>{thumbnailLicenceType}</a>\n      ) : thumbnailLicenceType ? (\n        thumbnailLicenceType\n      ) : null;\n\n  if (displayToolTip && (thumbnailAuthorName || thumbnailSourceName)) {\n    return (\n      <figure className=\"wrapper--tooltip__label\" data-open={show}>\n        <button\n          className=\"tooltip tooltip--image-credit\"\n          type=\"button\"\n          aria-expanded={show}\n          onClick={toggleLabel}\n        >\n          <span\n            className={`tooltip__icon icon fa-sharp fa-light fa-subtitles ${\n              show ? \"fa-xmark\" : \"fa-subtitles\"\n            }`}\n          />\n          <span className=\"sr-only\">Show image credit</span>\n        </button>\n        <figcaption className=\"tooltip__label\">\n          {labelAuthor} {labelSource && \"/ \"} {labelSource} {labelLicense}\n        </figcaption>\n      </figure>\n    );\n  } else {\n    return null;\n  }\n}\n\nFinder__ToolTip.propTypes = {\n  thumbnailSourceName: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  thumbnailSourceUrl: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  thumbnailAuthorName: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  thumbnailAuthorUrl: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  thumbnailLicenseType: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  thumbnailLicenseUrl: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  displayToolTip: PropTypes.bool,\n};\n\nexport default Finder__ToolTip;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Query from \"../../components/query/finder__query\";\nimport Filters from \"../../components/filters/finder__filtersmobile\";\nimport Results from \"../../components/results/finder__results\";\nimport useLogicWrapper from \"../../logic/logic\";\nimport useHasMounted from \"../../logic/has-mounted\";\n\nimport type { MatrixConfigJSON } from \"../../types/configJSON\";\nimport type { Response } from \"../../types/FBresponse\";\n\ntype FinderProps = {\n  config: MatrixConfigJSON;\n  initialResults?: Response;\n  initialQuery?: {[key: string]: string };\n  element: HTMLElement | null;\n};\n\nfunction Finder(props: FinderProps) {\n  const hasMounted = useHasMounted();\n  const intialResults = Object.freeze({\n          bestBets: [],\n          extraSearches: {},\n          facets: [],\n          results: [],\n          spell: null,\n          summary: {\n            currEnd: 0,\n            currStart: 0,\n            numRanks: 0,\n            totalMatching: 0,\n          },\n        })\n\n\n  const {\n    query,\n    funnelbackResponse,\n    updating,\n    updater,\n    clear,\n    matrixState,\n    summaryHeadingRef,\n  } = useLogicWrapper(\n    props.config,\n    props.initialResults ?? intialResults,\n    props.initialQuery || {},\n    props.element,\n  );\n\n  const finderMain = (\n    <>\n      {props.config.facetLabels && props.config.facetLabels.length > 0 && (\n        <Filters\n          config={props.config}\n          query={query}\n          response={funnelbackResponse}\n          update={updater}\n          updating={updating}\n          summariseAs={props.config.summariseAs}\n          clear={clear}\n          mobile={true}\n          hasMounted={hasMounted}\n          matrixState={matrixState}\n        />\n      )}\n\n      <Results\n        clear={clear}\n        config={props.config}\n        query={query}\n        response={funnelbackResponse}\n        summariseAs={props.config.summariseAs}\n        type={props.config.resultCard}\n        update={updater}\n        updating={updating}\n        summaryHeadingRef={summaryHeadingRef}\n      />\n    </>\n  );\n\n  const QueryInput = (\n    <Query\n      config={props.config}\n      query={query}\n      update={updater}\n      updating={updating}\n    />\n  );\n\n  // If the site is bayes, we want to render the query input in the top section\n\n  const topSectionQueryInput =\n    props.config.queryInputConfig &&\n    props.config.queryInputConfig.showQueryInTopSection ? (\n      <div className=\"finder__top\">\n        <div className=\"container\">{QueryInput}</div>\n      </div>\n    ) : null;\n\n  return (\n    <form\n      className=\"finder\"\n      method=\"GET\"\n      // prevent default only after mount\n      onSubmit={(e) => {\n        if (hasMounted) {\n          e.preventDefault();\n        }\n      }}\n    >\n      {props.config.site && props.config.site === \"bayes\" ? (\n        <>\n          {topSectionQueryInput}\n          <div className=\"finder__main\">\n            <div className=\"container\">\n              <div className=\"grid\">{finderMain}</div>\n            </div>\n          </div>\n        </>\n      ) : (\n        <>\n          {QueryInput}\n          {finderMain}\n        </>\n      )}\n    </form>\n  );\n}\n\nFinder.propTypes = {\n  config: PropTypes.object.isRequired,\n  element: PropTypes.object,\n  initialQuery: PropTypes.object,\n  initialResults: PropTypes.object,\n};\n\nexport default Finder;\n","/**\n * Functions for making requests to Funnelback\n *\n * @module funnelback\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport axios from \"axios\";\nimport https from \"https\";\nimport { axiosRequest } from \"../util\";\nimport type { FixedParameters, FixedFacets } from \"../types/query\";\nimport type { CancelTokenSource } from \"axios\";\nimport type { Response } from \"../types/FBresponse\";\n\ntype Facets = { [key: string]: string };\ntype Parameters = { [key: string]: string };\n\nconst baseUrl = \"https://www.citystgeorges.ac.uk/web-services/dxp-fb/\",\n  dxpBaseUrl = \"https://www.citystgeorges.ac.uk/web-services/dxp-fb\",\n  findRootUrl = \"/funnelback-16-find\",\n  dxpFindRootUrl = \"/funnelback-dxp-find\",\n  dxpSuggestRootUrl = \"/funnelback-dxp-suggest\",\n  suggestRootUrl = \"/funnelback-16-suggest\",\n  maximumSuggestions = 100,\n  timeout = 30000;\n\nfunction getSiteUrl(site: string | undefined): string {\n  switch (site) {\n    case \"city\":\n      return \"https://www.citystgeorges.ac.uk/web-services/dxp-fb/\";\n      break;\n    case \"bayes\":\n      return \"https://www.bayes.citystgeorges.ac.uk/webservices/dxp-fb/\";\n      break;\n    default:\n      return \"https://www.citystgeorges.ac.uk/web-services/dxp-fb/\";\n  }\n}\n\n/**\n * Funnelback search query.\n *\n * @param {string} collection The Funnelback collection to query.\n * @param {string} [query] The query string.\n * @param {string} [sortType] The field to sort by.\n * @param {integer} startRank The first result to return.\n * @param {integer} numRank The number of results to return.\n * @param {object} [facets] A map of facets to query strings.\n * @return {Promise} - A promise of search results.\n */\nexport function find(\n  collection: string,\n  fixedFacets: FixedFacets[] | undefined,\n  fixedParameters: FixedParameters[] | undefined,\n  query: string,\n  sortType: string | undefined,\n  startRank: number | undefined,\n  numRank: number | undefined,\n  facets: Facets,\n  parameters: Parameters | undefined,\n  dxp: boolean,\n  site: string | undefined = undefined,\n): [Promise<Response>, CancelTokenSource] {\n  const baseUrlWithSite = site ? getSiteUrl(site) : baseUrl;\n\n  const fixedParams: { [key: string]: string } = {};\n  fixedParameters &&\n    fixedParameters.forEach((param) => {\n      fixedParams[`${param.name}`] = param.value;\n    });\n\n  const params: { [key: string]: string } = {},\n    paramsKeys = parameters ? Object.keys(parameters) : [];\n\n  parameters &&\n    paramsKeys.forEach((key: string) => (params[key] = parameters[key]));\n\n  const fixedFacetParams: { [key: string]: string } = {};\n  fixedFacets &&\n    fixedFacets.forEach((facet) => {\n      fixedFacetParams[`meta_${facet.meta}_and`] = facet.value;\n    });\n\n  const facetParams: { [key: string]: string } = {},\n    facetKeys = Object.keys(facets);\n\n  facetKeys.forEach(\n    (key: string) => (facetParams[`meta_${key}_and`] = facets[key]),\n  );\n\n  const CancelToken = axios.CancelToken,\n    call = CancelToken.source(),\n    config = {\n      baseURL: baseUrlWithSite,\n      cancelToken: call.token,\n      httpsAgent: new https.Agent({ keepAlive: true }),\n      url: dxp ? dxpFindRootUrl : findRootUrl,\n      timeout: timeout,\n      params: {\n        ...fixedParams,\n        ...fixedFacetParams,\n        ...facetParams,\n        ...params,\n        collection: collection,\n        num_ranks: numRank,\n        query: query,\n        sort: sortType || \"\",\n        start_rank: startRank,\n      },\n    };\n\n  return [axiosRequest(config), call];\n}\n\n/**\n * Funnelback suggestion query.\n *\n * @param {string} collection The Funnelback collection to query.\n * @param {string} partialQuery The string to make suggestions for.\n * @return {Promise} - A promise of an array of suggestion strings.\n */\nexport function suggest(\n  collection: string,\n  partialQuery: string,\n  dxp: boolean,\n  site: string | undefined = undefined,\n) {\n  const baseUrlWithSite = site ? getSiteUrl(site) : baseUrl;\n  const CancelToken = axios.CancelToken,\n    call = CancelToken.source(),\n    config = {\n      baseURL: baseUrlWithSite,\n      cancelToken: call.token,\n      url: dxp ? dxpSuggestRootUrl : suggestRootUrl,\n      timeout: timeout,\n      params: {\n        collection: collection,\n        partial_query: partialQuery,\n        show: maximumSuggestions,\n      },\n    };\n\n  return [axiosRequest(config), call];\n}\n\n/**\n * Finder configuration.\n *\n * @param {string} url The Finder configuration file.\n * @return {Promise} - A promise of  configuration object.\n */\nexport function finderConfig(url: string) {\n  const config = {\n    timeout: timeout,\n    url: url,\n  };\n\n  return axiosRequest(config);\n}\n","/**\n * custom hook to check if react has mounted\n *\n *\n * @module patterns/finder/finder\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport { useState, useEffect } from \"react\";\n\nfunction useHasMounted() {\n  const [hasMounted, setHasMounted] = useState(false);\n\n  useEffect(() => {\n    setHasMounted(true);\n  }, []);\n\n  return hasMounted;\n}\n\nexport default useHasMounted;\n","import { flattenObj } from \"../../shared/util\";\nimport type { FacetDetails } from \"../types/facet\";\nimport type { QueryDetails } from \"../types/query\";\n\nfunction remove(obj: Record<string, any>, key: string): void {\n  for (let k in obj) {\n    if (k === key) {\n      delete obj[k];\n    } else if (typeof obj[k] === \"object\" && obj[k] !== null) {\n      remove(obj[k], key);\n    }\n  }\n}\n\nexport function hyperLink(\n  query: QueryDetails,\n  facet: FacetDetails | null,\n  pageNumber?: number,\n  numberRank?: number,\n) {\n  const newStartRank =\n    pageNumber && numberRank && 1 + (pageNumber - 1) * numberRank;\n  let newQuery = JSON.parse(JSON.stringify(query)); //deep clone\n\n  facet && facet.type === \"tag\" && facet.meta && remove(newQuery, facet.meta);\n\n  const flattenQuery = flattenObj(newQuery);\n\n  return (\n    \"?\" +\n    Object.entries(flattenQuery)\n      .filter((key) => {\n        let param = Object.values(key);\n\n        if (param[1] === \"\") {\n          return false;\n        } else {\n          switch (param[0]) {\n            case \"interacted\":\n              return false;\n            case \"num_rank\":\n              return false;\n            case \"start_rank\":\n              return false;\n            default:\n              return true;\n          }\n        }\n      })\n      .map((key) => {\n        let param = Object.values(key);\n\n        if (/fixedParameters/.test(param[0])) {\n          return (\n            encodeURIComponent(param[0].substring(16)) +\n            \"=\" +\n            encodeURIComponent(param[1])\n          );\n        } else if (/fixedFacets/.test(param[0])) {\n          return (\n            encodeURIComponent(`meta_${param[0].substring(12)}_and`) +\n            \"=\" +\n            encodeURIComponent(param[1])\n          );\n        } else if (/parameters/.test(param[0])) {\n          return (\n            encodeURIComponent(param[0].substring(11)) +\n            \"=\" +\n            encodeURIComponent(param[1])\n          );\n        }\n        switch (param[0]) {\n          case \"collection\":\n            return (\n              encodeURIComponent(param[0]) + \"=\" + encodeURIComponent(param[1])\n            );\n          case \"query\":\n            return (\n              encodeURIComponent(param[0]) + \"=\" + encodeURIComponent(param[1])\n            );\n          case \"sortType\":\n            return (\n              encodeURIComponent(\"sort\") + \"=\" + encodeURIComponent(param[1])\n            );\n          case \"startRank\":\n            return (\n              encodeURIComponent(\"start_rank\") +\n              \"=\" +\n              encodeURIComponent(facet ? param[1] : newStartRank)\n            );\n          case \"numRanks\":\n            return (\n              encodeURIComponent(\"num_rank\") +\n              \"=\" +\n              encodeURIComponent(param[1])\n            );\n          default:\n            return (\n              encodeURIComponent(`meta_${param[0]}_and`) +\n              \"=\" +\n              encodeURIComponent(param[1])\n            );\n        }\n      })\n      .join(\"&\")\n  );\n}\n","import { useState, useEffect, useRef } from \"react\";\nimport useHasMounted from \"./has-mounted\";\nimport replaceHistory from \"./replace-history\";\nimport { getNonFBParams, getFacetParams } from \"./url-params\";\nimport { reduceMotion } from \"../util\";\nimport { find } from \"./funnelback\";\nimport scroll from \"zenscroll\";\n\nimport type { MatrixConfigJSON } from \"../types/configJSON\";\nimport type { Response } from \"../types/FBresponse\";\nimport type { QueryDetails } from \"../types/query\";\n\ntype Cancelable = { cancel: () => void };\n\nfunction useLogicWrapper(\n  config: MatrixConfigJSON,\n  results: Response,\n  matrixQuery: { [key: string]: string },\n  element: HTMLElement | null,\n) {\n  const summaryHeadingRef = useRef<HTMLDivElement | null>(null);\n  const hasMounted = useHasMounted();\n  const screenOffsetRatio = 10;\n\n  const scrollDuration =\n    typeof window !== \"undefined\" && !reduceMotion() ? 1000 : 0;\n\n  const initialResults = results || {};\n  const nonFBParams =\n    config.facetLabels && config.facetLabels.filter((p) => p.nonFBParam);\n  const initializeParams =\n    config.facetLabels && config.facetLabels.length > 0\n      ? getFacetParams(config.facetLabels, matrixQuery)\n      : {};\n\n  /**\n   * initial state for the Funnelback query, taken from URL parameters and\n   * configuration\n   **/\n  const initialQuery = {\n    collection: config.collection,\n    facets: initializeParams,\n    parameters:\n      matrixQuery && matrixQuery.parameters && matrixQuery.parameters.length > 0\n        ? matrixQuery.parameters\n        : {},\n    fixedFacets: config.fixedFacets,\n    fixedParameters: config.fixParameters ? config.fixParameters : [],\n    interacted: false,\n    misspelling: null as string | null,\n    numRanks: config.numRanks,\n    query: matrixQuery && matrixQuery.query ? matrixQuery.query : \"\",\n    sortType: config.sort[0].type,\n    startRank: 1,\n  };\n\n  const [defaultParams, setDefaultParams] = useState(Object.keys(matrixQuery).length ? matrixQuery : null);\n  const [query, setQuery] = useState<QueryDetails>(initialQuery); // will set once defaultParams is ready\n  const [funnelbackResponse, setResponse] = useState<Readonly<Response>>(\n    Object.keys(initialResults).length > 0\n      ? Object.freeze(results)\n      : Object.freeze({\n          bestBets: [],\n          extraSearches: {},\n          facets: [],\n          results: [],\n          spell: null,\n          summary: {\n            currEnd: 0,\n            currStart: 0,\n            numRanks: 0,\n            totalMatching: 0,\n          },\n        }),\n  );\n\n  const [updating, setUpdating] = useState(\n    Object.keys(initialResults).length === 0,\n  );\n  const [call, setCall] = useState<Cancelable>({ cancel: () => {} });\n  const [update, setUpdate] = useState(false);\n\n  // Step 1: Initialize defaultParams after mount\n  useEffect(() => {\n    if (!defaultParams && typeof window !== \"undefined\") {\n      const searchParams = new URLSearchParams(window.location.search);\n      const obj: { [key: string]: string } = {};\n      searchParams.forEach((value, key) => {\n        obj[key] = value;\n      });\n      setDefaultParams(obj);\n      \n    }\n  }, [defaultParams]);\n\n  // Step 2: Build initial query once defaultParams is ready\n  useEffect(() => {\n    if (!defaultParams) return;\n   \n    const matrixState = !hasMounted && matrixQuery ? true : false;\n    console.log('step 2 defaultParams', defaultParams)\n    const baseQuery = {\n      collection: config.collection,\n      facets:\n        config.facetLabels && config.facetLabels.length > 0\n          ? getFacetParams(config.facetLabels, defaultParams)\n          : {},\n      parameters:\n        config.facetLabels && nonFBParams && nonFBParams.length > 0\n          ? getNonFBParams(config.facetLabels, defaultParams)\n          : {},\n      fixedFacets: config.fixedFacets,\n      fixedParameters: config.fixParameters || [],\n      interacted: false,\n      misspelling: null as string | null,\n      numRanks: config.numRanks,\n      query:\n        !matrixState && defaultParams[\"query\"]\n          ? defaultParams[\"query\"]\n          : defaultParams.query || \"\",\n      sortType:\n        !matrixState && defaultParams[\"query\"]\n          ? \"\"\n          : !matrixState && defaultParams[\"sort\"]\n            ? defaultParams[\"sort\"]\n            : config.sort[0].type,\n      startRank:\n        !matrixState && defaultParams[\"start_rank\"]\n          ? parseInt(defaultParams[\"start_rank\"], 10)\n          : typeof defaultParams.start_rank === \"string\"\n            ? parseInt(defaultParams.start_rank, 10)\n            : 1,\n    };\n    setQuery(baseQuery);\n  }, [defaultParams, hasMounted]);\n\n  // Step 3: Patch query after mount\n  useEffect(() => {\n    if (hasMounted && defaultParams && defaultParams[\"num_ranks\"]) {\n      setQuery((prev) => ({\n        ...prev,\n        numRanks: parseInt(defaultParams[\"num_ranks\"], 10) || prev.numRanks,\n      }));\n    }\n  }, [hasMounted, defaultParams]);\n\n  // Step 4: Update response when `update` flips\n  useEffect(() => {\n    if (!query) return;\n\n    replaceHistory(\n      query.query,\n      query.startRank,\n      query.facets,\n      query.parameters || {},\n      query.sortType,\n      config.facetLabels || [],\n      config.sort[0].type,\n      hasMounted,\n    );\n\n    setUpdating(true);\n\n    if (query.interacted && element) {\n      const resultsEl = element.querySelector(\".finder__results\");\n      if (resultsEl instanceof HTMLElement) {\n        scroll.center(\n          resultsEl,\n          scrollDuration,\n          -window.innerHeight / screenOffsetRatio,\n        );\n      }\n    }\n\n    call.cancel();\n\n    const [request, requestToken] = find(\n      query.collection,\n      query.fixedFacets,\n      query.fixedParameters,\n      query.query,\n      query.sortType,\n      query.startRank,\n      query.numRanks,\n      query.facets,\n      query.parameters,\n      config.dxp || false,\n      config.site || undefined,\n    );\n\n    setCall({ cancel: () => requestToken.cancel() });\n\n    request\n      .then((data) => {\n        setResponse(data as Readonly<Response>); //  Freeze before setting\n        setUpdating(false);\n      })\n      .then(() => {\n        if (query.interacted && summaryHeadingRef.current) {\n          summaryHeadingRef.current.scrollIntoView({\n            behavior: \"smooth\",\n            block: \"nearest\",\n            inline: \"center\",\n          });\n        }\n      })\n      .catch(() => {\n        setResponse(initialResults as Readonly<Response>);\n        setUpdating(false);\n      });\n  }, [update, query]);\n\n  const updater = {\n    query: (newQuery: QueryDetails) => setQuery(newQuery),\n    results: (newUpdate: boolean) => setUpdate(newUpdate),\n    updateState: update,\n  };\n\n  const clear = (resetSort?: boolean) => {\n    const newQuery = {\n      ...query,\n      sortType: resetSort ? config.sort[0].type : query.sortType,\n      facets: {},\n      parameters: {},\n      startRank: 1,\n      misspelling: null as string | null,\n      interacted: true,\n    };\n    call.cancel();\n    setQuery(newQuery);\n    setUpdate(!update);\n  };\n\n  return {\n    query,\n    funnelbackResponse,\n    updating,\n    updater,\n    clear,\n    hasMounted,\n    matrixState: !hasMounted && matrixQuery ? true : false,\n    summaryHeadingRef,\n  };\n}\n\nexport default useLogicWrapper;\n","import { replaceAndDeleteKeys, isURLSearchParams } from \"./url-params\";\nimport type { FacetDetails } from \"../types/facet\";\n\n/**\n * Preserve the search state in the URL parameters.\n *\n * @param {string} currQuery The search query.\n * @param {integer} currStartRank The start rank.\n * @param {object[]} currFacets A map of facet meta labels to their values.\n * @param {*} facetLabels Array of facet definitions.\n */\nexport default function replaceHistory(\n  currQuery: string,\n  currStartRank: number,\n  currFacets: { [key: string]: string },\n  currParameters: { [key: string]: string },\n  currSort: string,\n  facetLabels: FacetDetails[],\n  defaultSort: string,\n  hasMounted: boolean,\n) {\n  if (hasMounted) {\n    const searchURLParams = new URLSearchParams(window.location.search);\n    const params = replaceAndDeleteKeys(searchURLParams, \"_sand\", \"_and\");\n\n    if (isURLSearchParams(params)) {\n      currQuery !== \"\"\n        ? params.set(\"query\", currQuery)\n        : params.delete(\"query\");\n\n      currStartRank && currStartRank !== 1\n        ? params.set(\"start_rank\", currStartRank.toString())\n        : params.delete(\"start_rank\");\n\n      currSort !== defaultSort && currSort !== \"\"\n        ? params.set(\"sort\", currSort)\n        : params.delete(\"sort\");\n\n      facetLabels.forEach((facet) => {\n        if (currFacets[facet.meta]) {\n          params.set(`meta_${facet.meta}_and`, currFacets[facet.meta]);\n        } else {\n          params.delete(`meta_${facet.meta}_and`);\n        }\n      });\n\n      facetLabels.forEach((facet) => {\n        if (currParameters[facet.meta]) {\n          params.set(facet.meta, currParameters[facet.meta]);\n        } else {\n          params.delete(facet.meta);\n        }\n      });\n\n      const hasParams = params.toString().length ? \"?\" : \"\";\n\n      window.history.replaceState(\n        {},\n        \"\",\n        `${window.location.pathname}${hasParams}${params.toString()}`,\n      );\n    }\n  }\n}\n","import type { FacetDetails } from \"../types/facet\";\n\n/**\n * Search and replace substring in Key on URLSearchParams\n * remove when urls have been replace on Matrix\n *\n * @param {object} params URLSearchParams object for the current page.\n * @param {string} target substring to replace\n * @param {replacement} replacement substring to replace\n * @return {object} - URLSearchParams object of new replace keys.\n */\n\nexport function replaceAndDeleteKeys(\n  params: URLSearchParams | { [key: string]: string },\n  target: string,\n  replacement: string,\n) {\n  let entries: [string, string][];\n  if (params instanceof URLSearchParams) {\n    entries = Array.from(params.entries());\n  } else {\n    entries = Object.entries(params);\n  }\n\n  for (const [key, value] of entries) {\n    if (key.includes(target)) {\n      const newKey = key.replace(target, replacement);\n      if (params instanceof URLSearchParams) {\n        params.set(newKey, value); // Add new key\n        params.delete(key); // Delete old key\n      } else {\n        params[newKey] = value;\n        delete params[key];\n      }\n    }\n  }\n\n  return params;\n}\n\n/**\n * Retrieve non FB parameters from the URL parameters\n *\n * @param {object[]} facets Array of facet definitions.\n * @param {object} params URLSearchParams object for the current page.\n * @return {object} - Map of facet meta labels to their current value from the URL.\n */\nexport function isURLSearchParams(obj: {[key: string]: string} | URLSearchParams): obj is URLSearchParams {\n  return typeof obj?.get === \"function\";\n}\n\nexport function getNonFBParams(\n  facets: FacetDetails[],\n  params: URLSearchParams | { [key: string]: string }\n) {\n  const updatedParams = params && replaceAndDeleteKeys(params, \"_sand\", \"_and\");\n\n  if (isURLSearchParams(updatedParams)) {\n    return facets\n      .filter((facet) => facet.nonFBParam)\n      .map((facet) => {\n        const param: { [key: string]: string } = {};\n        const value = updatedParams.get(facet.meta);\n        if (value) {\n          param[facet.meta] = value;\n        }\n        return param;\n      })\n      .reduce((facetParams, facet) => Object.assign(facetParams, facet), {});\n  } else {\n    return facets\n      .map((facet) => {\n        const param: { [key: string]: string } = {};\n        if ((params as {[key: string]: string})[facet.meta]) {\n          param[facet.meta] = (params as {[key: string]: string})[facet.meta];\n        }\n        return param;\n      })\n      .reduce((facetParams, facet) => Object.assign(facetParams, facet), {});\n  }\n}\n\nexport function getFacetParams(\n  facets: FacetDetails[],\n  params: URLSearchParams | { [key: string]: string }\n) {\n  const updatedParams = params && replaceAndDeleteKeys(params, \"_sand\", \"_and\");\n\n  if (isURLSearchParams(updatedParams)) {\n    const reducedParams = facets\n      .map((facet) => {\n        const param: { [key: string]: string } = {};\n        const value = updatedParams.get(`meta_${facet.meta}_and`);\n        if (value) {\n          param[facet.meta] = value;\n        }\n        return param;\n      })\n      .reduce((facetParams, facet) => Object.assign(facetParams, facet), {});\n    return reducedParams;\n  } else {\n    const typedParams = updatedParams as { [key: string]: string };\n    const reducedParams = facets\n      .map((facet) => {\n        const param: { [key: string]: string } = {};\n        const key = `meta_${facet.meta}_and`;\n        if (typedParams[key]) {\n          param[facet.meta] = typedParams[key];\n        }\n        return param;\n      })\n      .reduce((facetParams, facet) => Object.assign(facetParams, facet), {});\n    return reducedParams;\n  }\n}\n","/**\n * Useful utility functions\n * @module util\n * @author ...\n */\n\nimport axios, { AxiosRequestConfig } from \"axios\";\nimport React from \"react\";\n\nexport function toBool(s: string): boolean {\n  return s === \"true\";\n}\n\nconst partialMatchFn = (m: string) => (s: string) => s.indexOf(m) < 0;\nconst fullMatchFn = (m: string) => (s: string) => s !== m;\n\nexport function removeClass(\n  elem: HTMLElement,\n  className: string,\n  removePartials = false,\n): void {\n  const matchFn = removePartials\n    ? partialMatchFn(className)\n    : fullMatchFn(className);\n  elem.className = elem.className\n    .split(/\\s+/)\n    .filter((s) => matchFn(s))\n    .join(\" \");\n}\n\nexport function reduceMotion(): boolean {\n  const reducedMotionQuery =\n    typeof window !== \"undefined\"\n      ? window.matchMedia(\"(prefers-reduced-motion: reduce)\")\n      : null;\n  return reducedMotionQuery && reducedMotionQuery.matches ? true : false;\n}\n\nexport function isVisible(elem: HTMLElement): boolean {\n  return elem.offsetHeight !== 0 && elem.offsetWidth !== 0;\n}\n\nexport function verticallyInWindow(elem: HTMLElement): boolean {\n  const rect = elem.getBoundingClientRect();\n  return rect.top >= 0 && rect.top <= window.innerHeight;\n}\n\nexport function parametersToObject(\n  parameterString: string,\n): Record<string, string> {\n  const parameters: Record<string, string> = {};\n  parameterString\n    .substring(1)\n    .split(\"&\")\n    .forEach((parameter) => {\n      const [k, v] = parameter.split(\"=\");\n      parameters[k] = v;\n    });\n  return parameters;\n}\n\nexport function objectToParameters(\n  parameterObj: Record<string, string>,\n): string {\n  const keys = Object.keys(parameterObj);\n  if (keys.length > 0) {\n    return (\n      \"?\" +\n      keys\n        .map((key) => `${key}=${encodeURIComponent(parameterObj[key])}`)\n        .join(\"&\")\n    );\n  }\n  return \"\";\n}\n\ndeclare global {\n  interface Window {\n    dataLayer?: any[];\n  }\n}\n\nexport function gaEvent(\n  event: string,\n  eventCategory: string,\n  eventAction: string,\n  eventLabel?: string,\n  eventValue?: number,\n  nonInteractionHit?: boolean,\n): void {\n  window.dataLayer = window.dataLayer || [];\n  window.dataLayer.push({\n    event,\n    eventCategory,\n    eventAction,\n    eventLabel,\n    eventValue,\n    nonInteractionHit,\n  });\n}\n\nexport function appendAll(elem: HTMLElement, children: HTMLElement[]): void {\n  children.forEach((child) => elem.appendChild(child));\n}\n\nexport function numberFromString(string: string): string {\n  return string.replace(/\\D/g, \"\");\n}\n\nexport function isMobile(screen = 432): boolean {\n  return window.innerWidth < screen;\n}\n\nexport function toArray(\n  obj: HTMLCollection | NodeListOf<HTMLElement>,\n): HTMLElement[] {\n  return Array.from(obj) as HTMLElement[];\n}\n\nexport function detectIE(): number | false {\n  const ua = window.navigator.userAgent;\n\n  const msie = ua.indexOf(\"MSIE \");\n  if (msie > 0) {\n    return parseInt(ua.substring(msie + 5, ua.indexOf(\".\", msie)), 10);\n  }\n\n  const trident = ua.indexOf(\"Trident/\");\n  if (trident > 0) {\n    const rv = ua.indexOf(\"rv:\");\n    return parseInt(ua.substring(rv + 3, ua.indexOf(\".\", rv)), 10);\n  }\n\n  const edge = ua.indexOf(\"Edge/\");\n  if (edge > 0) {\n    return parseInt(ua.substring(edge + 5, ua.indexOf(\".\", edge)), 10);\n  }\n\n  return false;\n}\n\nexport function checkIntersectionObserver(): boolean {\n  return (\n    \"IntersectionObserver\" in window &&\n    \"IntersectionObserverEntry\" in window &&\n    \"intersectionRatio\" in window.IntersectionObserverEntry.prototype\n  );\n}\n\ninterface Attribute {\n  label: string;\n  val: string;\n}\n\nexport function createHTMLElement(\n  type: string,\n  attributes: Attribute[],\n): HTMLElement {\n  const el = document.createElement(type);\n  attributes.forEach((att) => {\n    if (att.label === \"content\") {\n      el.appendChild(document.createTextNode(att.val));\n    } else if (att.label === \"html\") {\n      el.innerHTML = att.val;\n    } else {\n      el.setAttribute(att.label, att.val);\n    }\n  });\n  return el;\n}\n\nexport function uppercaseFirstLetterLowercaseRest(s: string): string {\n  return s.charAt(0).toUpperCase() + s.slice(1).toLowerCase();\n}\n\nexport function axiosRequest(config: AxiosRequestConfig): Promise<any> {\n  return axios(config)\n    .then((response) => {\n      if (response.status === 200) return response.data;\n      throw new Error(`Bad response: ${response.status}`);\n    })\n    .catch((e: any) => {\n      if (!axios.isCancel(e)) {\n        gaEvent(\n          \"jsError\",\n          \"JavaScript error\",\n          `Line ${e.lineNumber}  ${e.message}`,\n          `axiosRequest ${e.fileName} (${window.location})`,\n          0,\n          true,\n        );\n      }\n    });\n}\n\nexport function formatTime(timeString: string, timeZone?: boolean) {\n  const timeDate = new Date(timeString);\n  let timeLabel = \"\";\n\n  if (timeZone) {\n    const timeOffset = timeDate.getTimezoneOffset() / -60;\n    timeLabel = timeOffset === 0 ? \"(GMT)\" : \"(BST)\";\n  }\n\n  const hours = timeDate.getHours().toString().padStart(2, \"0\");\n  const minutes = timeDate.getMinutes().toString().padStart(2, \"0\");\n\n  return (\n    <time dateTime={`${hours}:${minutes}`}>\n      {hours}:{minutes} {timeLabel}\n    </time>\n  );\n}\n\nfunction daySuffix(day: number): string {\n  const lastDigit = day % 10;\n  const lastTwoDigits = day % 100;\n  if (lastTwoDigits >= 11 && lastTwoDigits <= 13) return \"th\";\n  switch (lastDigit) {\n    case 1:\n      return \"st\";\n    case 2:\n      return \"nd\";\n    case 3:\n      return \"rd\";\n    default:\n      return \"th\";\n  }\n}\n\nexport function formatReactDate(date: Date): React.ReactElement {\n  const months = [\n    \"January\",\n    \"February\",\n    \"March\",\n    \"April\",\n    \"May\",\n    \"June\",\n    \"July\",\n    \"August\",\n    \"September\",\n    \"October\",\n    \"November\",\n    \"December\",\n  ];\n  const days = [\n    \"Sunday\",\n    \"Monday\",\n    \"Tuesday\",\n    \"Wednesday\",\n    \"Thursday\",\n    \"Friday\",\n    \"Saturday\",\n  ];\n\n  return (\n    <time dateTime={date.toISOString().split(\"T\")[0]}>\n      {days[date.getUTCDay()]}, {date.getUTCDate()}\n      <sup>{daySuffix(date.getUTCDate())}</sup> {months[date.getUTCMonth()]}{\" \"}\n      {date.getUTCFullYear()}\n    </time>\n  );\n}\n\nexport function arraySlicer<T>(arr: T[], len: number): T[][] {\n  const newArray: T[][] = [];\n  for (let i = 0; i < arr.length; i += len) {\n    newArray.push(arr.slice(i, i + len));\n  }\n  return newArray;\n}\n\nexport function flattenObj(ob: Record<string, any>): Record<string, any> {\n  // The object which contains the\n  // final result\n  let result: { [key: string]: string } = {};\n\n  // loop through the object \"ob\"\n  for (const i in ob) {\n    // We check the type of the i using\n    // typeof() function and recursively\n    // call the function again\n    if (typeof ob[i] === \"object\" && !Array.isArray(ob[i])) {\n      const temp = flattenObj(ob[i]);\n      for (const j in temp) {\n        if (i === \"parameters\") {\n          result[`${i}-${j}`] = temp[j];\n        } else {\n          result[j] = temp[j];\n        }\n        // Store temp in result\n      }\n    } else if (Array.isArray(ob[i])) {\n      ob[i].forEach((val) => {\n        if (i === \"fixedFacets\") {\n          result[`${i}-${val.meta}`] = val.value;\n        } else {\n          result[`${i}-${val.name}`] = val.value;\n        }\n      });\n    }\n    // Else store ob[i] in result directly\n    else {\n      result[i] = ob[i];\n    }\n  }\n  return result;\n}\n\nexport function getVerticalScrollbarWidth(): number {\n  const scrollDiv = document.createElement(\"div\");\n  scrollDiv.style.cssText =\n    \"width: 100px; height: 100px; overflow: scroll; position: absolute; top: -9999px;\";\n  document.body.appendChild(scrollDiv);\n  const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n  document.body.removeChild(scrollDiv);\n  document.documentElement.style.setProperty(\n    \"--scrollbar-width\",\n    `${scrollbarWidth}px`,\n  );\n  return scrollbarWidth;\n}\n\nexport function enableBodyScroll(): void {\n  document.documentElement.classList.remove(\"no-scroll\");\n  const btn = document.querySelector(\".back-to-top\");\n  if (btn) btn.removeAttribute(\"hidden\");\n}\n\nexport function disableBodyScroll(): void {\n  getVerticalScrollbarWidth();\n  const btn = document.querySelector(\".back-to-top\");\n  if (btn) btn.setAttribute(\"hidden\", \"true\");\n  document.documentElement.classList.add(\"no-scroll\");\n}\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"finder\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkreact_matrix_rendering\"] = self[\"webpackChunkreact_matrix_rendering\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"core1\",\"vendor-dependencies1\",\"axios1\",\"react1\",\"vendor-direct1\"], () => (__webpack_require__(\"./src/browser/browser-files/finder.tsx\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["React","createRoot","Finder","finderConfig","document","addEventListener","test","navigator","userAgent","finders","querySelectorAll","Array","from","forEach","finder","dataset","config","then","root","render","createElement","element","PropTypes","uppercaseFirstLetterLowercaseRest","Finder__Results__Accommodation","props","mph","calculateTime","minutes","Math","floor","thumbnail","details","listMetadata","src","alt","className","level","join","split","features","Object","keys","filter","meta","key","value","includes","map","replace","sort","type","length","slice","price","deposit","transport","Fragment","parseInt","location","concat","trim","toLowerCase","distance","walk","href","liveUrl","title","propTypes","object","Finder__Results__BestBet","displayUrl","titleHtml","descriptionHtml","Accommodation","CaseStudy","Centre","Contact","Course","Event","Funding","Generic","Module","News","Profile","Research","Finder__Results__Card","query","string","Finder__Results__CaseStudy","subtitle","status","school","department","centre","c","Finder__Results__Centre","subject","related","Finder__Results__Contact","jobtitle","email","altemail","telephone","friendlytelephone","room","enquiry","enquiryurl","enquirylabel","formatLabel","externalSiteUrl","Finder__Results__Course","award","qualification","duration","method","facets","indexOf","Set","String","e","i","stGeorgesLabel","clearing","external","some","s","indexUrl","courseCode","code","entryYears","entryyears","description","formatTime","formatReactDate","formatShortDate","dateString","months","date","Date","month","getUTCMonth","getUTCDate","compareDates","startDate","endDate","showTime","sDate","eDate","noTimeSDate","setUTCHours","noTimeEDate","time","getTime","Finder__Results__Event","shortDate","d","audience","str","capitalized","toUpperCase","eventStartDate","eventEndDate","eventLabel","displayTime","Finder__Results__Funding","hardship","programme","feestatus","Finder__Results__Generic","Finder__Results__Module","term","topic","specification","toBool","Finder__ToolTip","Finder__Results__News","thumbnailSourceName","thumbnailSourceUrl","thumbnailAuthorName","thumbnailAuthorUrl","thumbnailLicenceType","thumbnailLicenceUrl","displayToolTip","thumbnailToolTip","formattedDate","hashtags","hashtagtext","thumbnailTiny","thumbnailMax","thumbnailMobile","srcSet","media","Finder__Results__Profile","headshot","EDIAmbassadors","ediAmbassador","thumbnailExist","country","Finder__Results__Promo","_ref","heading","body","linkRef","linkText","Finder__Results__Research","researchCentre","academic","student","degree","relatedDegree","site","Finder__Checkbox","randomNumber","mobile","toggleChecked","facet","responseFacetValue","responseFacet","allValues","checkedValue","data","count","toggleFacet","newQuery","dependencies","startRank","misspelling","interacted","update","results","updateState","id","name","onChange","checked","onClick","htmlFor","arrayOf","bool","Finder__paramCheckbox","dateDayFormat","stringLength","stringOffset","random","toString","pastEventsResponseTotal","pastEventsResponse","resultPacket","resultsSummary","fullyMatching","pastEventsPartialResponseTotal","partiallyMatching","parameters","totalText","currentDate","currentYear","getUTCFullYear","currentDateMonth","currentDateDay","currentDateString","_objectSpread","lt_eventDate","events","ge_eventDate","sortType","matrixState","funnelbackName","Finder__Select","currentValue","allFacets","values","reduce","acc","_toConsumableArray","responseFacets","hiddenFacets","setFacet","target","noSelection","responseFacetDetails","label","SelectFilter","EventSelectFilter","CheckboxFilter","ParamCheckBox","EventCheckBox","HiddenInput","TagFilter","Reset","Sort","gaEvent","dependencyMet","facetMap","setFacets","dependency","Finder__Filters","totalMatching","response","summary","clearFiltersDesktop","updating","clear","resetSort","clearFiltersMobile","displaySort","submitSSR","summariseAs","plural","hasMounted","fixedParameters","param","facetLabels","extraSearches","past","funnelbackFacet","candidate","func","useState","useEffect","useRef","Filters","createFocusTrap","enableBodyScroll","disableBodyScroll","Finder__FiltersMobile","_useState","_useState2","_slicedToArray","display","setDisplay","_useState3","_useState4","focusTrap","setFocusTrap","filtersRef","filtersEl","current","trap","initialFocus","querySelector","onDeactivate","clickOutsideDeactivates","active","activate","deactivate","result","singular","totalMatchingMessage","filtersCount","toggle","ref","disabled","Finder__hiddenInput","_props$query$paramete","undefined","_props$facet$checkedV","Finder__Reset","resetClassName","Finder__Sort","setSort","validSorts","hyperLink","useHasMounted","Finder__Tag","deleteFacet","labelText","ssrHiddenField","Finder__Clear","clearIconCLassName","suggest","Clear","maximumSuggestions","escapeKey","endKey","homeKey","arrowUp","arrowDown","highlightQueryTerm","suggestion","partialQuery","Finder__Query","searchIconClassName","setPartialQuery","suggestions","setSuggestions","_useState5","_useState6","call","setCall","_useState7","collection","_useState8","inputId","_useState9","_useState10","showSuggestions","setShowSuggestions","_useState11","_useState12","activeSuggestionID","setActiveSuggestionID","textInput","cancel","focusInput","focus","clearQuery","submitForm","submitSuggestion","suggestionsList","role","onBlur","onFocus","onMouseDown","onKeyDown","_e$currentTarget$clos","_e$currentTarget$pare","_e$currentTarget$pare2","currentTarget","closest","preventDefault","parentElement","previousElementSibling","nextElementSibling","_e$currentTarget$clos2","first","firstChild","Element","_first$querySelector","_e$currentTarget$clos3","last","lastChild","_last$querySelector","placeholder","defaultValue","autoComplete","input","_e$currentTarget$pare3","_e$currentTarget$pare4","button","val","dxp","_ref2","promise","newCall","DOMPurify","Finder__Announcement","clean","sanitize","announcement","ALLOWED_TAGS","dangerouslySetInnerHTML","__html","Finder__DidYouMean","_props$response$spell","_props$response$spell2","spell","text","didyoumean","Finder__Pagination","numberOfPages","numRanks","ceil","currentPage","currStart","pages","changePage","pageNumber","newStartRank","push","_loop","page","abs","number","BestBet","Card","DidYouMean","Pagination","PromoCard","Summary","Announcement","Finder__Results","promoCardConditionMet","matchedPromoGroup","matchedPromoGroupDetails","promo","promoConditions","promoDetails","filterFacets","searchFacets","queryFacetsAll","promoCardConditionGroup","queryFacetsArray","queries","_i","_queries","item","_iterator","_createForOfIteratorHelper","_step","q","el","searchQuery1","n","done","err","f","promoGroup","resultsClass","resultsVariant","currEnd","summaryHeadingRef","didYouMean","pagination","promoCard","secondItemOnwards","bestBets","firstItemData","secondItemOnwardsData","start","docNum","card","resultsContent","array","pastEventsQuery","pastEventsUpdate","Finder__Results__Summary","formatter","Intl","NumberFormat","format","parts","part","toggleLabel","setShow","show","labelAuthor","labelSource","labelLicense","oneOfType","thumbnailLicenseType","thumbnailLicenseUrl","Query","Results","useLogicWrapper","_props$initialResults","intialResults","freeze","_useLogicWrapper","initialResults","initialQuery","funnelbackResponse","updater","finderMain","resultCard","QueryInput","topSectionQueryInput","queryInputConfig","showQueryInTopSection","onSubmit","isRequired","axios","https","axiosRequest","baseUrl","dxpBaseUrl","findRootUrl","dxpFindRootUrl","dxpSuggestRootUrl","suggestRootUrl","timeout","getSiteUrl","find","fixedFacets","numRank","arguments","baseUrlWithSite","fixedParams","params","paramsKeys","fixedFacetParams","facetParams","facetKeys","CancelToken","source","baseURL","cancelToken","token","httpsAgent","Agent","keepAlive","url","num_ranks","start_rank","partial_query","setHasMounted","flattenObj","remove","obj","k","_typeof","numberRank","JSON","parse","stringify","flattenQuery","entries","encodeURIComponent","substring","replaceHistory","getNonFBParams","getFacetParams","reduceMotion","scroll","matrixQuery","screenOffsetRatio","scrollDuration","window","nonFBParams","p","nonFBParam","initializeParams","fixParameters","defaultParams","setDefaultParams","setQuery","setResponse","setUpdating","setUpdate","searchParams","URLSearchParams","search","console","log","baseQuery","prev","resultsEl","HTMLElement","center","innerHeight","_find","_find2","request","requestToken","scrollIntoView","behavior","block","inline","newUpdate","replaceAndDeleteKeys","isURLSearchParams","currQuery","currStartRank","currFacets","currParameters","currSort","defaultSort","searchURLParams","set","hasParams","history","replaceState","pathname","replacement","_step$value","newKey","get","updatedParams","assign","reducedParams","typedParams","partialMatchFn","m","fullMatchFn","removeClass","elem","removePartials","matchFn","reducedMotionQuery","matchMedia","matches","isVisible","offsetHeight","offsetWidth","verticallyInWindow","rect","getBoundingClientRect","top","parametersToObject","parameterString","parameter","_parameter$split","_parameter$split2","v","objectToParameters","parameterObj","event","eventCategory","eventAction","eventValue","nonInteractionHit","dataLayer","appendAll","children","child","appendChild","numberFromString","isMobile","screen","innerWidth","toArray","detectIE","ua","msie","trident","rv","edge","checkIntersectionObserver","IntersectionObserverEntry","prototype","createHTMLElement","attributes","att","createTextNode","innerHTML","setAttribute","charAt","Error","isCancel","lineNumber","message","fileName","timeString","timeZone","timeDate","timeLabel","timeOffset","getTimezoneOffset","hours","getHours","padStart","getMinutes","dateTime","daySuffix","day","lastDigit","lastTwoDigits","days","toISOString","getUTCDay","arraySlicer","arr","len","newArray","ob","isArray","temp","j","getVerticalScrollbarWidth","scrollDiv","style","cssText","scrollbarWidth","clientWidth","removeChild","documentElement","setProperty","classList","btn","removeAttribute","add"],"sourceRoot":""}