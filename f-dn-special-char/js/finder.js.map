{"version":3,"file":"finder.js","mappings":"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3C9G,MAAM,EAAE+mB,IAAI,CAAC1b,QAAQ,CAACrL,MAAM;IAC5BoM,aAAa,EAAE2a,IAAI,CAAC3a;EACtB,CAAC;AACH;AAEO,SAASjL,UAAUA,CAAA,EAAY;EAAA,IAAXkmB,IAAI,GAAAvG,SAAA,CAAA/kB,MAAA,QAAA+kB,SAAA,QAAA9W,SAAA,GAAA8W,SAAA,MAAG,EAAE;EAClC,IAAMwG,GAAG,GAAGvuB,QAAQ,CAACgB,aAAa,CAAC,UAAU,CAAC;EAC9CutB,GAAG,CAACvD,SAAS,GAAGsD,IAAI;EACpB,OAAOC,GAAG,CAAC7rB,KAAK;AAClB;;;;;;;;;;ACvWA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;;;;WC5BA;WACA;WACA;WACA;WACA,+BAA+B,wCAAwC;WACvE;WACA;WACA;WACA;WACA,iBAAiB,qBAAqB;WACtC;WACA;WACA,kBAAkB,qBAAqB;WACvC;WACA;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC3BA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;WACA;WACA;WACA;WACA;;;;;WCJA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;;;;;UEhDA;UACA;UACA;UACA;UACA","sources":["webpack://react-matrix-rendering/./src/browser/browser-files/finder.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__accommodation.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__bestbet.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__card.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__casestudy.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__centre.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__contact.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__course.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__event.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__funding.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__generic.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__module.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__news.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__profile.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__research.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__checkbox.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__eventCheckbox.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__eventSelect.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__filters.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__filtersmobile.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__hiddenInput.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__paramCheckbox.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__reset.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__select.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__sort.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__tag.tsx","webpack://react-matrix-rendering/./src/shared/components/query/finder__clear.tsx","webpack://react-matrix-rendering/./src/shared/components/query/finder__query.tsx","webpack://react-matrix-rendering/./src/shared/components/results/finder__announcement.tsx","webpack://react-matrix-rendering/./src/shared/components/results/finder__didyoumean.tsx","webpack://react-matrix-rendering/./src/shared/components/results/finder__pagination.tsx","webpack://react-matrix-rendering/./src/shared/components/results/finder__results.tsx","webpack://react-matrix-rendering/./src/shared/components/results/finder__results__summary.tsx","webpack://react-matrix-rendering/./src/shared/components/results/formatLabel.tsx","webpack://react-matrix-rendering/./src/shared/components/tools/finder__toolTip.tsx","webpack://react-matrix-rendering/./src/shared/forms/finder/finder.tsx","webpack://react-matrix-rendering/./src/shared/logic/funnelback.ts","webpack://react-matrix-rendering/./src/shared/logic/has-mounted.ts","webpack://react-matrix-rendering/./src/shared/logic/hyper-link.ts","webpack://react-matrix-rendering/./src/shared/logic/logic.ts","webpack://react-matrix-rendering/./src/shared/logic/replace-history.ts","webpack://react-matrix-rendering/./src/shared/logic/url-params.ts","webpack://react-matrix-rendering/./src/shared/util.tsx","webpack://react-matrix-rendering/ignored|/opt/azagent/_work/4/s/node_modules/stream-http/node_modules/readable-stream/lib/internal/streams|util","webpack://react-matrix-rendering/ignored|/opt/azagent/_work/4/s/node_modules/object-inspect|./util.inspect","webpack://react-matrix-rendering/ignored|/opt/azagent/_work/4/s/node_modules/stream-http/node_modules/readable-stream/lib|util","webpack://react-matrix-rendering/webpack/bootstrap","webpack://react-matrix-rendering/webpack/runtime/chunk loaded","webpack://react-matrix-rendering/webpack/runtime/compat get default export","webpack://react-matrix-rendering/webpack/runtime/define property getters","webpack://react-matrix-rendering/webpack/runtime/global","webpack://react-matrix-rendering/webpack/runtime/hasOwnProperty shorthand","webpack://react-matrix-rendering/webpack/runtime/make namespace object","webpack://react-matrix-rendering/webpack/runtime/node module decorator","webpack://react-matrix-rendering/webpack/runtime/jsonp chunk loading","webpack://react-matrix-rendering/webpack/before-startup","webpack://react-matrix-rendering/webpack/startup","webpack://react-matrix-rendering/webpack/after-startup"],"sourcesContent":["/**\n * Finder entry\n *\n * @author Web Development\n * @copyright City, University of London 2019\n */\nimport React from \"react\";\nimport { createRoot } from \"react-dom/client\";\nimport Finder from \"../../shared/forms/finder/finder\";\nimport { finderConfig } from \"../../shared/logic/funnelback\";\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  if (/(Trident|MSIE)/.test(navigator.userAgent)) {\n    return;\n  } else {\n    const finders = document.querySelectorAll<HTMLElement>(\".wrapper--finder\");\n    if (finders) {\n      Array.from(finders).forEach((finder) => {\n        if (finder.dataset.config) {\n          finderConfig(finder.dataset.config).then((config) => {\n            const root = createRoot(finder);\n\n            root.render(<Finder config={config} element={finder} />);\n          });\n        }\n      });\n    }\n  }\n});\n","/**\n * @module patterns/finder/components/cards/finder__results__accommodation\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { uppercaseFirstLetterLowercaseRest } from \"../../util\";\nimport type {\n  ResultsAccommodation,\n  ResultsAccommodationMetaDataList,\n} from \"../../types/cards/card\";\n\n/**\n * Render a Funnelback result as an accommodation card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\n\nfunction Finder__Results__Accommodation(props: ResultsAccommodation) {\n  const mph = 60,\n    calculateTime = (minutes: number): string | number =>\n      Math.floor(minutes / mph) > 0\n        ? Math.floor(minutes / mph) + \" hour \" + (minutes % mph)\n        : minutes,\n    thumbnail = props.details &&\n      props.details.listMetadata &&\n      props.details.listMetadata.thumbnail &&\n      props.details.listMetadata.thumbnail[0] && (\n        <img\n          src={props.details.listMetadata.thumbnail[0]}\n          alt=\"\"\n          className=\"card__thumbnail\"\n        />\n      ),\n    level = props.details &&\n      props.details.listMetadata &&\n      props.details.listMetadata.level && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-graduation-cap icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span className=\"sr-only\">Level:</span>{\" \"}\n          <span>\n            {uppercaseFirstLetterLowercaseRest(\n              props.details.listMetadata.level.join(\"|\"),\n            )\n              .split(\"|\")\n              .join(\" or \")}\n          </span>\n        </p>\n      ),\n    features = props.details.listMetadata\n      ? Object.keys(props.details.listMetadata)\n          .filter((meta) => {\n            const key = meta as keyof ResultsAccommodationMetaDataList;\n            const value = props.details.listMetadata![key];\n            return (\n              [\"accessible\", \"catered\", \"ensuite\"].includes(meta) &&\n              value &&\n              value[0] === \"Yes\"\n            );\n          })\n          .map((meta) => meta.replace(/ensuite/, \"en suite\"))\n          .sort()\n          .join(\", \")\n      : \"\",\n    type = props.details &&\n      props.details.listMetadata &&\n      props.details.listMetadata.type && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-building icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span className=\"sr-only\">Type:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.type.length > 2\n              ? uppercaseFirstLetterLowercaseRest(\n                  props.details.listMetadata.type.join(\"|\"),\n                )\n                  .split(\"|\")\n                  .slice(0, -1)\n                  .join(\", \") +\n                \" or \" +\n                uppercaseFirstLetterLowercaseRest(\n                  props.details.listMetadata.type.join(\"|\"),\n                )\n                  .split(\"|\")\n                  .slice(-1)\n              : uppercaseFirstLetterLowercaseRest(\n                  props.details.listMetadata.type.join(\"|\"),\n                )\n                  .split(\"|\")\n                  .join(\" or \")}\n            {features && \" (\" + features + \")\"}\n          </span>\n        </p>\n      ),\n    price = props.details.listMetadata && props.details.listMetadata.price && (\n      <p className=\"card__tag\">\n        <span className=\"fas fa-fw fa-pound-sign icon\" aria-hidden=\"true\" />{\" \"}\n        <span className=\"sr-only\">Price:</span>{\" \"}\n        <span>\n          {props.details.listMetadata.price[0]} (\n          {props.details.listMetadata.deposit &&\n            props.details.listMetadata.deposit[0]}{\" \"}\n          deposit)\n        </span>\n      </p>\n    ),\n    transport = props.details.listMetadata &&\n      props.details.listMetadata.transport && (\n        <React.Fragment>\n          {\" \"}\n          ({calculateTime(\n            parseInt(props.details.listMetadata.transport[0]),\n          )}{\" \"}\n          minutes by public transport)\n        </React.Fragment>\n      ),\n    location =\n      props.details.listMetadata &&\n      props.details.listMetadata.location &&\n      props.details.listMetadata.location[0] ? (\n        <React.Fragment>\n          <span className=\"sr-only\">Distance to</span>{\" \"}\n          <div\n            className={`card__details__location card__details__location-${props.details.listMetadata.location[0]\n              .trim()\n              .replace(\" \", \"-\")\n              .toLowerCase()}`}\n          >\n            <span\n              className=\"fas fa-fw fa-location-dot icon\"\n              aria-hidden=\"true\"\n            />{\" \"}\n            <span>{props.details.listMetadata.location[0]}</span>\n            <span className=\"sr-only\"> campus</span>\n          </div>\n        </React.Fragment>\n      ) : (\n        <span className=\"sr-only\">Distance to Northampton Square campus:</span>\n      ),\n    distance = props.details.listMetadata &&\n      props.details.listMetadata.walk && (\n        <p className=\"card__tag\">\n          <span className=\"fas fa-fw fa-walking icon\" aria-hidden=\"true\" />{\" \"}\n          {location}\n          <span>\n            {calculateTime(parseInt(props.details.listMetadata.walk[0]))}{\" \"}\n            minutes walk to campus\n            {transport}\n          </span>\n        </p>\n      );\n\n  return (\n    <li className=\"card card--accommodation\">\n      <a href={props.details.liveUrl} className=\"card__anchor card__details\">\n        {thumbnail}\n        <div className=\"card__details__text\">\n          <h3 className=\"card__heading\">{props.details.title}</h3>\n          {distance}\n          {type}\n          {price}\n          {level}\n        </div>\n      </a>\n    </li>\n  );\n}\n\nFinder__Results__Accommodation.propTypes = {\n  details: PropTypes.object,\n};\n\nexport default Finder__Results__Accommodation;\n","/**\n * @module patterns/finder/components/cards/finder__results__bestbet\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { BestBet } from \"../../types/FBresponse\";\n\ntype BestBetDetails = {\n  details: BestBet;\n};\n\n/**\n * Render a Funnelback best bet as a results card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__BestBet(props: BestBetDetails) {\n  return (\n    <li className=\"card card--bestbet\">\n      <a href={props.details.displayUrl} className=\"card__anchor card__details\">\n        <div className=\"card__details__text\">\n          <h3 className=\"card__heading\">{props.details.titleHtml}</h3>\n          <p className=\"card__description\">{props.details.descriptionHtml}</p>\n        </div>\n      </a>\n    </li>\n  );\n}\n\nFinder__Results__BestBet.propTypes = {\n  details: PropTypes.object,\n};\n\nexport default Finder__Results__BestBet;\n","/**\n * @module patterns/finder/components/cards/finder__results__card\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport Accommodation from \"./finder__results__accommodation\";\nimport CaseStudy from \"./finder__results__casestudy\";\nimport Centre from \"./finder__results__centre\";\nimport Contact from \"./finder__results__contact\";\nimport Course from \"./finder__results__course\";\nimport Event from \"./finder__results__event\";\nimport Funding from \"./finder__results__funding\";\nimport Generic from \"./finder__results__generic\";\nimport Module from \"./finder__results__module\";\nimport News from \"./finder__results__news\";\nimport Profile from \"./finder__results__profile\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport Research from \"./finder__results__research\";\nimport type { Card } from \"../../types/cards/card\";\n\n/**\n * Render a Funnelback result as the appropriate card type.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Card(props: Card) {\n  switch (props.type) {\n    case \"accommodation\":\n      return <Accommodation details={props.details} />;\n    case \"casestudy\":\n      return <CaseStudy details={props.details} />;\n    case \"centre\":\n      return <Centre details={props.details} />;\n    case \"contact\":\n      return <Contact details={props.details} />;\n    case \"course\":\n      return <Course details={props.details} query={props.query} />;\n    case \"event\":\n      return <Event details={props.details} />;\n    case \"funding\":\n      return <Funding details={props.details} query={props.query} />;\n    case \"module\":\n      return <Module details={props.details} query={props.query} />;\n    case \"news\":\n      return <News details={props.details} defaultImage={props.defaultImage} />;\n    case \"profile\":\n      return <Profile details={props.details} query={props.query} />;\n    case \"research\":\n      return <Research details={props.details} query={props.query} />;\n    default:\n      return <Generic details={props.details} />;\n  }\n}\n\nFinder__Results__Card.propTypes = {\n  details: PropTypes.object,\n  query: PropTypes.object,\n  type: PropTypes.string,\n  defaultImage: PropTypes.string,\n};\n\nexport default Finder__Results__Card;\n","/**\n * @module patterns/finder/components/cards/finder__results__casestudy\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { ResultsCaseStudy } from \"../../types/cards/card\";\n\n/**\n * Render a Funnelback result as a case study card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__CaseStudy(props: ResultsCaseStudy) {\n  const subtitle =\n      props.details.listMetadata && props.details.listMetadata.status ? (\n        <p className=\"card__type\">{props.details.listMetadata.status[0]}</p>\n      ) : (\n        props.details.listMetadata &&\n        props.details.listMetadata.type && (\n          <p className=\"card__type\">{props.details.listMetadata.type[0]}</p>\n        )\n      ),\n    school = props.details.listMetadata &&\n      props.details.listMetadata.school && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-university icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>School:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.school.length > 2\n              ? props.details.listMetadata.school.slice(0, -1).join(\", \") +\n                \", and \" +\n                props.details.listMetadata.school.slice(-1)\n              : props.details.listMetadata.school.join(\", and \")}\n          </span>\n        </p>\n      ),\n    department = props.details.listMetadata &&\n      props.details.listMetadata.department && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-building icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>Department:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.department.length > 2\n              ? props.details.listMetadata.department.slice(0, -1).join(\", \") +\n                \", and \" +\n                props.details.listMetadata.department.slice(-1)\n              : props.details.listMetadata.department.join(\", and \")}\n          </span>\n        </p>\n      ),\n    centre = props.details.listMetadata &&\n      props.details.listMetadata.centre && (\n        <p className=\"card__tag\">\n          <span className=\"fas fa-fw fa-vial icon\" aria-hidden=\"true\" />{\" \"}\n          <span>Research centre:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.centre.length > 2\n              ? props.details.listMetadata.centre.slice(0, -1).join(\", \") +\n                \", and \" +\n                props.details.listMetadata.centre.slice(-1)\n              : props.details.listMetadata.centre.join(\", and \")}\n          </span>\n        </p>\n      );\n\n  return (\n    <li className=\"card card--casestudy\">\n      <a href={props.details.liveUrl} className=\"card__anchor card__details\">\n        <div className=\"card__details__text\">\n          <h3 className=\"card__heading\">{props.details.title}</h3>\n          {subtitle}\n          <p className=\"card__description\">\n            {props.details.listMetadata &&\n              props.details.listMetadata.c &&\n              props.details.listMetadata.c[0]}\n          </p>\n          {school}\n          {department}\n          {centre}\n        </div>\n      </a>\n    </li>\n  );\n}\n\nFinder__Results__CaseStudy.propTypes = {\n  details: PropTypes.object,\n};\n\nexport default Finder__Results__CaseStudy;\n","/**\n * @module patterns/finder/components/cards/finder__results__centre\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { uppercaseFirstLetterLowercaseRest } from \"../../util\";\nimport type { ResultsCentre } from \"../../types/cards/card\";\n/**\n * Render a Funnelback result as a centre card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Centre(props: ResultsCentre) {\n  const school = props.details.listMetadata &&\n      props.details.listMetadata.school && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-university icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>School:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.school.length > 2\n              ? props.details.listMetadata.school.slice(0, -1).join(\", \") +\n                \", and \" +\n                props.details.listMetadata.school.slice(-1)\n              : props.details.listMetadata.school.join(\", and \")}\n          </span>\n        </p>\n      ),\n    department = props.details.listMetadata &&\n      props.details.listMetadata.department && (\n        <p className=\"card__tag\">\n          <span className=\"fas fa-fw fa-building icon\" aria-hidden=\"true\" />{\" \"}\n          <span>Department:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.department.length > 2\n              ? props.details.listMetadata.department.slice(0, -1).join(\", \") +\n                \", and \" +\n                props.details.listMetadata.department.slice(-1)\n              : props.details.listMetadata.department.join(\", and \")}\n          </span>\n        </p>\n      ),\n    subject = props.details.listMetadata &&\n      props.details.listMetadata.related && (\n        <p className=\"card__type\">\n          {props.details.listMetadata.related.length > 2\n            ? uppercaseFirstLetterLowercaseRest(\n                props.details.listMetadata.related.join(\"|\"),\n              )\n                .split(\"|\")\n                .slice(0, -1)\n                .join(\", \") +\n              \" and \" +\n              uppercaseFirstLetterLowercaseRest(\n                props.details.listMetadata.related.join(\"|\"),\n              )\n                .split(\"|\")\n                .slice(-1)\n            : uppercaseFirstLetterLowercaseRest(\n                props.details.listMetadata.related.join(\"|\"),\n              )\n                .split(\"|\")\n                .join(\" and \")}\n        </p>\n      );\n  return (\n    <li className=\"card card--centre\">\n      <a href={props.details.liveUrl} className=\"card__anchor card__details\">\n        <div className=\"card__details__text\">\n          <h3 className=\"card__heading\">{props.details.title}</h3>\n          {subject}\n          <p className=\"card__description\">\n            {props.details.listMetadata &&\n              props.details.listMetadata.c &&\n              props.details.listMetadata.c[0]}\n          </p>\n          {school}\n          {department}\n        </div>\n      </a>\n    </li>\n  );\n}\n\nFinder__Results__Centre.propTypes = {\n  details: PropTypes.object,\n};\n\nexport default Finder__Results__Centre;\n","/**\n * @module patterns/finder/components/cards/finder__results__contact\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { ResultsContact } from \"../../types/cards/card\";\n\n/**\n * Render a Funnelback result as a contact card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Contact(props: ResultsContact) {\n  const department = props.details.listMetadata &&\n      props.details.listMetadata.department && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-building icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>Department:</span> {props.details.listMetadata.department[0]}\n        </p>\n      ),\n    school = props.details.listMetadata &&\n      props.details.listMetadata.school && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-university icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>School:</span> {props.details.listMetadata.school[0]}\n        </p>\n      ),\n    jobtitle = props.details.listMetadata &&\n      props.details.listMetadata.jobtitle && (\n        <p className=\"card__type\">{props.details.listMetadata.jobtitle[0]}</p>\n      ),\n    email = props.details.listMetadata && props.details.listMetadata.email && (\n      <p className=\"card__tag\">\n        <span className=\"fas fa-fw fa-envelope icon\" aria-hidden=\"true\" />{\" \"}\n        <span>Email:</span>{\" \"}\n        <a href={\"mailto:\" + props.details.listMetadata.email[0]}>\n          {props.details.listMetadata.email[0]}\n        </a>\n      </p>\n    ),\n    altemail = props.details.listMetadata &&\n      props.details.listMetadata.altemail && (\n        <p className=\"card__tag\">\n          <span className=\"fad fa-user icon\" aria-hidden=\"true\" />{\" \"}\n          <span>Executive Assistant:</span>{\" \"}\n          <a href={\"mailto:\" + props.details.listMetadata.altemail[0]}>\n            {props.details.listMetadata.altemail[0]}\n          </a>\n        </p>\n      ),\n    telephone = props.details.listMetadata &&\n      props.details.listMetadata.telephone && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-phone fa-rotate-90 icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>Telephone:</span>{\" \"}\n          <a href={\"tel:\" + props.details.listMetadata.telephone[0]}>\n            {props.details.listMetadata &&\n              props.details.listMetadata.friendlytelephone &&\n              props.details.listMetadata.friendlytelephone[0]}\n          </a>\n        </p>\n      ),\n    room = props.details.listMetadata && props.details.listMetadata.room && (\n      <p className=\"card__tag\">\n        <span className=\"fas fa-fw fa-door-open icon\" aria-hidden=\"true\" />{\" \"}\n        <span>Room:</span> {props.details.listMetadata.room[0]}\n      </p>\n    ),\n    enquiry = props.details.listMetadata &&\n      props.details.listMetadata.enquiryurl && (\n        <p className=\"card__tag\">\n          <span className=\"fas fa-fw fa-edit icon\" aria-hidden=\"true\" />{\" \"}\n          <span>Enquiries:</span>{\" \"}\n          <a href={props.details.listMetadata.enquiryurl[0]}>\n            {props.details.listMetadata &&\n              props.details.listMetadata.enquirylabel &&\n              props.details.listMetadata.enquirylabel[0]}\n          </a>\n        </p>\n      );\n\n  return (\n    <li className=\"card card--contact\">\n      <div className=\"card__details\">\n        <div className=\"card__details__text\">\n          <h3 className=\"card__heading\">{props.details.title}</h3>\n          {jobtitle}\n          {school}\n          {department}\n          {room}\n          {email}\n          {telephone}\n          {enquiry}\n          {altemail}\n        </div>\n      </div>\n    </li>\n  );\n}\n\nFinder__Results__Contact.propTypes = {\n  details: PropTypes.object,\n};\n\nexport default Finder__Results__Contact;\n","/**\n * @module patterns/finder/components/cards/finder__results__course\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport formatLabel from \"../results/formatLabel\";\nimport { uppercaseFirstLetterLowercaseRest } from \"../../util\";\nimport type { ResultsCourse } from \"../../types/cards/card\";\n\n/**\n * Render a Funnelback result as a course card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\n\nconst externalSiteUrl = [\"www.citystgeorges.ac.uk\"];\nfunction Finder__Results__Course(props: ResultsCourse) {\n  const subtitle =\n      (props.details.listMetadata &&\n        props.details.listMetadata.type &&\n        props.details.listMetadata.type[0]) ||\n      (props.details.listMetadata &&\n        props.details.listMetadata.level &&\n        props.details.listMetadata.level[0]) ||\n      null,\n    award = props.details.listMetadata &&\n      props.details.listMetadata.qualification && (\n        <p className=\"card__tag\">\n          <span className=\"fas fa-fw fa-award icon\" aria-hidden=\"true\" />{\" \"}\n          <span>\n            Award\n            {props.details.listMetadata.qualification.length > 1 && \"s\"}:\n          </span>{\" \"}\n          <span>{props.details.listMetadata.qualification.join(\", \")}</span>\n        </p>\n      ),\n    duration = props.details.listMetadata &&\n      props.details.listMetadata.duration && (\n        <p className=\"card__tag\">\n          <span className=\"fal fa-fw fa-clock icon\" aria-hidden=\"true\" />{\" \"}\n          <span>Duration:</span>{\" \"}\n          <span>{props.details.listMetadata.duration[0]}</span>\n        </p>\n      ),\n    method = props.details.listMetadata &&\n      props.details.listMetadata.method &&\n      props.details.listMetadata.level &&\n      props.details.listMetadata.level[0] !==\n        \"Short courses and professional development\" &&\n      ((props.query.facets && props.query.facets.method) ||\n        props.query.query.indexOf(props.details.listMetadata.method[0]) >= 0 ||\n        props.details.listMetadata.method[0].indexOf(\"Online\") >= 0) && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fa-solid fa-book-open-reader icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>\n            Method\n            {props.details.listMetadata.method.length > 1 && \"s\"} of study:\n          </span>{\" \"}\n          <span>\n            {uppercaseFirstLetterLowercaseRest(\n              Array.from(new Set(props.details.listMetadata.method)).join(\"|\"), // Remove any duplicates & format\n            )\n              .split(\"|\")\n              .join(\", \")}\n          </span>\n        </p>\n      ),\n    location =\n      props.details.listMetadata &&\n      String(props.details.listMetadata.location).toLowerCase() !== \"tooting\"\n        ? props.details.listMetadata.location &&\n          props.query.facets &&\n          props.query.facets.location && (\n            <p className=\"card__tag\">\n              <span\n                className=\"fas fa-fw fa-map-marker-alt icon\"\n                aria-hidden=\"true\"\n              />{\" \"}\n              <span>Location:</span>{\" \"}\n              <span>\n                {/* Avoid duplication of 'Online' location label if location and method of study are both online */}\n                {props.details.listMetadata.location.join(\"|\") ===\n                \"Online|Online\"\n                  ? \"Online\"\n                  : props.details.listMetadata.location.join(\", \")}\n              </span>\n            </p>\n          )\n        : null,\n    school = props.details.listMetadata &&\n      props.details.listMetadata.school && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-university icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>School:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.school.map((e, i) =>\n              i === 0 ? (\n                <React.Fragment key={i}>{e.replace(\"and\", \"&\")}</React.Fragment>\n              ) : (\n                <React.Fragment key={i}>| {e}</React.Fragment>\n              ),\n            )}\n          </span>\n        </p>\n      ),\n    // City St George's label temporarily in place according to branding guidelines\n    stGeorgesLabel =\n      props.details.listMetadata &&\n      String(props.details.listMetadata.location).toLowerCase() ===\n        \"tooting\" ? (\n        <div className=\"card__label card--course__label--stgeorges\">\n          <p>\n            <span\n              className=\"fas fa-fw fa-map-marker-alt icon\"\n              aria-hidden=\"true\"\n            />{\" \"}\n            Tooting Campus\n          </p>\n        </div>\n      ) : null,\n    // City and Business School use different metadata values; check for both\n    clearing = props.details.listMetadata &&\n      props.details.listMetadata.clearing &&\n      [\"Yes\", \"yes\"].includes(props.details.listMetadata.clearing[0]) && (\n        <div className=\"card__label card--course__label--clearing\">\n          <p className=\"card__label card--course__label--clearing\">Clearing</p>\n        </div>\n      ),\n    external = !externalSiteUrl.some(\n      (s) => props.details.indexUrl && props.details.indexUrl.indexOf(s) >= 0,\n    ) ? (\n      <>\n        {\" \"}\n        <span\n          className=\"fas fa-sharp fa-external-link icon\"\n          aria-label=\"(external link)\"\n        ></span>\n      </>\n    ) : null,\n    courseCode =\n      props.details.listMetadata &&\n      props.details.listMetadata.code &&\n      ([\n        \"Undergraduate degree\",\n        \"Foundation course\",\n        \"Postgraduate taught degree\",\n      ].some(\n        (s) =>\n          props.details.listMetadata &&\n          props.details.listMetadata.level &&\n          props.details.listMetadata.level.indexOf(s) >= 0,\n      ) ||\n        props.query.query.indexOf(props.details.listMetadata.code[0]) >= 0) ? (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-graduation-cap icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>\n            Course code\n            {props.details.listMetadata.code.length > 1 && \"s\"}:\n          </span>{\" \"}\n          <span>{props.details.listMetadata.code.join(\"/\")}</span>\n        </p>\n      ) : null,\n    entryYears =\n      props.details.listMetadata &&\n      props.details.listMetadata.entryyears &&\n      ([\"Undergraduate degree\"].some(\n        (s) =>\n          props.details.listMetadata &&\n          props.details.listMetadata.level &&\n          props.details.listMetadata.level.indexOf(s) >= 0,\n      ) ||\n        props.query.query.indexOf(props.details.listMetadata.entryyears[0]) >=\n          0) ? (\n        <p className=\"card__tag\">\n          <span className=\"fas fa-fw fa-calendar icon\" aria-hidden=\"true\" />{\" \"}\n          <span>\n            Year\n            {props.details.listMetadata.entryyears.length > 1 && \"s\"} of entry:\n          </span>{\" \"}\n          <span>{props.details.listMetadata.entryyears.join(\"/\")}</span>\n        </p>\n      ) : null,\n    description = props.details.listMetadata &&\n      props.details.listMetadata.c &&\n      props.details.listMetadata.c[0] && (\n        <p className=\"card__description\">\n          {props.query.query\n            ? formatLabel(props.details.listMetadata.c[0], props.query.query)\n            : props.details.listMetadata.c[0]}\n        </p>\n      );\n\n  return (\n    <li className=\"card card--course\">\n      <a href={props.details.liveUrl} className=\"card__anchor card__details\">\n        <div className=\"wrapper--card__label__details\">\n          {clearing}\n          <div className=\"card__details__text\">\n            <h3 className=\"card__heading\">\n              {props.query.query\n                ? formatLabel(props.details.title, props.query.query)\n                : props.details.title}\n              {external}\n            </h3>\n            <p className=\"card__type\">\n              {props.query.query && subtitle\n                ? formatLabel(subtitle, props.query.query)\n                : subtitle && subtitle}\n            </p>\n            {description}\n            {stGeorgesLabel}\n            {school}\n            {award}\n            {duration}\n            {courseCode}\n            {entryYears}\n            {method}\n            {location}\n          </div>\n        </div>\n      </a>\n    </li>\n  );\n}\n\nFinder__Results__Course.propTypes = {\n  details: PropTypes.object,\n  query: PropTypes.object,\n};\n\nexport default Finder__Results__Course;\n","/**\n * @module patterns/finder/components/cards/finder__results__event\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { formatTime, formatReactDate, decodeHtml } from \"../../util\";\nimport type { ResultsEvents } from \"../../types/cards/card\";\n\nfunction formatShortDate(dateString: string) {\n  const months = [\n      \"Jan\",\n      \"Feb\",\n      \"Mar\",\n      \"Apr\",\n      \"May\",\n      \"Jun\",\n      \"Jul\",\n      \"Aug\",\n      \"Sep\",\n      \"Oct\",\n      \"Nov\",\n      \"Dec\",\n    ],\n    date = new Date(dateString),\n    month = months[date.getUTCMonth()];\n\n  return (\n    <p className=\"card--event__label--shortdate\">\n      <span>{date.getUTCDate()}</span> {month}\n    </p>\n  );\n}\n\nfunction compareDates(startDate: string, endDate: string, showTime: number) {\n  const sDate = new Date(startDate),\n    eDate = new Date(endDate),\n    noTimeSDate = new Date(sDate.setUTCHours(0, 0, 0)),\n    noTimeEDate = new Date(eDate.setUTCHours(0, 0, 0)),\n    time = showTime ? (\n      <React.Fragment>\n        , {formatTime(startDate)} - {formatTime(endDate, true)}\n      </React.Fragment>\n    ) : null;\n\n  return noTimeSDate.getTime() === noTimeEDate.getTime() ? (\n    <p className=\"card__type true\">\n      {formatReactDate(sDate)}\n      {time}\n    </p>\n  ) : (\n    <p className=\"card__type false\">\n      {formatReactDate(sDate)} - {formatReactDate(eDate)}\n      {time}\n    </p>\n  );\n}\n\n/**\n * Render a Funnelback result as an event card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Event(props: ResultsEvents) {\n  const shortDate =\n      props.details.listMetadata &&\n      props.details.listMetadata.d &&\n      formatShortDate(props.details.listMetadata.d[0]),\n    location = props.details.listMetadata &&\n      props.details.listMetadata.location && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw icon fa-map-marker-alt\"\n            aria-hidden=\"true\"\n          ></span>{\" \"}\n          <span>Location:</span>{\" \"}\n          <span>{props.details.listMetadata.location.join(\", \")}</span>\n        </p>\n      ),\n    audience = props.details.listMetadata &&\n      props.details.listMetadata.audience && (\n        <p className=\"card__tag\">\n          <span className=\"fas fa-fw icon fa-users\" aria-hidden=\"true\"></span>{\" \"}\n          <span>Audience:</span>{\" \"}\n          <span>\n            {Array.from(new Set(props.details.listMetadata.audience))\n              .map((str) => {\n                const capitalized = `${str[0].toUpperCase()}${str.slice(1)}`;\n                return capitalized.replace(/-/g, \" \");\n              })\n              .join(\"|\")\n              .split(\"|\")\n              .join(\"; \")}\n          </span>\n        </p>\n      ),\n    thumbnail = props.details.listMetadata &&\n      props.details.listMetadata.thumbnail && (\n        <img\n          src={props.details.listMetadata.thumbnail[0]}\n          alt=\"\"\n          className=\"card__thumbnail\"\n        />\n      ),\n    eventStartDate =\n      props.details.listMetadata &&\n      props.details.listMetadata.d &&\n      props.details.listMetadata.d[0],\n    eventEndDate =\n      props.details.listMetadata &&\n      props.details.listMetadata.d &&\n      props.details.listMetadata.d[1],\n    eventLabel =\n      eventStartDate &&\n      eventEndDate &&\n      props.details.listMetadata &&\n      props.details.listMetadata.displayTime &&\n      compareDates(\n        eventStartDate,\n        eventEndDate,\n        parseInt(props.details.listMetadata.displayTime[0]),\n      );\n\n  return (\n    <li className=\"card card--event card--landscape\">\n      <a href={props.details.liveUrl} className=\"card__anchor card__details\">\n        {thumbnail}\n        {shortDate}\n        <div className=\"card__details__text\">\n          <h3 className=\"card__heading\">{decodeHtml(props.details.title)}</h3>\n          <p className=\"card__description\">\n            {props.details.listMetadata &&\n              props.details.listMetadata.c &&\n              decodeHtml(props.details.listMetadata.c[0])}\n          </p>\n          {eventLabel}\n          {location}\n          {audience}\n        </div>\n      </a>\n    </li>\n  );\n}\n\nFinder__Results__Event.propTypes = {\n  details: PropTypes.object,\n};\n\nexport default Finder__Results__Event;\n","/**\n * @module patterns/finder/components/cards/finder__results__funding\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { uppercaseFirstLetterLowercaseRest } from \"../../util\";\nimport type { ResultsFunding } from \"../../types/cards/card\";\n\n/**\n * Render a Funnelback result as a funding card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Funding(props: ResultsFunding) {\n  const school = props.details.listMetadata &&\n      props.details.listMetadata.school &&\n      props.query.facets &&\n      props.query.facets.school && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-university icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>School:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.school.length > 2\n              ? props.details.listMetadata.school.slice(0, -1).join(\", \") +\n                \", or \" +\n                props.details.listMetadata.school.slice(-1)\n              : props.details.listMetadata.school.join(\", or \")}\n          </span>\n        </p>\n      ),\n    hardship = props.details.listMetadata &&\n      props.details.listMetadata.hardship &&\n      props.details.listMetadata.hardship[0] === \"1\" && (\n        <div className=\"card--funding__label--hardship\">\n          <p>Hardship funding</p>\n        </div>\n      ),\n    programme = props.details.listMetadata &&\n      props.details.listMetadata.programme && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-graduation-cap icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>\n            Programme\n            {props.details.listMetadata.programme.length > 2 ? \"s\" : null}:\n          </span>{\" \"}\n          <span>\n            {props.details.listMetadata.programme.length > 2\n              ? uppercaseFirstLetterLowercaseRest(\n                  props.details.listMetadata.programme.join(\"|\"),\n                )\n                  .split(\"|\")\n                  .slice(0, -1)\n                  .join(\", \") +\n                \" or \" +\n                uppercaseFirstLetterLowercaseRest(\n                  props.details.listMetadata.programme.join(\"|\"),\n                )\n                  .split(\"|\")\n                  .slice(-1)\n              : uppercaseFirstLetterLowercaseRest(\n                  props.details.listMetadata.programme.join(\"|\"),\n                )\n                  .split(\"|\")\n                  .join(\" or \")}\n          </span>\n        </p>\n      ),\n    level = props.details.listMetadata && props.details.listMetadata.level && (\n      <p className=\"card__tag\">\n        <span className=\"fas fa-fw fa-award icon\" aria-hidden=\"true\" />{\" \"}\n        <span>Programme level:</span>{\" \"}\n        <span>\n          {props.details.listMetadata.level.length > 2\n            ? uppercaseFirstLetterLowercaseRest(\n                props.details.listMetadata.level.join(\"|\"),\n              )\n                .split(\"|\")\n                .slice(0, -1)\n                .join(\", \") +\n              \" or \" +\n              uppercaseFirstLetterLowercaseRest(\n                props.details.listMetadata.level.join(\"|\"),\n              )\n                .split(\"|\")\n                .slice(-1)\n            : uppercaseFirstLetterLowercaseRest(\n                props.details.listMetadata.level.join(\"|\"),\n              )\n                .split(\"|\")\n                .join(\" or \")}\n        </span>\n      </p>\n    ),\n    feestatus = props.details.listMetadata &&\n      props.details.listMetadata.feestatus && (\n        <p className=\"card__tag\">\n          <span className=\"far fa-fw fa-globe-europe icon\" aria-hidden=\"true\" />{\" \"}\n          <span>Fee status:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.feestatus.length > 2\n              ? props.details.listMetadata.feestatus.slice(0, -1).join(\", \") +\n                \" or \" +\n                props.details.listMetadata.feestatus.slice(-1)\n              : props.details.listMetadata.feestatus.join(\" or \")}\n          </span>\n        </p>\n      );\n\n  return (\n    <li className=\"card card--funding\">\n      <a href={props.details.liveUrl} className=\"card__anchor card__details\">\n        {hardship}\n        <div className=\"card__details__text\">\n          <h3 className=\"card__heading\">\n            {props.details.title.replace(\"&amp;\", \"&\")}\n          </h3>\n          <p className=\"card__type\">\n            {props.details.listMetadata &&\n              props.details.listMetadata.type &&\n              props.details.listMetadata.type[0]}\n          </p>\n          <p className=\"card__description\">\n            {props.details.listMetadata &&\n              props.details.listMetadata.c &&\n              props.details.listMetadata.c[0]}\n          </p>\n          {level}\n          {programme}\n          {feestatus}\n          {school}\n        </div>\n      </a>\n    </li>\n  );\n}\n\nFinder__Results__Funding.propTypes = {\n  details: PropTypes.object,\n  query: PropTypes.object,\n};\n\nexport default Finder__Results__Funding;\n","/**\n * @module patterns/finder/components/cards/finder__results__generic\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { ResultsGeneric } from \"../../types/cards/card\";\n/**\n * Render a Funnelback result as a generic card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Generic(props: ResultsGeneric) {\n  const school = props.details.listMetadata &&\n      props.details.listMetadata.school && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-university icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>School:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.school.length > 2\n              ? props.details.listMetadata.school.slice(0, -1).join(\", \") +\n                \", and \" +\n                props.details.listMetadata.school.slice(-1)\n              : props.details.listMetadata.school.join(\", and \")}\n          </span>\n        </p>\n      ),\n    department = props.details.listMetadata &&\n      props.details.listMetadata.department && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-building icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>Department:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.department.length > 2\n              ? props.details.listMetadata.department.slice(0, -1).join(\", \") +\n                \", and \" +\n                props.details.listMetadata.department.slice(-1)\n              : props.details.listMetadata.department.join(\", and \")}\n          </span>\n        </p>\n      ),\n    title = props.details.title && (\n      <h3 className=\"card__heading\">\n        {props.details.title.indexOf(\"School\") >= 0\n          ? props.details.title.replace(\"&amp;\", \"&\")\n          : props.details.title}\n      </h3>\n    );\n\n  return (\n    <li className=\"card card--generic\">\n      <a href={props.details.liveUrl} className=\"card__anchor card__details\">\n        <div className=\"card__details__text\">\n          {title}\n          <p className=\"card__description\">\n            {props.details.listMetadata &&\n              props.details.listMetadata.c &&\n              props.details.listMetadata.c[0]}\n          </p>\n          {school}\n          {department}\n        </div>\n      </a>\n    </li>\n  );\n}\n\nFinder__Results__Generic.propTypes = {\n  details: PropTypes.object,\n};\n\nexport default Finder__Results__Generic;\n","/**\n * @module patterns/finder/components/cards/finder__results__module\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { ResultsModule } from \"../../types/cards/card\";\n\n/**\n * Render a Funnelback result as a module card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Module(props: ResultsModule) {\n  const location = props.details.listMetadata &&\n      props.details.listMetadata.location && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-map-marker-alt icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>Location:</span>{\" \"}\n          <span>{props.details.listMetadata.location[0]}</span>\n        </p>\n      ),\n    title =\n      props.details.listMetadata && props.details.listMetadata.code ? (\n        <React.Fragment>\n          <span className=\"card--module__code\">\n            {props.details.listMetadata.code[0]}\n          </span>{\" \"}\n          <span>{props.details.title}</span>\n        </React.Fragment>\n      ) : (\n        <React.Fragment>\n          <span>{props.details.title}</span>\n        </React.Fragment>\n      ),\n    school = props.details.listMetadata &&\n      props.details.listMetadata.school && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-university icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>School:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.school.length > 2\n              ? props.details.listMetadata.school.slice(0, -1).join(\", \") +\n                \", and \" +\n                props.details.listMetadata.school.slice(-1)\n              : props.details.listMetadata.school.join(\", and \")}\n          </span>\n        </p>\n      ),\n    term = props.details.listMetadata && props.details.listMetadata.term && (\n      <p className=\"card__tag\">\n        <span className=\"far fa-fw fa-calendar icon\" aria-hidden=\"true\" />{\" \"}\n        <span>Semester:</span>{\" \"}\n        <span>\n          {props.details.listMetadata.term.length > 2\n            ? \"All year\"\n            : props.details.listMetadata.term.join(\" or \")}\n        </span>\n      </p>\n    ),\n    topic = props.details.listMetadata &&\n      props.details.listMetadata.related && (\n        <p className=\"card__type\">\n          {props.details.listMetadata.related\n            .sort()\n            .map((topic, i) => (i > 0 ? topic.toLowerCase() : topic))\n            .join(\", \")}\n        </p>\n      ),\n    specification = props.details.listMetadata &&\n      props.details.listMetadata.specification && (\n        <p className=\"card__tag\">\n          <span className=\"far fa-fw fa-file-pdf icon\" aria-label=\"PDF\" />{\" \"}\n          <a href={props.details.listMetadata.specification[0]}>\n            Download module specification\n          </a>\n        </p>\n      );\n\n  return (\n    <li className=\"card card--module\">\n      <div className=\"card__details\">\n        <div className=\"card__details__text\">\n          <h3 className=\"card__heading\">{title}</h3>\n          {topic}\n          <p className=\"card__description\">\n            {props.details.listMetadata &&\n              props.details.listMetadata.c &&\n              props.details.listMetadata.c[0]}\n          </p>\n          {term}\n          {school}\n          {location}\n          {specification}\n        </div>\n      </div>\n    </li>\n  );\n}\n\nFinder__Results__Module.propTypes = {\n  details: PropTypes.object,\n  query: PropTypes.object,\n};\n\nexport default Finder__Results__Module;\n","/**\n * @module patterns/finder/components/cards/finder__results__news\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { formatReactDate, toBool, decodeHtml } from \"../../util\";\nimport Finder__ToolTip from \"../tools/finder__toolTip\";\nimport type { ResultsNews } from \"../../types/cards/card\";\n\n/**\n * Render a Funnelback result as a generic card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__News(props: ResultsNews) {\n  const thumbnailSourceName =\n      (props.details.listMetadata &&\n        props.details.listMetadata.thumbnailSourceName &&\n        props.details.listMetadata.thumbnailSourceName[0]) ||\n      false,\n    thumbnailSourceUrl =\n      (props.details.listMetadata &&\n        props.details.listMetadata.thumbnailSourceUrl &&\n        props.details.listMetadata.thumbnailSourceUrl[0]) ||\n      false,\n    thumbnailAuthorName =\n      (props.details.listMetadata &&\n        props.details.listMetadata.thumbnailAuthorName &&\n        props.details.listMetadata.thumbnailAuthorName[0]) ||\n      false,\n    thumbnailAuthorUrl =\n      (props.details.listMetadata &&\n        props.details.listMetadata.thumbnailAuthorUrl &&\n        props.details.listMetadata.thumbnailAuthorUrl[0]) ||\n      false,\n    thumbnailLicenceType =\n      (props.details.listMetadata &&\n        props.details.listMetadata.thumbnailLicenceType &&\n        props.details.listMetadata.thumbnailLicenceType[0]) ||\n      false,\n    thumbnailLicenceUrl =\n      (props.details.listMetadata &&\n        props.details.listMetadata.thumbnailLicenceUrl &&\n        props.details.listMetadata.thumbnailLicenceUrl[0]) ||\n      false,\n    displayToolTip =\n      props.details.listMetadata &&\n      props.details.listMetadata.thumbnailToolTip &&\n      toBool(props.details.listMetadata.thumbnailToolTip[0]);\n\n  const formattedDate =\n      props.details.listMetadata &&\n      props.details.listMetadata.d &&\n      formatReactDate(new Date(props.details.listMetadata.d[0])),\n    dateString = props.details.listMetadata && props.details.listMetadata.d && (\n      <p className=\"card__type\">{formattedDate}</p>\n    ),\n    hashtags = props.details.listMetadata &&\n      props.details.listMetadata.hashtagtext && (\n        <p className=\"card__tag\">\n          <span className=\"fad fa-fw fa-hashtag icon\" aria-hidden=\"true\" />{\" \"}\n          <span>\n            Hashtag\n            {props.details.listMetadata.hashtagtext.length > 1 && \"s\"}:\n          </span>{\" \"}\n          <span>{props.details.listMetadata.hashtagtext.join(\", \")}</span>\n        </p>\n      ),\n    thumbnail =\n      props.details.listMetadata &&\n      props.details.listMetadata.thumbnailTiny &&\n      props.details.listMetadata.thumbnailTiny[0] &&\n      props.details.listMetadata.thumbnailMax &&\n      props.details.listMetadata.thumbnailMax[0] &&\n      props.details.listMetadata.thumbnailMobile &&\n      props.details.listMetadata.thumbnailMobile[0] ? (\n        <picture>\n          <source\n            srcSet={props.details.listMetadata.thumbnailTiny[0]}\n            media=\"(max-width: 375px)\"\n          />\n          <source\n            srcSet={props.details.listMetadata.thumbnailMax[0]}\n            media=\"(min-width: 3840px)\"\n          />\n          <img\n            src={props.details.listMetadata.thumbnailMobile[0]}\n            alt={props.details.title}\n          />\n        </picture>\n      ) : props.details.listMetadata && props.details.listMetadata.thumbnail ? (\n        <img\n          src={props.details.listMetadata.thumbnail[0]}\n          alt=\"\"\n          className=\"card__thumbnail\"\n        />\n      ) : null,\n      defaultImg = props.defaultImage && (\n        <picture>\n          <img\n            src={props.defaultImage}\n            alt=\"News default image\"\n            className=\"card__thumbnail\"\n          />\n        </picture>\n      );\n\n  return (\n    <li className=\"card card--news\">\n      <Finder__ToolTip\n        thumbnailSourceName={thumbnailSourceName}\n        thumbnailSourceUrl={thumbnailSourceUrl}\n        thumbnailAuthorName={thumbnailAuthorName}\n        thumbnailAuthorUrl={thumbnailAuthorUrl}\n        thumbnailLicenceType={thumbnailLicenceType}\n        thumbnailLicenceUrl={thumbnailLicenceUrl}\n        displayToolTip={displayToolTip}\n      />\n      <a href={props.details.liveUrl} className=\"card__anchor card__details\">\n        {thumbnail ? thumbnail : defaultImg}\n        <div className=\"card__details__text\">\n          {dateString}\n          <h3 className=\"card__heading\">{decodeHtml(props.details.title)}</h3>\n          <p className=\"card__description\">\n            {props.details.listMetadata &&\n              props.details.listMetadata.c &&\n              decodeHtml(props.details.listMetadata.c[0])}\n          </p>\n          {hashtags}\n        </div>\n      </a>\n    </li>\n  );\n}\n\nFinder__Results__News.propTypes = {\n  details: PropTypes.object,\n};\n\nexport default Finder__Results__News;\n","/**\n * @module patterns/finder/components/cards/finder__results__profile\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { ResultsProfile } from \"../../types/cards/card\";\n\n/**\n * Render a Funnelback result as a profile card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Profile(props: ResultsProfile) {\n  const school = props.details.listMetadata &&\n      props.details.listMetadata.school && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-university icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>School:</span>{\" \"}\n          {props.details.listMetadata.school[0].replace(\"and\", \"&\")}\n        </p>\n      ),\n    department = props.details.listMetadata &&\n      props.details.listMetadata.department && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-building icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>Department:</span> {props.details.listMetadata.department[0]}\n        </p>\n      ),\n    headshot = props.details.listMetadata &&\n      props.details.listMetadata.thumbnail && (\n        <div className=\"card__thumbnail\">\n          <img\n            src={props.details.listMetadata.thumbnail[0]}\n            alt={\"Photo of \" + props.details.title}\n          />\n        </div>\n      ),\n    EDIAmbassadors = props.details.listMetadata &&\n      props.details.listMetadata.ediAmbassador && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-people-roof icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>EDI Ambassador</span>\n        </p>\n      ),\n    thumbnailExist =\n      props.details.listMetadata &&\n      props.details.listMetadata.thumbnail &&\n      \"card--profile--thumbnailAvailable\",\n    country = props.query.facets &&\n      props.query.facets.country &&\n      props.details.listMetadata &&\n      props.details.listMetadata.country && (\n        <div className=\"card__tag\">\n          <span className=\"fad fa-fw fa-globe-europe icon\" aria-hidden=\"true\" />{\" \"}\n          <span>Country:</span>{\" \"}\n          {props.details.listMetadata.country.length > 2\n            ? props.details.listMetadata.country.slice(0, -1).join(\", \") +\n              \" and \" +\n              props.details.listMetadata.country.slice(-1)\n            : props.details.listMetadata.country.join(\" and \")}\n        </div>\n      );\n\n  return (\n    <li className=\"card card--profile\">\n      <a\n        href={props.details.liveUrl}\n        className={`card__anchor card__details ${thumbnailExist}`}\n      >\n        {headshot}\n        <div className=\"card__details__text\">\n          <h3 className=\"card__heading\">{props.details.title}</h3>\n          <p className=\"card__type\">\n            {props.details.listMetadata &&\n              props.details.listMetadata.jobtitle &&\n              props.details.listMetadata.jobtitle[0]}\n          </p>\n          {school}\n          {department}\n          {country}\n          {EDIAmbassadors}\n        </div>\n      </a>\n    </li>\n  );\n}\n\nFinder__Results__Profile.propTypes = {\n  details: PropTypes.object,\n  query: PropTypes.object,\n};\n\nexport default Finder__Results__Profile;\n","/**\n * @module patterns/finder/components/cards/finder__results__research\n * @author Web Development\n * @copyright City, University of London 2021\n */\n\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport type { ResultsResearch } from \"../../types/cards/card\";\n// import parse from 'html-react-parser';\n\n/**\n * Render a Funnelback result as a PhD research project card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Research(props: ResultsResearch) {\n  const school = props.details.listMetadata &&\n      props.details.listMetadata.school && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-university icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>School:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.school.length > 2\n              ? props.details.listMetadata.school.slice(0, -1).join(\", \") +\n                \" and \" +\n                props.details.listMetadata.school.slice(-1)\n              : props.details.listMetadata.school.join(\" and \")}\n          </span>\n        </p>\n      ),\n    department = props.details.listMetadata &&\n      props.details.listMetadata.department && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-sharp fa-building icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          <span>Department:</span>{\" \"}\n          <span>\n            {props.details.listMetadata.department.length > 2\n              ? props.details.listMetadata.department.slice(0, -1).join(\", \") +\n                \" and \" +\n                props.details.listMetadata.department.slice(-1)\n              : props.details.listMetadata.department.join(\" and \")}\n          </span>\n        </p>\n      ),\n    centre = props.details.listMetadata &&\n      props.details.listMetadata.researchCentre && (\n        <p className=\"card__tag\">\n          <span className=\"fas fa-fw fa-vial icon\" aria-hidden=\"true\" />{\" \"}\n          {props.details.listMetadata.researchCentre.length > 1 ? (\n            <span>Research centres: </span>\n          ) : (\n            <span>Research centre: </span>\n          )}\n          {/* <span>\n                    {props.details.listMetadata.researchCentre.length > 2\n                        ? parse(\n                              props.details.listMetadata.researchCentre\n                                  .slice(0, -1)\n                                  .join(', ') +\n                                  ' and ' +\n                                  props.details.listMetadata.researchCentre.slice(\n                                      -1\n                                  )\n                          )\n                        : parse(\n                              props.details.listMetadata.researchCentre.join(\n                                  ' and '\n                              )\n                          )}\n                </span> */}\n        </p>\n      ),\n    academic = props.details.listMetadata &&\n      props.details.listMetadata.academic && (\n        <p className=\"card__tag\">\n          <span\n            className=\"fas fa-fw fa-chalkboard-teacher icon\"\n            aria-hidden=\"true\"\n          />{\" \"}\n          {props.details.listMetadata.academic.length > 1 ? (\n            <span>Academics: </span>\n          ) : (\n            <span>Academic: </span>\n          )}\n          {/* <span>\n                    {props.details.listMetadata.academic.length > 2\n                        ? parse(\n                              props.details.listMetadata.academic\n                                  .slice(0, -1)\n                                  .join(', ') +\n                                  ' and ' +\n                                  props.details.listMetadata.academic.slice(-1)\n                          )\n                        : parse(\n                              props.details.listMetadata.academic.join(' and ')\n                          )}\n                </span> */}\n        </p>\n      ),\n    student = props.details.listMetadata &&\n      props.details.listMetadata.student && (\n        <p className=\"card__tag\">\n          <span className=\"fas fa-fw fa-users icon\" aria-hidden=\"true\" />{\" \"}\n          {props.details.listMetadata.student.length > 1 ? (\n            <span>Students: </span>\n          ) : (\n            <span>Student: </span>\n          )}\n          {/* <span>\n                    {props.details.listMetadata.student.length > 2\n                        ? parse(\n                              props.details.listMetadata.student\n                                  .slice(0, -1)\n                                  .join(', ') +\n                                  ' and ' +\n                                  props.details.listMetadata.student.slice(-1)\n                          )\n                        : parse(\n                              props.details.listMetadata.student.join(' and ')\n                          )}\n                </span> */}\n        </p>\n      ),\n    degree = props.details.listMetadata &&\n      props.details.listMetadata.relatedDegree && (\n        <p className=\"card__tag\">\n          <span className=\"far fa-fw fa-diploma icon\" aria-hidden=\"true\" />{\" \"}\n          {props.details.listMetadata.relatedDegree.length > 1 ? (\n            <span>Related degrees: </span>\n          ) : (\n            <span>Related degree: </span>\n          )}\n          {/* <span>\n                    {props.details.listMetadata.relatedDegree.length > 2\n                        ? parse(\n                              props.details.listMetadata.relatedDegree\n                                  .slice(0, -1)\n                                  .join(', ') +\n                                  ' and ' +\n                                  props.details.listMetadata.relatedDegree.slice(\n                                      -1\n                                  )\n                          )\n                        : parse(\n                              props.details.listMetadata.relatedDegree.join(\n                                  ' and '\n                              )\n                          )}\n                </span> */}\n        </p>\n      ),\n    status = props.details.listMetadata &&\n      props.details.listMetadata.status && (\n        <p className=\"card__tag\">\n          <span className=\"far fa-fw fa-hourglass icon\" aria-hidden=\"true\" />{\" \"}\n          <span>Status:</span>{\" \"}\n          <span>{props.details.listMetadata.status[0]} </span>\n          {props.details.listMetadata.status[0] === \"Completed project\" ? (\n            <span\n              className=\"far fa-fw fa-check-circle icon\"\n              aria-hidden=\"true\"\n            />\n          ) : null}\n        </p>\n      ),\n    site = props.details.listMetadata && props.details.listMetadata.site && (\n      <p className=\"card__tag\">\n        <span className=\"far fa-fw fa-globe icon\" aria-hidden=\"true\" />{\" \"}\n        <span>\n          <a href={props.details.listMetadata.site[0]}>View case study site</a>\n        </span>\n      </p>\n    );\n\n  return (\n    <li className=\"card card--research\">\n      <div className=\"card__details\">\n        <div className=\"card__details__text\">\n          <h3 className=\"card--research__title-link\">{props.details.title}</h3>\n          <p className=\"card__description\">\n            {props.details.listMetadata &&\n              props.details.listMetadata.c &&\n              props.details.listMetadata.c[0]}\n          </p>\n          {school}\n          {department}\n          {centre}\n          {degree}\n          {academic}\n          {student}\n          {status}\n          {site}\n        </div>\n      </div>\n    </li>\n  );\n}\n\nFinder__Results__Research.propTypes = {\n  details: PropTypes.object,\n};\n\nexport default Finder__Results__Research;\n","/**\n * @module patterns/finder/components/finder__checkbox\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { CheckBox } from \"../../types/filters/filters\";\n\nfunction Finder__Checkbox(props: CheckBox) {\n  const randomNumber = props.mobile ? \"mobile\" : \"desktop\",\n    toggleChecked = props.facet.meta in props.query.facets,\n    responseFacetValue =\n      props.responseFacet[0] &&\n      props.responseFacet[0].allValues &&\n      props.responseFacet[0].allValues.filter(\n        (value) =>\n          props.facet.checkedValue &&\n          value.data.toLowerCase() === props.facet.checkedValue.toLowerCase(),\n      );\n\n  if (\n    responseFacetValue &&\n    responseFacetValue[0] &&\n    responseFacetValue[0].count > 0\n  ) {\n    const toggleFacet = () => {\n      const newQuery = props.query;\n\n      if (props.dependencies) {\n        props.dependencies.forEach((facet) => {\n          delete newQuery.facets[facet.meta];\n        });\n      }\n\n      if (toggleChecked) {\n        delete newQuery.facets[props.facet.meta];\n      } else if (props.facet.checkedValue) {\n        newQuery.facets[props.facet.meta] = props.facet.checkedValue;\n}\n\n      newQuery.startRank = 1;\n      newQuery.misspelling = null;\n      newQuery.interacted = true;\n\n      props.update.query(newQuery);\n      props.update.results(!props.update.updateState);\n    };\n\n    return (\n      <div className=\"finder__filter finder__checkbox\">\n        <input\n          type=\"checkbox\"\n          id={`meta_${props.facet.meta}_sand--${randomNumber}`}\n          name={`meta_${props.facet.meta}_sand`}\n          value={props.facet.checkedValue}\n          onChange={() => toggleFacet()}\n          checked={toggleChecked}\n        />\n        <div\n          className=\"finder__checkbox__indicator finder__checkbox__indicator\"\n          aria-hidden=\"true\"\n          onClick={() => toggleFacet()}\n        >\n          {toggleChecked ? (\n            <span className=\"fa fa-fw fas fa-check icon\"></span>\n          ) : null}\n        </div>\n        <label\n          className=\"finder__filters__label--always\"\n          htmlFor={`meta_${props.facet.meta}_sand--${randomNumber}`}\n        >\n          {props.facet.name}\n          {!toggleChecked &&\n            responseFacetValue &&\n            \" (\" + responseFacetValue[0].count + \")\"}\n        </label>\n      </div>\n    );\n  } else {\n    return null;\n  }\n}\n\nFinder__Checkbox.propTypes = {\n  facet: PropTypes.object,\n  query: PropTypes.object,\n  responseFacet: PropTypes.arrayOf(PropTypes.object),\n  update: PropTypes.object,\n  dependencies: PropTypes.arrayOf(PropTypes.object),\n  mobile: PropTypes.bool,\n};\n\nexport default Finder__Checkbox;\n","/**\n * @module patterns/finder/components/finder__checkbox\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { EventCheckBox } from \"../../types/filters/filters\";\nimport type { Query } from \"../../types/query\";\n\nfunction Finder__paramCheckbox(props: EventCheckBox) {\n  const dateDayFormat = 10;\n  const stringLength = 16,\n    stringOffset = -4,\n    randomNumber = Math.random().toString(stringLength).slice(stringOffset),\n    pastEventsResponseTotal =\n      props.pastEventsResponse &&\n      props.pastEventsResponse.resultPacket.resultsSummary &&\n      props.pastEventsResponse.resultPacket.resultsSummary.fullyMatching,\n    pastEventsPartialResponseTotal =\n      props.pastEventsResponse &&\n      props.pastEventsResponse.resultPacket.resultsSummary &&\n      props.pastEventsResponse.resultPacket.resultsSummary.partiallyMatching,\n    toggleChecked =\n      props.query.parameters && \"lt_eventDate\" in props.query.parameters,\n    totalText = pastEventsResponseTotal\n      ? pastEventsResponseTotal\n      : pastEventsPartialResponseTotal\n        ? pastEventsPartialResponseTotal\n        : 0;\n\n  const currentDate = new Date(),\n    currentYear = currentDate.getUTCFullYear(),\n    currentDateMonth =\n      currentDate.getUTCMonth() >= 9\n        ? currentDate.getUTCMonth() + 1\n        : \"0\" + (currentDate.getUTCMonth() + 1),\n    currentDateDay = currentDate.getUTCDate(),\n    currentDateString = `${currentYear}${currentDateMonth}${\n      currentDateDay >= dateDayFormat ? currentDateDay : \"0\" + currentDateDay\n    }`;\n\n  const toggleFacet = () => {\n    const currentDate = new Date();\n    const dateDayFormat = 10;\n    const currentYear = currentDate.getUTCFullYear();\n    const currentDateMonth =\n      currentDate.getUTCMonth() + 1 >= 10\n        ? currentDate.getUTCMonth() + 1\n        : \"0\" + (currentDate.getUTCMonth() + 1);\n    const currentDateDay = currentDate.getUTCDate();\n    const currentDateString = `${currentYear}${currentDateMonth}${\n      currentDateDay >= dateDayFormat ? currentDateDay : \"0\" + currentDateDay\n    }`;\n\n    const newQuery: Query[\"query\"] = {\n      ...props.query,\n      parameters: props.query.parameters ? { ...props.query.parameters } : {},\n    };\n\n    if (newQuery.parameters && \"lt_eventDate\" in newQuery.parameters) {\n      // Remove past filters\n      delete newQuery.parameters.lt_eventDate;\n      delete newQuery.parameters.events;\n      newQuery.parameters.ge_eventDate = currentDateString;\n      newQuery.sortType = \"adate\";\n    } else if (newQuery.parameters) {\n      // Set past filters\n      delete newQuery.parameters.ge_eventDate;\n      newQuery.parameters.lt_eventDate = currentDateString;\n      newQuery.parameters.events = \"past\";\n      newQuery.sortType = \"date\";\n    }\n\n    newQuery.startRank = 1;\n    newQuery.misspelling = null;\n    newQuery.interacted = true;\n\n    props.update.query(newQuery);\n    props.update.results(!props.update.updateState);\n  };\n\n  if (totalText > 0) {\n    if (props.matrixState) {\n      return (\n        <div className=\"finder__filter finder__select\">\n          <label htmlFor=\"event--time\">Location</label>\n          <select name=\"event--time\" id=\"event--time\">\n            <option value={`ge_eventDate!${currentDateString}`}>\n              Upcoming events\n            </option>\n            <option value={`lt_eventDate!${currentDateString}`}>\n              Past events\n            </option>\n          </select>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"finder__filter finder__checkbox\">\n          <input\n            type=\"checkbox\"\n            id={`${props.facet.funnelbackName}--${randomNumber}`}\n            name={props.facet.meta}\n            value={props.facet.checkedValue}\n            onChange={() => toggleFacet()}\n            checked={toggleChecked}\n          />\n          <div\n            className=\"finder__checkbox__indicator finder__checkbox__indicator\"\n            aria-hidden=\"true\"\n            onClick={() => toggleFacet()}\n          >\n            {toggleChecked ? (\n              <span className=\"fa fa-fw fas fa-check icon\"></span>\n            ) : null}\n          </div>\n          <label\n            className=\"finder__filters__label--always\"\n            htmlFor={`${props.facet.funnelbackName}--${randomNumber}`}\n          >\n            {props.facet.name}\n            {!toggleChecked && totalText && \" (\" + totalText + \")\"}\n          </label>\n        </div>\n      );\n    }\n  } else {\n    return null;\n  }\n}\n\nFinder__paramCheckbox.propTypes = {\n  facet: PropTypes.object,\n  query: PropTypes.object,\n  pastEventsResponse: PropTypes.object,\n  update: PropTypes.object,\n  dependencies: PropTypes.arrayOf(PropTypes.object),\n  matrixState: PropTypes.bool,\n};\n\nexport default Finder__paramCheckbox;\n","/**<\n * @module patterns/finder/components/finder__select\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { EventSelect } from \"../../types/filters/filters\";\n\nfunction Finder__Select(props: EventSelect) {\n  \n  const dateDayFormat = 10;\n  const currentDate = new Date(),\n    currentYear = currentDate.getUTCFullYear(),\n    currentDateMonth =\n      currentDate.getUTCMonth() >= 9\n        ? currentDate.getUTCMonth() + 1\n        : \"0\" + (currentDate.getUTCMonth() + 1),\n    currentDateDay = currentDate.getUTCDate(),\n    currentDateString = `${currentYear}${currentDateMonth}${\n      currentDateDay >= dateDayFormat ? currentDateDay : \"0\" + currentDateDay\n    }`;\n  console.log('currentDate.getUTCMonth()', currentDate.getUTCMonth());\n  const randomNumber = props.mobile ? \"mobile\" : \"desktop\",\n    currentValue = (props.facet && props.query.facets[props.facet.meta]) || \"\";\n\n  // reduce the facet configuration to an array of all possible values for\n  // the facet\n  const allFacets =\n    props.facet &&\n    props.facet.values &&\n    props.facet.values.reduce((acc, data) => {\n      return [...acc, data];\n    }, []);\n\n  // reduce the Funnelback response for the facet to an array of valid\n  // values for the current query\n  const responseFacets =\n    props.responseFacet[0] && props.responseFacet[0].allValues\n      ? props.responseFacet[0].allValues.reduce((acc, data) => {\n          return [...acc, data.data];\n        }, [])\n      : [];\n\n  // count how many possible facets are not valid for the current query\n  // and will be hidden\n  const hiddenFacets =\n    allFacets &&\n    allFacets\n      .map((facet) => facet.data)\n      .filter((facet) => responseFacets.indexOf(facet.toLowerCase()) < 0)\n      .length;\n\n  const setFacet = (value: string) => {\n    const newQuery = props.query;\n\n    if (!newQuery.parameters) {\n      newQuery.parameters = {};\n    }\n\n    if (props.dependencies) {\n      props.dependencies.forEach((facet) => {\n        delete newQuery.facets[facet.meta];\n      });\n    }\n\n    if (value) {\n      newQuery.facets[props.facet.meta] = value;\n    } else {\n      delete newQuery.facets[props.facet.meta];\n    }\n\n    if (props.query.parameters && props.query.parameters.events) {\n      newQuery.parameters.lt_eventDate = currentDateString;\n    } else {\n      newQuery.parameters.ge_eventDate = currentDateString;\n    }\n\n    newQuery.startRank = 1;\n    newQuery.misspelling = null;\n    newQuery.interacted = true;\n\n    props.update.query(newQuery);\n    props.update.results(!props.update.updateState);\n  };\n\n  if (\n    props.facet &&\n    props.facet.values &&\n    hiddenFacets !== undefined &&\n    props.facet.values.length > hiddenFacets\n  ) {\n    return (\n      <div\n        className={`finder__filter finder__select ${\n          currentValue && \"finder__select--selected\"\n        }`}\n      >\n        <label htmlFor={`meta_${props.facet.meta}_sand--${randomNumber}`}>\n          {props.facet.name}\n        </label>\n        <select\n          name={`meta_${props.facet.meta}_sand`}\n          id={`meta_${props.facet.meta}_sand--${randomNumber}`}\n          onChange={(e) => setFacet(e.target.value)}\n          value={currentValue}\n        >\n          <option value=\"\" id={`meta${props.facet.meta}all--${randomNumber}`}>\n            {props.facet.noSelection}\n          </option>\n\n          {props.facet.values.map((value, i) => {\n            const responseFacetDetails =\n              props.responseFacet[0] &&\n              props.responseFacet[0].allValues &&\n              props.responseFacet[0].allValues.filter(\n                (responseFacetValue) =>\n                  responseFacetValue.data.toLowerCase() ===\n                  value.data.toLowerCase(),\n              );\n            if (\n              currentValue.toLowerCase() === value.data.toLowerCase() ||\n              (responseFacetDetails && responseFacetDetails[0])\n            ) {\n              return (\n                <option key={i} value={value.data.toLowerCase()}>\n                  {value.label}\n                  {currentValue !== value.data &&\n                  responseFacetDetails[0] &&\n                  responseFacetDetails[0].count > 0\n                    ? ` (${responseFacetDetails[0].count})`\n                    : \"\"}\n                </option>\n              );\n            } else {\n              return null;\n            }\n          })}\n        </select>\n      </div>\n    );\n  } else {\n    return null;\n  }\n}\n\nFinder__Select.propTypes = {\n  facet: PropTypes.object,\n  query: PropTypes.object,\n  responseFacet: PropTypes.arrayOf(PropTypes.object),\n  update: PropTypes.object,\n  dependencies: PropTypes.arrayOf(PropTypes.object),\n  mobile: PropTypes.bool,\n};\n\nexport default Finder__Select;\n","/**\n * @module patterns/finder/components/finder__filters\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport SelectFilter from \"./finder__select\";\nimport EventSelectFilter from \"./finder__eventSelect\";\nimport CheckboxFilter from \"./finder__checkbox\";\nimport ParamCheckBox from \"./finder__paramCheckbox\";\nimport EventCheckBox from \"./finder__eventCheckbox\";\nimport HiddenInput from \"./finder__hiddenInput\";\nimport TagFilter from \"./finder__tag\";\nimport Reset from \"./finder__reset\";\nimport Sort from \"./finder__sort\";\nimport { gaEvent } from \"../../util\";\nimport type { Filters } from \"../../types/filters/filters\";\nimport type { FacetDetails } from \"../../types/facet\";\n\n/**\n * Predicate for whether a facet should be displayed, if it's dependent on\n * another facet being set.\n *\n * @param {object} facet The facet to potentially display.\n * @param {object} facetMap The facets currently set on the query.\n * @return {bool} - Has any dependency been met\n */\nfunction dependencyMet(\n  facet: FacetDetails,\n  facetMap: { [key: string]: string },\n) {\n  const setFacets = Object.keys(facetMap);\n\n  if (!facet.dependency) {\n    return true;\n  }\n\n  if (\n    setFacets.indexOf(facet.dependency) >= 0 &&\n    facetMap[facet.dependency] !== \"\"\n  ) {\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * Component to update facet values in the query.\n *\n * @param {object} props React props.\n * @returns {object} - React component.\n */\nfunction Finder__Filters(props: Filters) {\n  const totalMatching =\n    props.response &&\n    props.response.summary &&\n    props.response.summary.fullyMatching;\n  const clearFiltersDesktop =\n      !props.updating && Object.keys(props.query.facets).length > 0 ? (\n        <div className=\"finder__filters__reset finder__filters__reset--desktop\">\n          <Reset\n            clear={props.clear}\n            resetSort={false}\n            matrixState={props.matrixState}\n            site={props.config.site || \"city\"} // Ensure site is defined\n          />\n        </div>\n      ) : null,\n    clearFiltersMobile =\n      (!props.updating && Object.keys(props.query.facets).length > 0) ||\n      props.query.sortType !== props.config.sort[0].type ? (\n        <Reset\n          clear={props.clear}\n          resetSort={true}\n          matrixState={props.matrixState}\n          site={props.config.site || \"city\"} // Ensure site is defined\n        />\n      ) : null;\n\n  const sort =\n    !props.matrixState &&\n    props.config.sort.length > 1 &&\n    props.config.displaySort &&\n    totalMatching ? (\n      <div className=\"wrapper--finder__select--sort--mobile\">\n        <Sort\n          key={props.mobile ? \"sort-mobile\" : \"sort-desktop\"}\n          config={props.config}\n          query={props.query}\n          update={props.update}\n        />\n      </div>\n    ) : null;\n\n  const submitSSR = props.matrixState ? (\n    <div className=\"finder__filter__submit\">\n      <button type=\"submit\" className=\"finder__query__submit finder__submit\">\n        <span\n          className=\"fal fa-sharp fa-search finder__query__submit__icon\"\n          aria-hidden=\"true\"\n        />{\" \"}\n        <span className=\"finder__query__submit__text\">Find</span>\n      </button>\n    </div>\n  ) : null;\n\n  return (\n    <div className=\"finder__filters\">\n      <h2 className=\"finder__filters__heading\">\n        <span className=\"finder__filters__heading__text\">\n          <span className=\"far fa-sharp fa-sliders-h icon\" aria-hidden=\"true\" />{\" \"}\n          {`Filter ${props.config.summariseAs && props.config.summariseAs.plural}`}\n        </span>\n        {clearFiltersMobile}\n      </h2>\n\n      <fieldset>\n        {!props.hasMounted && props.query.fixedParameters\n          ? props.query.fixedParameters.map((param) => {\n              return (\n                <HiddenInput\n                  key={param.name}\n                  name={param.name}\n                  value={param.value}\n                />\n              );\n            })\n          : null}\n        <div className=\"wrapper--finder_filters--filters\">\n          {props.config.facetLabels &&\n            props.config.facetLabels.map((facet) => {\n              if (dependencyMet(facet, props.query.facets)) {\n                switch (facet.type) {\n                  case \"eventCheckBox\":\n                    return (\n                      <EventCheckBox\n                        key={facet.meta}\n                        facet={facet}\n                        query={props.query}\n                        update={props.update}\n                        pastEventsResponse={\n                          props.response.extraSearches &&\n                          props.response.extraSearches.past &&\n                          props.response.extraSearches.past.response\n                        }\n                        matrixState={props.matrixState}\n                      />\n                    );\n                  case \"paramCheckBox\":\n                    return (\n                      <ParamCheckBox\n                        key={facet.meta}\n                        facet={facet}\n                        query={props.query}\n                        update={props.update}\n                        pastEventsResponse={\n                          props.response.extraSearches &&\n                          props.response.extraSearches.past &&\n                          props.response.extraSearches.past.response\n                        }\n                      />\n                    );\n                  case \"eventSelect\":\n                    return (\n                      <EventSelectFilter\n                        key={facet.meta}\n                        facet={facet}\n                        query={props.query}\n                        responseFacet={\n                          props.response && props.response.facets\n                            ? props.response.facets.filter(\n                                (funnelbackFacet) =>\n                                  funnelbackFacet.name === facet.funnelbackName,\n                              )\n                            : []\n                        }\n                        update={props.update}\n                        dependencies={\n                          props.config.facetLabels &&\n                          props.config.facetLabels.filter(\n                            (candidate) => candidate.dependency === facet.meta,\n                          )\n                        }\n                        mobile={props.mobile}\n                      />\n                    );\n                  case \"select\":\n                    return (\n                      <SelectFilter\n                        key={facet.meta}\n                        facet={facet}\n                        query={props.query}\n                        responseFacet={\n                          props.response && props.response.facets\n                            ? props.response.facets.filter(\n                                (funnelbackFacet) =>\n                                  funnelbackFacet.name === facet.funnelbackName,\n                              )\n                            : []\n                        }\n                        update={props.update}\n                        dependencies={\n                          props.config.facetLabels &&\n                          props.config.facetLabels.filter(\n                            (candidate) => candidate.dependency === facet.meta,\n                          )\n                        }\n                        mobile={props.mobile}\n                      />\n                    );\n                  case \"checkbox\":\n                    return (\n                      <CheckboxFilter\n                        key={facet.meta}\n                        facet={facet}\n                        query={props.query}\n                        responseFacet={\n                          props.response && props.response.facets\n                            ? props.response.facets.filter(\n                                (funnelbackFacet) =>\n                                  funnelbackFacet.name === facet.funnelbackName,\n                              )\n                            : []\n                        }\n                        update={props.update}\n                        dependencies={\n                          props.config.facetLabels &&\n                          props.config.facetLabels.filter(\n                            (candidate) => candidate.dependency === facet.meta,\n                          )\n                        }\n                        mobile={props.mobile}\n                      />\n                    );\n                  case \"tag\":\n                    return (\n                      <TagFilter\n                        key={facet.meta}\n                        facet={facet}\n                        query={props.query}\n                        responseFacet={\n                          props.response && props.response.facets\n                            ? props.response.facets.filter(\n                                (funnelbackFacet) =>\n                                  funnelbackFacet.name === facet.funnelbackName,\n                              )\n                            : []\n                        }\n                        update={props.update}\n                        dependencies={\n                          props.config.facetLabels &&\n                          props.config.facetLabels.filter(\n                            (candidate) => candidate.dependency === facet.meta,\n                          )\n                        }\n                        matrixState={props.matrixState}\n                      />\n                    );\n                  default:\n                    gaEvent(\n                      \"jsError\",\n                      \"JavaScript error\",\n                      \"finder__filters()\",\n                      \"Unknown filter type in finder__filters.js\",\n                      0,\n                      true,\n                    );\n                }\n              } else {\n                return null;\n              }\n            })}\n          <p className=\"finder__filters__nofilters\">\n            No filters are valid for the current query.\n          </p>\n          {clearFiltersDesktop}\n          {sort}\n          {submitSSR}\n        </div>\n      </fieldset>\n    </div>\n  );\n}\n\nFinder__Filters.propTypes = {\n  config: PropTypes.object,\n  query: PropTypes.object,\n  response: PropTypes.object,\n  update: PropTypes.object,\n  clear: PropTypes.func,\n  mobile: PropTypes.bool,\n  hasMounted: PropTypes.bool,\n  matrixState: PropTypes.bool,\n  updating: PropTypes.bool,\n};\n\nexport default Finder__Filters;\n","/**\n * @module patterns/finder/components/wrapper--finder__filters--mobile\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Filters from \"./finder__filters\";\nimport * as createFocusTrap from \"focus-trap\";\nimport type { FiltersMobiles } from \"../../types/filters/filters\";\n\nimport { enableBodyScroll, disableBodyScroll } from \"../../util\";\n\n/**\n * Render the mobile version of the filters.\n */\nfunction Finder__FiltersMobile(props: FiltersMobiles) {\n  const [display, setDisplay] = useState(false);\n  const [focusTrap, setFocusTrap] = useState<createFocusTrap.FocusTrap | null>(\n    null,\n  );\n  const filtersRef = useRef<HTMLDivElement | null>(null);\n\n  // Set up the focus trap once after mount\n  useEffect(() => {\n    const filtersEl = filtersRef.current;\n    if (!filtersEl) return;\n\n    const trap = createFocusTrap.createFocusTrap(filtersEl, {\n      initialFocus: filtersEl.querySelector(\n        \".wrapper--finder__filters--mobile__apply\",\n      ) as HTMLElement | undefined,\n      onDeactivate: () => setDisplay(false),\n      clickOutsideDeactivates: true,\n    });\n\n    setFocusTrap(trap);\n  }, []);\n\n  // Manage focus trap and scroll behavior based on `display`\n  useEffect(() => {\n    if (!focusTrap) return;\n\n    if (display) {\n      if (!focusTrap.active) focusTrap.activate();\n      disableBodyScroll();\n    } else {\n      if (focusTrap.active) focusTrap.deactivate();\n      enableBodyScroll();\n    }\n  }, [display, focusTrap]);\n\n  const totalMatching =\n    props.response &&\n    props.response.summary &&\n    props.response.summary.totalMatching;\n\n  const result =\n    totalMatching === 1 && props.summariseAs\n      ? props.summariseAs.singular\n      : props.summariseAs && props.summariseAs.plural\n        ? props.summariseAs.plural\n        : null;\n\n  const totalMatchingMessage = totalMatching\n    ? `Show ${totalMatching} ${result}`\n    : \"Close\";\n\n  const filtersCount = props.config.displaySort ? (\n    props.config.sort[0].type !== props.query.sortType ||\n    Object.keys(props.query.facets).length > 0 ? (\n      <span>\n        Filters{\" \"}\n        <span className=\"wrapper--finder__filters--mobile__toggle__count\">\n          (\n          {props.config.sort[0].type !== props.query.sortType\n            ? Object.keys(props.query.facets).length + 1\n            : Object.keys(props.query.facets).length}\n          )\n        </span>\n      </span>\n    ) : (\n      <span>Filter</span>\n    )\n  ) : Object.keys(props.query.facets).length > 0 ? (\n    <span>\n      Filters{\" \"}\n      <span className=\"wrapper--finder__filters--mobile__toggle__count\">\n        (\n        {props.config.sort[0].type !== props.query.sortType\n          ? Object.keys(props.query.facets).length + 1\n          : Object.keys(props.query.facets).length}\n        )\n      </span>\n    </span>\n  ) : (\n    <span>Filter</span>\n  );\n\n  const toggle = display ? null : (\n    <button\n      type=\"button\"\n      className=\"wrapper--finder__filters--mobile__toggle\"\n      aria-haspopup={true}\n      aria-expanded={display}\n      onClick={() => setDisplay(true)}\n      data-filters-applied={\n        Object.keys(props.query.facets).length !== 0 ||\n        (props.config.displaySort &&\n          props.config.sort[0].type !== props.query.sortType)\n      }\n    >\n      <span>\n        <span className=\"far fa-sharp fa-sliders-h icon\" aria-hidden=\"true\" />{\" \"}\n        {filtersCount}\n      </span>\n    </button>\n  );\n\n  return (\n    <div\n      className=\"wrapper--finder__filters\"\n      data-open={display}\n      ref={filtersRef}\n    >\n      {toggle}\n      <div className=\"wrapper--finder__filters--mobile__filters\">\n        <div className=\"wrapper--finder__filters--mobile__filters__content\">\n          <Filters\n            config={props.config}\n            query={props.query}\n            response={props.response}\n            update={props.update}\n            clear={props.clear}\n            mobile={props.mobile}\n            hasMounted={props.hasMounted}\n            matrixState={props.matrixState}\n            updating={props.updating}\n          />\n        </div>\n      </div>\n      <div className=\"wrapper--finder__filters--mobile__apply\">\n        <button\n          type=\"button\"\n          aria-expanded={display}\n          onClick={() => setDisplay(false)}\n          disabled={props.updating}\n        >\n          {Object.keys(props.query.facets).length === 0 ? null : (\n            <span className=\"fa fa-chevron-left icon\"></span>\n          )}\n\n          <span aria-live=\"polite\">\n            {props.updating ? (\n              <>\n                <span\n                  className=\"fas fa-spinner fa-pulse icon\"\n                  aria-hidden=\"true\"\n                />{\" \"}\n                <span className=\"wrapper--finder__filters--mobile__apply__text\">\n                  Updating {props.summariseAs && props.summariseAs.plural}\n                </span>\n              </>\n            ) : (\n              <span className=\"wrapper--finder__filters--mobile__apply__text\">\n                {Object.keys(props.query.facets).length === 0\n                  ? \"Close\"\n                  : totalMatchingMessage}\n              </span>\n            )}\n          </span>\n        </button>\n      </div>\n    </div>\n  );\n}\n\nFinder__FiltersMobile.propTypes = {\n  config: PropTypes.object,\n  query: PropTypes.object,\n  response: PropTypes.object,\n  update: PropTypes.object,\n  clear: PropTypes.func,\n  updating: PropTypes.bool,\n  summariseAs: PropTypes.object,\n  mobile: PropTypes.bool,\n  hasMounted: PropTypes.bool,\n  matrixState: PropTypes.bool,\n};\n\nexport default Finder__FiltersMobile;\n","/**\n * @module patterns/finder/components/finder__checkbox\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { FixedParameters } from \"../../types/query\";\nfunction Finder__hiddenInput(props: FixedParameters) {\n  return (\n    <input\n      type=\"hidden\"\n      id={props.name}\n      name={props.name}\n      value={props.value}\n    />\n  );\n}\n\nFinder__hiddenInput.propTypes = {\n  name: PropTypes.string,\n  value: PropTypes.string,\n};\n\nexport default Finder__hiddenInput;\n","/**\n * @module patterns/finder/components/finder__checkbox\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { ParamCheckBox } from \"../../types/filters/filters\";\n\nfunction Finder__paramCheckbox(props: ParamCheckBox) {\n  const stringLength = 16,\n    stringOffset = -4,\n    randomNumber = Math.random().toString(stringLength).slice(stringOffset),\n    pastEventsResponseTotal =\n      props.pastEventsResponse &&\n      props.pastEventsResponse.resultPacket.resultsSummary &&\n      props.pastEventsResponse.resultPacket.resultsSummary.fullyMatching,\n    pastEventsPartialResponseTotal =\n      props.pastEventsResponse &&\n      props.pastEventsResponse.resultPacket.resultsSummary &&\n      props.pastEventsResponse.resultPacket.resultsSummary.partiallyMatching,\n    toggleChecked =\n      props.query.parameters && props.facet.meta in props.query.parameters,\n    totalText = pastEventsResponseTotal\n      ? pastEventsResponseTotal\n      : pastEventsPartialResponseTotal\n        ? pastEventsPartialResponseTotal\n        : 0;\n\n  const toggleFacet = () => {\n    const newQuery = {\n      ...props.query,\n      parameters: { ...(props.query.parameters ?? {}) },\n    };\n\n    if (toggleChecked) {\n      delete newQuery.parameters[props.facet.meta];\n    } else if (props.facet.checkedValue !== undefined) {\n      newQuery.parameters[props.facet.meta] = props.facet.checkedValue;\n    }\n\n    newQuery.startRank = 1;\n    newQuery.misspelling = null;\n    newQuery.interacted = true;\n\n    props.update.query(newQuery);\n    props.update.results(!props.update.updateState);\n  };\n\n  if (totalText > 0) {\n    return (\n      <div className=\"finder__filter finder__checkbox\">\n        <input\n          type=\"checkbox\"\n          id={`${props.facet.funnelbackName}--${randomNumber}`}\n          name={props.facet.meta}\n          value={(props.facet.checkedValue ?? \"\") as string}\n          onChange={() => toggleFacet()}\n          checked={toggleChecked}\n        />\n        <div\n          className=\"finder__checkbox__indicator finder__checkbox__indicator\"\n          aria-hidden=\"true\"\n          onClick={() => toggleFacet()}\n        >\n          {toggleChecked ? (\n            <span className=\"fa fa-fw fas fa-check icon\"></span>\n          ) : null}\n        </div>\n        <label\n          className=\"finder__filters__label--always\"\n          htmlFor={`${props.facet.funnelbackName}--${randomNumber}`}\n        >\n          {props.facet.name}\n          {!toggleChecked && totalText && \" (\" + totalText + \")\"}\n        </label>\n      </div>\n    );\n  } else {\n    return null;\n  }\n}\n\nFinder__paramCheckbox.propTypes = {\n  facet: PropTypes.object,\n  query: PropTypes.object,\n  pastEventsResponse: PropTypes.object,\n  update: PropTypes.object,\n  dependencies: PropTypes.arrayOf(PropTypes.object),\n};\n\nexport default Finder__paramCheckbox;\n","/**\n * @module patterns/finder/components/filters/finder__reset\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { Reset } from \"../../types/filters/filters\";\n\n/**\n * Clear input button.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Reset(props: Reset) {\n  const resetClassName = props.site\n    ? \"fa fa-times icon\"\n    : \"fa-sharp fa-solid fa-xmark icon\";\n  if (props.matrixState) {\n    return (\n      <a href=\"?\" className=\"finder__reset\" type=\"button\">\n        <span className={resetClassName} />\n        <span className=\"finder__reset__text\">Reset</span>\n      </a>\n    );\n  } else {\n    return (\n      <button\n        className=\"finder__reset\"\n        type=\"button\"\n        onClick={() => {\n          props.clear(props.resetSort);\n        }}\n      >\n        <span className={resetClassName} />\n        <span className=\"finder__reset__text\">Reset</span>\n      </button>\n    );\n  }\n}\n\nFinder__Reset.propTypes = {\n  clear: PropTypes.func,\n  resetSort: PropTypes.bool,\n  matrixState: PropTypes.bool,\n};\n\nexport default Finder__Reset;\n","/**<\n * @module patterns/finder/components/finder__select\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { Select } from \"../../types/filters/filters\";\n\nfunction Finder__Select(props: Select) {\n  const randomNumber = props.mobile ? \"mobile\" : \"desktop\",\n    currentValue = (props.facet && props.query.facets[props.facet.meta]) || \"\";\n\n  // reduce the facet configuration to an array of all possible values for\n  // the facet\n  const allFacets =\n    props.facet &&\n    props.facet.values &&\n    props.facet.values.reduce((acc, data) => {\n      return [...acc, data];\n    }, []);\n\n  // reduce the Funnelback response for the facet to an array of valid\n  // values for the current query\n  const responseFacets =\n    props.responseFacet[0] && props.responseFacet[0].allValues\n      ? props.responseFacet[0].allValues.reduce((acc, data) => {\n          return [...acc, data.data];\n        }, [])\n      : [];\n\n  // count how many possible facets are not valid for the current query\n  // and will be hidden\n  const hiddenFacets: number = allFacets\n    ? allFacets\n        .map((facet) => facet.data)\n        .filter((facet) => responseFacets.indexOf(facet.toLowerCase()) < 0)\n        .length\n    : 0;\n\n  const setFacet = (value: string) => {\n    const newQuery = {\n      ...props.query,\n      facets: { ...props.query.facets },\n    };\n\n    if (props.dependencies) {\n      props.dependencies.forEach((facet) => {\n        delete newQuery.facets[facet.meta];\n      });\n    }\n\n\n    if (value) {\n      newQuery.facets[props.facet.meta] = value;\n    } else{\n      delete newQuery.facets[props.facet.meta];\n    }\n\n\n    newQuery.startRank = 1;\n    newQuery.misspelling = null;\n    newQuery.interacted = true;\n\n    props.update.query(newQuery);\n    props.update.results(!props.update.updateState);\n  };\n\n  if (\n    props.facet &&\n    props.facet.values &&\n    props.facet.values.length > hiddenFacets\n  ) {\n    return (\n      <div\n        className={`finder__filter finder__select ${\n          currentValue && \"finder__select--selected\"\n        }`}\n      >\n        <label htmlFor={`meta_${props.facet.meta}_sand--${randomNumber}`}>\n          {props.facet.name}\n        </label>\n        <select\n          name={`meta_${props.facet.meta}_sand`}\n          id={`meta_${props.facet.meta}_sand--${randomNumber}`}\n          onChange={(e) => setFacet(e.target.value)}\n          value={currentValue}\n        >\n          <option value=\"\" id={`meta${props.facet.meta}all--${randomNumber}`}>\n            {props.facet.noSelection}\n          </option>\n\n          {props.facet.values.map((value, i) => {\n            const responseFacetDetails =\n              props.responseFacet[0] &&\n              props.responseFacet[0].allValues &&\n              props.responseFacet[0].allValues.filter(\n                (responseFacetValue) =>\n                  responseFacetValue.data.toLowerCase() ===\n                  value.data.toLowerCase(),\n              );\n            if (\n              currentValue.toLowerCase() === value.data.toLowerCase() ||\n              (responseFacetDetails && responseFacetDetails[0])\n            ) {\n              return (\n                <option key={i} value={value.data.toLowerCase()}>\n                  {value.label}\n                  {currentValue !== value.data &&\n                  responseFacetDetails[0] &&\n                  responseFacetDetails[0].count > 0\n                    ? ` (${responseFacetDetails[0].count})`\n                    : \"\"}\n                </option>\n              );\n            } else {\n              return null;\n            }\n          })}\n        </select>\n      </div>\n    );\n  } else {\n    return null;\n  }\n}\n\nFinder__Select.propTypes = {\n  facet: PropTypes.object,\n  query: PropTypes.object,\n  responseFacet: PropTypes.arrayOf(PropTypes.object),\n  update: PropTypes.object,\n  dependencies: PropTypes.arrayOf(PropTypes.object),\n  mobile: PropTypes.bool,\n};\n\nexport default Finder__Select;\n","/**\n * @module patterns/finder/components/finder__sort\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { Sort } from \"../../types/filters/filters\";\n\n/**\n * Component to change the sort order of the query.\n *\n * @param {object} props React props.\n * @returns {object} - React component.\n */\nfunction Finder__Sort(props: Sort) {\n  const stringLength = 16,\n    stringOffset = -4,\n    randomNumber = Math.random().toString(stringLength).slice(stringOffset);\n\n  const setSort = (type: string) => {\n    const newQuery = props.query;\n\n    newQuery.sortType = type;\n    newQuery.startRank = 1;\n    newQuery.misspelling = null;\n    newQuery.interacted = true;\n\n    props.update.query(newQuery);\n    props.update.results(!props.update.updateState);\n  };\n\n  const validSorts = props.config.sort.filter((sortType) =>\n    sortType.type === \"\"\n      ? props.query.query !== \"\" ||\n        Object.keys(props.query.facets).length > 0 ||\n        props.query.sortType === \"\"\n        ? true\n        : false\n      : true,\n  );\n\n  return validSorts.length > 1 ? (\n    <div\n      className={`finder__select--sort finder__select${\n        props.query.sortType !== props.config.sort[0].type\n          ? \" finder__select--selected\"\n          : \"\"\n      }`}\n    >\n      <label\n        className=\"finder__select__overline\"\n        htmlFor={`sort--${randomNumber}`}\n      >\n        Sort by\n      </label>\n      <select\n        name=\"sort\"\n        id={`sort--${randomNumber}`}\n        onChange={(e) => setSort(e.target.value)}\n        value={props.query.sortType}\n      >\n        {validSorts.map((sortType, i) => {\n          return (\n            <option key={i} value={sortType.type}>\n              {sortType.label}\n            </option>\n          );\n        })}\n      </select>\n    </div>\n  ) : null;\n}\n\nFinder__Sort.propTypes = {\n  config: PropTypes.object,\n  query: PropTypes.object,\n  update: PropTypes.object,\n};\n\nexport default Finder__Sort;\n","/**\n * @module patterns/finder/components/finder__tag\n * @author Web Development\n * @copyright City St George's, University of London 2020\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { hyperLink } from \"../../logic/hyper-link\";\nimport useHasMounted from \"../../logic/has-mounted\";\nimport type { Tag } from \"../../types/filters/filters\";\n\nfunction Finder__Tag(props: Tag) {\n  const hasMounted = useHasMounted();\n\n  if (!hasMounted) return null;\n\n  // reduce the facet configuration to an array of all possible values for\n  // the facet\n  const allFacets =\n    props.facet &&\n    props.facet.values &&\n    props.facet.values.reduce((acc, data) => {\n      return [...acc, data];\n    }, []);\n\n  // reduce the Funnelback response for the facet to an array of valid\n  // values for the current query\n  const responseFacets =\n    props.responseFacet[0] && props.responseFacet[0].allValues\n      ? props.responseFacet[0].allValues.reduce((acc, data) => {\n          return [...acc, data.data];\n        }, [])\n      : [];\n\n  // count how many possible facets are not valid for the current query\n  // and will be hidden\n  const hiddenFacets =\n    allFacets &&\n    allFacets\n      .map((facet) => facet.data)\n      .filter((facet) => responseFacets.indexOf(facet.toLowerCase()) < 0)\n      .length;\n\n  const deleteFacet = () => {\n    const newQuery = {\n      ...props.query,\n      facets: { ...props.query.facets },\n    };\n\n    if (props.dependencies) {\n      props.dependencies.forEach((facet) => {\n        delete newQuery.facets[facet.meta];\n      });\n    }\n\n    delete newQuery.facets[props.facet.meta];\n\n    newQuery.startRank = 1;\n    newQuery.misspelling = null;\n    newQuery.interacted = true;\n\n    props.update.query(newQuery);\n    props.update.results(!props.update.updateState);\n  };\n\n  const labelText = props.query.facets[props.facet.meta] &&\n    props.facet.values &&\n    hiddenFacets &&\n    props.facet.values.length >= hiddenFacets && (\n      <React.Fragment>\n        <span\n          className=\"fa-sharp fa-solid fa-xmark icon\"\n          aria-hidden=\"true\"\n        ></span>\n        <span className=\"finder__tag__text\">\n          <span className=\"sr-only\">Remove filter for </span>\n          {props.facet.name}:{\" \"}\n          {\n            props.facet.values.filter(\n              (value) =>\n                value.data.toLowerCase() ===\n                props.query.facets[props.facet.meta].toLowerCase(),\n            )[0].label\n          }\n        </span>\n      </React.Fragment>\n    );\n\n  const ssrHiddenField =\n    props.matrixState && props.query.facets[props.facet.meta] ? (\n      <input\n        type=\"hidden\"\n        name={`meta_${props.facet.meta}_sand`}\n        value={props.query.facets[props.facet.meta]}\n      />\n    ) : null;\n\n  if (\n    props.facet.values &&\n    hiddenFacets &&\n    props.facet.values.length >= hiddenFacets &&\n    props.query.facets[props.facet.meta]\n  ) {\n    return (\n      <div className=\"finder__filter finder__tag\">\n        {ssrHiddenField}\n        {props.matrixState && props.query.facets[props.facet.meta] ? (\n          <a href={hyperLink(props.query, props.facet)}>{labelText}</a>\n        ) : (\n          <button onClick={() => deleteFacet()} type=\"button\">\n            {labelText}\n          </button>\n        )}\n      </div>\n    );\n  } else {\n    return null;\n  }\n}\n\nFinder__Tag.propTypes = {\n  facet: PropTypes.object,\n  query: PropTypes.object,\n  responseFacet: PropTypes.arrayOf(PropTypes.object),\n  update: PropTypes.object,\n  dependencies: PropTypes.arrayOf(PropTypes.object),\n  matrixState: PropTypes.bool,\n};\n\nexport default Finder__Tag;\n","/**\n * @module patterns/finder/components/finder__clear\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { Clear, ResetSort } from \"../../types/update\";\n\n/**\n * Clear input button.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Clear(props: Clear & { resetSort?: ResetSort }) {\n  const clearIconCLassName =\n    props.site === \"bayes\"\n      ? \"fa fa-times icon\"\n      : \"fa-sharp fa-solid fa-xmark icon\";\n  return (\n    <button\n      className=\"finder__clear\"\n      type=\"button\"\n      onClick={() => {\n        props.clear(props.resetSort);\n      }}\n    >\n      <span className={clearIconCLassName} />\n      <span className=\"finder__clear__text\">Clear query</span>\n    </button>\n  );\n}\n\nFinder__Clear.propTypes = {\n  clear: PropTypes.func,\n  resetSort: PropTypes.bool,\n};\n\nexport default Finder__Clear;\n","/**\n * @module patterns/finder/components/finder__query\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { CancelTokenSource } from \"axios\";\nimport { suggest } from \"../../logic/funnelback\";\nimport Clear from \"./finder__clear\";\nimport useHasMounted from \"../../logic/has-mounted\"; //  added\nimport type { QueryInput } from \"../../types/query/query\";\n\nconst maximumSuggestions = 5;\nconst escapeKey = \"Escape\",\n  endKey = \"End\",\n  homeKey = \"Home\",\n  arrowUp = \"ArrowUp\",\n  arrowDown = \"ArrowDown\";\n\nfunction highlightQueryTerm(suggestion: string, partialQuery: string) {\n  return (\n    <span>\n      <span className=\"sr-only\">{suggestion}</span>\n      <span aria-hidden=\"true\">\n        <span className=\"finder__suggestion\">\n          {suggestion.slice(\n            suggestion.indexOf(partialQuery.toLowerCase()),\n            suggestion.indexOf(partialQuery.toLowerCase()) +\n              partialQuery.length,\n          )}\n        </span>\n        {suggestion.slice(\n          suggestion.indexOf(partialQuery.toLowerCase()) + partialQuery.length,\n        )}\n      </span>\n    </span>\n  );\n}\n\nfunction Finder__Query(props: QueryInput) {\n  const searchIconClassName =\n    props.config.site && props.config.site === \"bayes\"\n      ? \"fa fa-search fa-lg\"\n      : \"fal fa-sharp fa-search\";\n\n  const hasMounted = useHasMounted(); //  detect client vs server\n\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [partialQuery, setPartialQuery] = useState(props.query.query || \"\");\n  const [suggestions, setSuggestions] = useState<string[]>([]);\n  const [call, setCall] = useState<CancelTokenSource | null>(null);\n  const [inputId] = useState(\"finder--\" + props.query.collection);\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const [activeSuggestionID, setActiveSuggestionID] = useState(\"\");\n\n  useEffect(() => {\n    setPartialQuery(props.query.query);\n  }, [props.query.query, props.updating]);\n\n  useEffect(() => {\n    return () => {\n      if (call) call.cancel();\n    };\n  }, [call]);\n\n  function focusInput() {\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  }\n\n  const clearQuery = () => {\n    if (call) call.cancel();\n\n    setPartialQuery(\"\");\n    setSuggestions([]);\n    focusInput();\n\n    const newQuery = { ...props.query };\n    newQuery.misspelling = null;\n    newQuery.query = \"\";\n    newQuery.sortType = props.config.sort[0].type;\n    newQuery.startRank = 1;\n    newQuery.interacted = true;\n\n    props.update.query(newQuery);\n    props.update.results(!props.update.updateState);\n  };\n\n  const submitForm = (query?: string) => {\n    if (!query) return;\n\n    if (call) call.cancel();\n    setSuggestions([]);\n\n    const newQuery = props.query;\n\n    newQuery.misspelling = null;\n    newQuery.query = query ? query : partialQuery ? partialQuery : \"\";\n    newQuery.sortType = partialQuery ? \"\" : props.config.sort[0].type;\n    newQuery.startRank = 1;\n    newQuery.interacted = true;\n\n    props.update.query(newQuery);\n    props.update.results(!props.update.updateState);\n  };\n\n  const clear = partialQuery && (\n    <Clear\n      clear={() => {\n        const value = inputRef.current ? inputRef.current.value : \"\";\n\n        if(inputRef.current)  inputRef.current.value = \"\";\n        setPartialQuery(\"\");\n\n\n        if(value === props.query.query){\n          clearQuery();\n        }\n        \n      }}\n      site={props.config.site || \"city\"}\n    />\n  );\n\n  const submitSuggestion = (suggestion: string) => {\n    setShowSuggestions(false);\n    setSuggestions([]);\n    focusInput();\n    submitForm(suggestion);\n  };\n  const suggestionsList = suggestions && suggestions.length > 0 && (\n    <ul\n      role=\"listbox\"\n      aria-label=\"Search suggestions\"\n      aria-activedescendant={activeSuggestionID}\n      className={\n        showSuggestions\n          ? \"finder__query__suggestions show\"\n          : \"finder__query__suggestions hide\"\n      }\n    >\n      {[...new Set(suggestions)]\n        .slice(0, maximumSuggestions)\n        .map((suggestion, i) => (\n          <li key={suggestion} role=\"option\" id={inputId + \"--\" + i}>\n            <button\n              type=\"button\"\n              onBlur={() => {\n                setActiveSuggestionID(\"\");\n                setShowSuggestions(false);\n              }}\n              onFocus={() => setShowSuggestions(true)}\n              onMouseDown={() => submitSuggestion(suggestion)}\n              onClick={() => submitSuggestion(suggestion)}\n              onKeyDown={(e) => {\n                switch (e.key) {\n                  case escapeKey:\n                    e.currentTarget\n                      .closest(\".finder__query\")\n                      ?.querySelector(\"input\")\n                      ?.focus();\n                    setSuggestions([]);\n                    setActiveSuggestionID(\"\");\n                    break;\n                  case arrowUp:\n                    e.preventDefault();\n                    e.currentTarget.parentElement?.previousElementSibling\n                      ?.querySelector(\"button\")\n                      ?.focus();\n                    break;\n                  case arrowDown:\n                    e.preventDefault();\n                    e.currentTarget.parentElement?.nextElementSibling\n                      ?.querySelector(\"button\")\n                      ?.focus();\n                    break;\n                  case homeKey: {\n                    e.preventDefault();\n                    const first = e.currentTarget.closest(\"ul\")?.firstChild;\n                    if (first instanceof Element) {\n                      first.querySelector(\"button\")?.focus();\n                    }\n                    break;\n                  }\n                  case endKey: {\n                    e.preventDefault();\n                    const last = e.currentTarget.closest(\"ul\")?.lastChild;\n                    if (last instanceof Element) {\n                      last.querySelector(\"button\")?.focus();\n                    }\n                    break;\n                  }\n                }\n              }}\n            >\n              {highlightQueryTerm(suggestion, partialQuery)}\n            </button>\n          </li>\n        ))}\n    </ul>\n  );\n\n  //  Server-side fallback\n  if (!hasMounted) {\n    return (\n      <fieldset className=\"finder__query\">\n        <div>\n          <div className=\"finder__query__input\">\n            <label className=\"sr-only\" htmlFor={inputId}>\n              {`Search ${props.config.summariseAs && props.config.summariseAs.plural}`}\n            </label>\n            <input\n              type=\"text\"\n              id={inputId}\n              name=\"query\"\n              className=\"finder__query-input\"\n              placeholder={props.config.placeholder}\n              defaultValue={partialQuery}\n            />\n          </div>\n          <button type=\"submit\" className=\"finder__query__submit\">\n            <span\n              className=\"fal fa-sharp fa-search finder__query__submit__icon\"\n              aria-hidden=\"true\"\n            />\n            <span className=\"finder__query__submit__text\">Find</span>\n          </button>\n        </div>\n      </fieldset>\n    );\n  }\n\n  //  Interactive version after hydration\n  return (\n    <fieldset className=\"finder__query\">\n      <div>\n        <div className=\"finder__query__input\">\n          <div className=\"finder__query__icon--wrapper\">\n            <span\n              className={`finder__icon ${searchIconClassName} icon`}\n              aria-hidden=\"true\"\n            ></span>\n          </div>\n          <label className=\"sr-only\" htmlFor={inputId}>\n            {`Search ${props.config.summariseAs && props.config.summariseAs.plural}`}\n          </label>\n          <input\n            autoComplete=\"off\"\n            id={inputId}\n            name=\"query\"\n            placeholder={props.config.placeholder}\n            ref={inputRef}\n            type=\"text\"\n            value={partialQuery}\n            onKeyDown={(e) => {\n              if (e.key === escapeKey) clearQuery();\n              else if (e.key === arrowDown && suggestions.length > 0) {\n                e.preventDefault();\n                const button = e.currentTarget.parentElement?.querySelector(\n                  \".finder__query__suggestions button\",\n                ) as HTMLButtonElement | null;\n\n                button?.focus();\n                setActiveSuggestionID(\n                  e.currentTarget.parentElement?.querySelector(\n                    \".finder__query__suggestions li\",\n                  )?.id || \"\",\n                );\n              }\n            }}\n            onFocus={() => setShowSuggestions(true)}\n            onBlur={() => setShowSuggestions(false)}\n            onChange={(e) => {\n              const val = e.target.value;\n              setPartialQuery(val);\n              setSuggestions([]);\n              if (call) call.cancel();\n\n              if (val) {\n                const [promise, newCall] = suggest(\n                  props.query.collection,\n                  val,\n                  props.config.site ? props.config.site : undefined,\n                ) as [Promise<string[]>, CancelTokenSource];\n                setCall(newCall);\n                promise\n                  .then((data) => setSuggestions(data))\n                  .catch(() => setSuggestions([]));\n              } else {\n                setSuggestions([]);\n              }\n            }}\n          />\n          {suggestionsList}\n          {clear}\n        </div>\n        <button\n          type=\"submit\"\n          className=\"finder__query__submit\"\n          onClick={() => submitForm(inputRef.current ? inputRef.current.value : \"\")}\n        >\n          <span\n            className={`${searchIconClassName} finder__query__submit__icon`}\n            aria-hidden=\"true\"\n          />\n          <span className=\"finder__query__submit__text\">Find</span>\n        </button>\n      </div>\n    </fieldset>\n  );\n}\n\nFinder__Query.propTypes = {\n  config: PropTypes.object,\n  query: PropTypes.object,\n  update: PropTypes.object,\n  updating: PropTypes.bool,\n};\n\nexport default Finder__Query;\n","/**\n * @module patterns/finder/components/results/finder__announcement\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport DOMPurify from \"dompurify\";\nimport type { Announcement } from \"../../types/results/results\";\n\n/**\n * Renders the announcement box\n *\n * @param {object} props React props.\n * @returns {object} - React component.\n */\n\nfunction Finder__Announcement(props: Announcement) {\n  const clean = DOMPurify.sanitize(props.announcement, {\n    ALLOWED_TAGS: [\"strong\", \"p\", \"h2\", \"h3\", \"a\"],\n  });\n\n  return (\n    <div className=\"finder__results__announcement\">\n      <p dangerouslySetInnerHTML={{ __html: clean }} />\n    </div>\n  );\n}\n\nFinder__Announcement.propTypes = {\n  announcement: PropTypes.string,\n};\n\nexport default Finder__Announcement;\n","/**\n * @module patterns/finder/components/finder__didyoumean\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { DidYouMean } from \"../../types/results/results\";\n\n/**\n * Returns a Funnelback spelling suggestion as a button to update the query.\n *\n * @param {object} props React props.\n * @returns {object} - React component.\n */\nfunction Finder__DidYouMean(props: DidYouMean) {\n  const suggestion = props.response.spell?.text?.split(/\\s/)[0].trim() ?? \"\";\n\n  const didyoumean = props.query.misspelling ? (\n    <p className=\"finder__results__didyoumean\">\n      No {props.summariseAs && props.summariseAs.plural} found for \n      {props.query.misspelling}. Searching instead for {props.query.query}.\n    </p>\n  ) : (\n    <p className=\"finder__results__didyoumean\">\n      Did you mean{\" \"}\n      <button\n        type=\"button\"\n        className=\"finder__didyoumean__button\"\n        onClick={() => {\n          const newQuery = { ...props.query }; // clone the query object\n          newQuery.query = suggestion;\n          newQuery.startRank = 1;\n          newQuery.misspelling = null;\n          newQuery.interacted = true;\n          newQuery.facets = {};\n          props.update.query(newQuery);\n          props.update.results(!props.update.updateState);\n        }}\n      >\n        {suggestion}\n      </button>\n      ?\n    </p>\n  );\n\n  return didyoumean;\n}\n\nFinder__DidYouMean.propTypes = {\n  query: PropTypes.object,\n  response: PropTypes.object,\n  summariseAs: PropTypes.object,\n  update: PropTypes.object,\n};\n\nexport default Finder__DidYouMean;\n","/**\n * @module patterns/finder/components/finder__pagination\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { hyperLink } from \"../../logic/hyper-link\";\nimport type { Pagination } from \"../../types/results/results\";\n\n/**\n * Renders standard pagination controls patttern for the results.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Pagination(props: Pagination) {\n  const numberOfPages =\n      props.totalMatching &&\n      props.numRanks &&\n      Math.ceil(props.totalMatching / props.numRanks),\n    currentPage =\n      props.currStart &&\n      props.numRanks &&\n      Math.ceil(props.currStart / props.numRanks),\n    pages = [];\n\n  const changePage = (pageNumber: number) => {\n    const newStartRank =\n        props.numRanks && 1 + (pageNumber - 1) * props.numRanks,\n      newQuery = props.query;\n\n    newQuery.startRank = newStartRank;\n    newQuery.misspelling = null;\n    newQuery.interacted = true;\n\n    props.update.query(newQuery);\n    props.update.results(!props.update.updateState);\n  };\n\n  pages.push(\n    currentPage === 1 ? (\n      <span key=\"previousPage\" className=\"pagination__controls__button--prev\">\n        <span>Previous page</span>\n      </span>\n    ) : (\n      <a\n        className=\"pagination__controls__button--prev\"\n        key=\"prev\"\n        role=\"button\"\n        onClick={(e) => {\n          e.preventDefault();\n          if(currentPage){\n            changePage(currentPage - 1);\n          }\n        }}\n        href={hyperLink(props.query, null, currentPage - 1, props.numRanks)}\n      >\n        <span>Previous page {currentPage}</span>\n      </a>\n    ),\n  );\n\n  for (let page = 1; page <= numberOfPages; page++) {\n    let className;\n    switch (page - numberOfPages) {\n      case 0:\n        className =\n          \"pagination__controls__element pagination__controls__button pagination__controls__button--last\";\n        break;\n      case -1:\n        className =\n          \"pagination__controls__element pagination__controls__button pagination__controls__button--penultimate\";\n        break;\n      default:\n        className =\n          \"pagination__controls__element pagination__controls__button\";\n    }\n\n    if (page === currentPage) {\n      pages.push(\n                  <span\n                    aria-current={page === currentPage ? \"page\" : undefined} \n                    className={className}\n                    data-page={page}\n                    data-proximity={Math.abs(page - currentPage)}\n                    key={page}\n                    aria-disabled={page === currentPage ? true : false}\n                  >\n                    {page}\n                  </span>\n                );\n    } else{\n      pages.push(\n                  <a\n                    aria-current={page === currentPage ? \"page\" : undefined}\n                    aria-expanded={page === currentPage ? true : false}\n                    aria-label={`Open page ${page}`}\n                    className={className}\n                    data-page={page}\n                    data-proximity={Math.abs(page - currentPage)}\n                    key={page}\n                    role=\"button\"\n                    aria-disabled={page === currentPage ? true : false}\n                    onClick={(e) => {\n                      e.preventDefault();\n                      changePage(page);\n                    }}\n                    href={hyperLink(props.query, null, page, props.numRanks)}\n                  >\n                    <span>{page}</span>\n                  </a>,\n                );\n    }\n\n    if (page === 1) {\n      pages.push(\n        <span\n          key=\"firstEllipsis\"\n          className=\"pagination__controls__element pagination__controls__ellipsis pagination__controls__ellipsis--first\"\n        >\n          <span></span>\n        </span>,\n      );\n    } else if (page === numberOfPages - 1) {\n      pages.push(\n        <span\n          key=\"lastEllipsis\"\n          className=\"pagination__controls__element pagination__controls__ellipsis pagination__controls__ellipsis--last\"\n        >\n          <span></span>\n        </span>,\n      );\n    }\n  }\n\n  pages.push(\n    currentPage === numberOfPages ? (\n      <span key=\"nextPage\" className=\"pagination__controls__button--next\">\n        <span>Next page</span>\n      </span>\n    ) : (\n      <a\n        className=\"pagination__controls__button--next\"\n        key=\"next\"\n        role=\"button\"\n        aria-disabled={currentPage === numberOfPages ? true : false}\n        onClick={(e) => {\n          e.preventDefault();\n          if(currentPage !== numberOfPages){\n            changePage(currentPage + 1);\n          }\n        }}\n        href={hyperLink(props.query, null, currentPage + 1, props.numRanks)}\n      >\n        <span>Next page</span>\n      </a>\n    ),\n  );\n\n  return (\n    <div className=\"pagination__wrapper\">\n      <nav className=\"pagination__controls\" data-pagecount={numberOfPages}>\n        {pages}\n      </nav>\n    </div>\n  );\n}\n\nFinder__Pagination.propTypes = {\n  currStart: PropTypes.number,\n  query: PropTypes.object,\n  numRanks: PropTypes.number,\n  totalMatching: PropTypes.number,\n  update: PropTypes.object,\n};\n\nexport default Finder__Pagination;\n","/**\n * @module patterns/finder/components/finder__results\n * @author Web Development\n * @copyright City, University of London 2021\n */\n\nimport BestBet from \"../cards/finder__results__bestbet\";\nimport Card from \"../cards/finder__results__card\";\nimport DidYouMean from \"./finder__didyoumean\";\nimport Pagination from \"./finder__pagination\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport Summary from \"./finder__results__summary\";\nimport Announcement from \"./finder__announcement\";\nimport type { FinderResults } from \"../../types/results/results\";\n\n/**\n * Render Funnelback results.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results(props: FinderResults) {\n  const updating = (\n    <p className=\"finder__results__updating\" aria-live=\"polite\">\n      <span className=\"fas fa-spinner fa-pulse icon\" aria-hidden=\"true\" />{\" \"}\n      <span>Updating {props.summariseAs && props.summariseAs.plural}</span>\n    </p>\n  );\n\n  const resultsClass =\n    \"resultsVariant\" in props.config\n      ? `finder__results__list finder__results__list--${props.config.resultsVariant}`\n      : \"finder__results__list\";\n\n  if (props.response) {\n    const summary = (\n      <Summary\n        clear={props.clear}\n        config={props.config}\n        currEnd={props.response.summary.currEnd}\n        currStart={props.response.summary.currStart}\n        numRanks={props.response.summary.numRanks}\n        query={props.query}\n        summariseAs={props.summariseAs}\n        totalMatching={props.response.summary.totalMatching}\n        update={props.update}\n        summaryHeadingRef={props.summaryHeadingRef}\n      />\n    );\n\n    const announcement = props.config.announcement && (\n      <Announcement announcement={props.config.announcement} />\n    );\n\n    const didYouMean = (props.query.misspelling || props.response.spell) && (\n      <DidYouMean\n        query={props.query}\n        summariseAs={props.summariseAs}\n        response={props.response}\n        update={props.update}\n      />\n    );\n\n    // if we have more results than will fit on a single page, we need\n    // pagination\n    const pagination = props.response.summary.totalMatching >\n      props.response.summary.numRanks &&\n      props.response.summary.numRanks && (\n        <Pagination\n          currStart={props.response.summary.currStart}\n          numRanks={props.response.summary.numRanks}\n          query={props.query}\n          totalMatching={props.response.summary.totalMatching}\n          update={props.update}\n        />\n      );\n      \n    const results =\n        (props.response.bestBets && props.response.bestBets.length > 0) ||\n        props.response.results.length > 0 ? (\n          <ol start={props.response.summary.currStart} className={resultsClass}>\n            {props.response.bestBets &&\n              props.response.bestBets.map((card, i) => (\n                <BestBet details={card} key={`best-bet__${i}`} />\n              ))}\n\n            {props.response.results.map((card) => (\n              <Card\n                bestBets={false}\n                details={card}\n                key={card.docNum}\n                type={props.type}\n                query={props.query}\n                defaultImage={props.config.defaultImage}\n              />\n            ))}\n          </ol>\n        ) : null;\n\n    // render either the results, or a spinner while we wait for Funnelback\n    const resultsContent = props.updating ? (\n      <React.Fragment>{updating}</React.Fragment>\n    ) : (\n      <React.Fragment>\n        {didYouMean}\n        {announcement}\n        {summary}\n        {results}\n        {pagination}\n      </React.Fragment>\n    );\n    return <div className=\"finder__results\">{resultsContent}</div>;\n  } else {\n    return <div className=\"finder__results\">{updating}</div>;\n  }\n}\n\nFinder__Results.propTypes = {\n  clear: PropTypes.func,\n  query: PropTypes.object,\n  response: PropTypes.object,\n  summariseAs: PropTypes.object,\n  type: PropTypes.string,\n  update: PropTypes.object,\n  updating: PropTypes.bool,\n  config: PropTypes.object,\n  promo: PropTypes.array,\n  pastEventsQuery: PropTypes.object,\n  pastEventsResponse: PropTypes.object,\n  pastEventsUpdate: PropTypes.object,\n  matrixState: PropTypes.object,\n};\n\nexport default Finder__Results;\n","/**\n * @module patterns/finder/components/finder__results__summary\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport Sort from \"../filters/finder__sort\";\nimport type { SummaryResults } from \"../../types/results/results\";\n\n/**\n * Results heading, summarising the response.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Summary(props: SummaryResults) {\n  const result =\n      props.totalMatching === 1\n        ? props.summariseAs.singular\n        : props.summariseAs.plural,\n    formatter = new Intl.NumberFormat(\"en-GB\"),\n    sort =\n      props.config.sort.length > 1 && props.config.displaySort ? (\n        <div className=\"wrapper--finder__select--sort--desktop\">\n          <Sort\n            config={props.config}\n            query={props.query}\n            update={props.update}\n          />\n        </div>\n      ) : null;\n\n  if (props.totalMatching === 0) {\n    return (\n      <div\n        className=\"finder__results__summary finder__results__summary--noresults\"\n        ref={props.summaryHeadingRef}\n      >\n        <h2 className=\"finder__results__summary__heading\">\n          Your search did not match any {props.summariseAs.plural}.\n        </h2>\n        <p>Suggestions:</p>\n        <ul>\n          <li>Make sure that all words are spelled correctly</li>\n          <li>Try different keywords</li>\n          <li>Try more general keywords</li>\n          <li>Try fewer keywords</li>\n          <li>Try fewer filters</li>\n          {Object.keys(props.query.facets).length > 0 && (\n            <li>\n              <button\n                type=\"button\"\n                onClick={() => {\n                  props.clear(true);\n                }}\n              >\n                Reset filters\n              </button>\n            </li>\n          )}\n          {props.query.query && (\n            <li>\n              <button\n                type=\"button\"\n                onClick={() => {\n                  const newQuery = props.query;\n\n                  newQuery.query = \"\";\n                  newQuery.sortType = props.config.sort[0].type;\n                  newQuery.misspelling = null;\n                  newQuery.startRank = 1;\n                  newQuery.interacted = true;\n\n                  props.update.query(newQuery);\n                  props.update.results(!props.update.updateState);\n                }}\n              >\n                Reset query\n              </button>\n            </li>\n          )}\n        </ul>\n      </div>\n    );\n  } else {\n    return (\n      <div className=\"finder__results__summary\" ref={props.summaryHeadingRef}>\n        <h2 aria-live=\"polite\" className=\"finder__results__summary__heading\">\n          {props.query.query || Object.keys(props.query.facets).length > 0\n            ? \"Matching\"\n            : \"All\"}{\" \"}\n          {result}{\" \"}\n          <span>\n            (showing{\" \"}\n            {props.totalMatching > props.numRanks && (\n              <>\n                <span>{formatter.format(props.currStart)}</span>\n                <span>{props.currEnd && formatter.format(props.currEnd)}</span>{\" \"}\n                of{\" \"}\n              </>\n            )}\n            <span>{formatter.format(props.totalMatching)}</span> {result}\n            {props.query.query && ` for ${props.query.query}`})\n          </span>\n        </h2>\n        {sort}\n      </div>\n    );\n  }\n}\n\nFinder__Results__Summary.propTypes = {\n  clear: PropTypes.func,\n  config: PropTypes.object,\n  currEnd: PropTypes.number,\n  currStart: PropTypes.number,\n  numRanks: PropTypes.number,\n  query: PropTypes.object,\n  summariseAs: PropTypes.object,\n  totalMatching: PropTypes.number,\n  update: PropTypes.object,\n};\n\nexport default Finder__Results__Summary;\n","import React from \"react\";\n\nconst formatLabel = (label: string, value: string) => {\n  if (!value) return label;\n\n  const parts = label.split(value);\n\n  return (\n    <React.Fragment>\n      {parts.reduce<React.ReactNode[]>((acc, part, i) => {\n        if (i === 0) {\n          return [part];\n        }\n        return acc.concat(\n          <span className=\"highlightText\" key={value + part}>\n            {value}\n          </span>,\n          part,\n        );\n      }, [])}\n    </React.Fragment>\n  );\n};\n\nexport default formatLabel;\n","/**\n * @module patterns/finder/component/tools/finder__toolTip\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport type { ToolTip } from \"../../types/cards/card\";\n\nfunction Finder__ToolTip(props: ToolTip) {\n  const toggleLabel = () => setShow(!show);\n\n  const [show, setShow] = useState(false);\n\n  const {\n    thumbnailSourceName,\n    thumbnailSourceUrl,\n    thumbnailAuthorName,\n    thumbnailAuthorUrl,\n    thumbnailLicenceType,\n    thumbnailLicenceUrl,\n    displayToolTip,\n  } = props;\n\n  const labelAuthor =\n      thumbnailAuthorUrl && thumbnailAuthorName ? (\n        <a href={thumbnailAuthorUrl}>{thumbnailAuthorName}</a>\n      ) : thumbnailAuthorName ? (\n        <span>{thumbnailAuthorName}</span>\n      ) : null,\n    labelSource =\n      thumbnailSourceUrl && thumbnailSourceName ? (\n        <a href={thumbnailSourceUrl}>{thumbnailSourceName}</a>\n      ) : thumbnailSourceName ? (\n        <span>{thumbnailSourceName}</span>\n      ) : null,\n    labelLicense =\n      thumbnailLicenceUrl && thumbnailLicenceType ? (\n        <a href={thumbnailLicenceUrl}>{thumbnailLicenceType}</a>\n      ) : thumbnailLicenceType ? (\n        thumbnailLicenceType\n      ) : null;\n\n  if (displayToolTip && (thumbnailAuthorName || thumbnailSourceName)) {\n    return (\n      <figure className=\"wrapper--tooltip__label\" data-open={show}>\n        <button\n          className=\"tooltip tooltip--image-credit\"\n          type=\"button\"\n          aria-expanded={show}\n          onClick={toggleLabel}\n        >\n          <span\n            className={`tooltip__icon icon fa-sharp fa-light fa-subtitles ${\n              show ? \"fa-xmark\" : \"fa-subtitles\"\n            }`}\n          />\n          <span className=\"sr-only\">Show image credit</span>\n        </button>\n        <figcaption className=\"tooltip__label\">\n          {labelAuthor} {labelSource && \"/ \"} {labelSource} {labelLicense}\n        </figcaption>\n      </figure>\n    );\n  } else {\n    return null;\n  }\n}\n\nFinder__ToolTip.propTypes = {\n  thumbnailSourceName: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  thumbnailSourceUrl: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  thumbnailAuthorName: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  thumbnailAuthorUrl: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  thumbnailLicenseType: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  thumbnailLicenseUrl: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  displayToolTip: PropTypes.bool,\n};\n\nexport default Finder__ToolTip;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Query from \"../../components/query/finder__query\";\nimport Filters from \"../../components/filters/finder__filtersmobile\";\nimport Results from \"../../components/results/finder__results\";\nimport useLogicWrapper from \"../../logic/logic\";\nimport useHasMounted from \"../../logic/has-mounted\";\n\nimport type { MatrixConfigJSON } from \"../../types/configJSON\";\nimport type { Response } from \"../../types/FBresponse\";\n\ntype FinderProps = {\n  config: MatrixConfigJSON;\n  initialResults?: Response;\n  initialQuery?: {[key: string]: string };\n  element: HTMLElement | null;\n};\n\nfunction Finder(props: FinderProps) {\n  const hasMounted = useHasMounted();\n  const intialResults = Object.freeze({\n          bestBets: [],\n          extraSearches: {},\n          facets: [],\n          results: [],\n          spell: null,\n          summary: {\n            currEnd: 0,\n            currStart: 0,\n            numRanks: 0,\n            totalMatching: 0,\n          },\n        })\n\n\n  const {\n    query,\n    funnelbackResponse,\n    updating,\n    updater,\n    clear,\n    matrixState,\n    summaryHeadingRef,\n  } = useLogicWrapper(\n    props.config,\n    props.initialResults ?? intialResults,\n    props.initialQuery || {},\n    props.element,\n  );\n\n  const finderMain = (\n    <>\n      {props.config.facetLabels && props.config.facetLabels.length > 0 && (\n        <Filters\n          config={props.config}\n          query={query}\n          response={funnelbackResponse}\n          update={updater}\n          updating={updating}\n          summariseAs={props.config.summariseAs}\n          clear={clear}\n          mobile={true}\n          hasMounted={hasMounted}\n          matrixState={matrixState}\n        />\n      )}\n\n      <Results\n        clear={clear}\n        config={props.config}\n        query={query}\n        response={funnelbackResponse}\n        summariseAs={props.config.summariseAs}\n        type={props.config.resultCard}\n        update={updater}\n        updating={updating}\n        summaryHeadingRef={summaryHeadingRef}\n      />\n    </>\n  );\n\n  const QueryInput = (\n    <Query\n      config={props.config}\n      query={query}\n      update={updater}\n      updating={updating}\n    />\n  );\n\n  // If the site is bayes, we want to render the query input in the top section\n\n  const topSectionQueryInput =\n    props.config.queryInputConfig &&\n    props.config.queryInputConfig.showQueryInTopSection ? (\n      <div className=\"finder__top\">\n        <div className=\"container\">{QueryInput}</div>\n      </div>\n    ) : null;\n\n  return (\n    <form\n      className=\"finder\"\n      method=\"GET\"\n      onSubmit={(e) => {\n        e.preventDefault();\n      }}\n    >\n      {props.config.site && props.config.site === \"bayes\" ? (\n        <>\n          {topSectionQueryInput}\n          <div className=\"finder__main\">\n            <div className=\"container\">\n              <div className=\"grid\">{finderMain}</div>\n            </div>\n          </div>\n        </>\n      ) : (\n        <>\n          {QueryInput}\n          {finderMain}\n        </>\n      )}\n    </form>\n  );\n}\n\nFinder.propTypes = {\n  config: PropTypes.object.isRequired,\n  element: PropTypes.object,\n  initialQuery: PropTypes.object,\n  initialResults: PropTypes.object,\n};\n\nexport default Finder;\n","/**\n * Functions for making requests to Funnelback\n *\n * @module funnelback\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport axios from \"axios\";\nimport https from \"https\";\nimport { axiosRequest } from \"../util\";\nimport type { FixedParameters, FixedFacets } from \"../types/query\";\nimport type { CancelTokenSource } from \"axios\";\nimport type { Response } from \"../types/FBresponse\";\n\ntype Facets = { [key: string]: string };\ntype Parameters = { [key: string]: string };\n\nfunction baseURL (site: string | undefined):string{\n  switch(site){\n    case 'citysport':\n      return 'https://www.citysport.org.uk/web-services/fb/';\n    case 'city':\n      return 'https://www.citystgeorges.ac.uk/web-services/dxp-fb';\n    case 'bayes':\n      return 'https://www.bayes.citystgeorges.ac.uk/webservices';\n    default:\n      return 'https://www.citystgeorges.ac.uk/web-services/dxp-fb';\n  }\n}\n\nconst dxpFindRootUrl = '/funnelback-dxp-find',\n    dxpSuggestRootUrl = '/funnelback-dxp-suggest',\n    maximumSuggestions = 100,\n    timeout = 30000;\n\n/**\n * Funnelback search query.\n *\n * @param {string} collection The Funnelback collection to query.\n * @param {string} [query] The query string.\n * @param {string} [sortType] The field to sort by.\n * @param {integer} startRank The first result to return.\n * @param {integer} numRank The number of results to return.\n * @param {object} [facets] A map of facets to query strings.\n * @return {Promise} - A promise of search results.\n */\nexport function find(\n  collection: string,\n  fixedFacets: FixedFacets[] | undefined,\n  fixedParameters: FixedParameters[] | undefined,\n  query: string,\n  sortType: string | undefined,\n  startRank: number | undefined,\n  numRank: number | undefined,\n  facets: Facets,\n  parameters: Parameters | undefined,\n  site: string | undefined,\n  profile?: string,\n): [Promise<Response>, CancelTokenSource] {\n\n  const fixedParams: { [key: string]: string } = {};\n  if(fixedParameters) {\n    fixedParameters.forEach((param) => {\n      fixedParams[`${param.name}`] = param.value;\n    });\n  }\n\n  const params: { [key: string]: string } = {},\n    paramsKeys = parameters ? Object.keys(parameters) : [];\n\n  if(parameters){\n    paramsKeys.forEach((key: string) => (params[key] = parameters[key]));\n  }\n\n  const fixedFacetParams: { [key: string]: string } = {};\n  if(fixedFacets){\n    fixedFacets.forEach((facet) => {\n      fixedFacetParams[`meta_${facet.meta}_sand`] = facet.value;\n    });\n  }\n\n  const facetParams: { [key: string]: string } = {},\n    facetKeys = Object.keys(facets);\n\n  facetKeys.forEach(\n    (key: string) => (facetParams[`meta_${key}_sand`] = facets[key]),\n  );\n\n  const CancelToken = axios.CancelToken,\n    call = CancelToken.source(),\n    config = {\n      baseURL: baseURL(site),\n      cancelToken: call.token,\n      httpsAgent: new https.Agent({ keepAlive: true }),\n      url: dxpFindRootUrl,\n      timeout: timeout,\n      params: {\n        ...fixedParams,\n        ...fixedFacetParams,\n        ...facetParams,\n        ...params,\n        collection: collection,\n        profile: profile || \"_default\",\n        num_ranks: numRank,\n        query: query,\n        sort: sortType || \"\",\n        start_rank: startRank,\n      },\n    };\n\n  const defaultResponse: Response = {\n    bestBets: [],\n    results: [],\n    summary: {\n      totalMatching: 0,\n      numRanks: 0,\n      currStart: 1,\n    },\n    facets: [],\n    // Add other required fields if your Response type has them\n  };\n\n  return [\n    axiosRequest<Response>(config).then((data) => data || defaultResponse),\n    call,\n  ];\n}\n\n/**\n * Funnelback suggestion query.\n *\n * @param {string} collection The Funnelback collection to query.\n * @param {string} partialQuery The string to make suggestions for.\n * @return {Promise} - A promise of an array of suggestion strings.\n */\nexport function suggest(\n  collection: string,\n  partialQuery: string,\n  site: string | undefined,\n) {\n  const CancelToken = axios.CancelToken,\n    call = CancelToken.source(),\n    config = {\n      baseURL: baseURL(site),\n      cancelToken: call.token,\n      url: dxpSuggestRootUrl,\n      timeout: timeout,\n      params: {\n        collection: collection,\n        partial_query: partialQuery,\n        show: maximumSuggestions,\n      },\n    };\n\n  return [axiosRequest(config), call];\n}\n\n/**\n * Finder configuration.\n *\n * @param {string} url The Finder configuration file.\n * @return {Promise} - A promise of  configuration object.\n */\nexport function finderConfig(url: string) {\n  const config = {\n    timeout: timeout,\n    url: url,\n  };\n\n  return axiosRequest(config);\n}\n","/**\n * custom hook to check if react has mounted\n *\n *\n * @module patterns/finder/finder\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport { useState, useEffect } from \"react\";\n\nfunction useHasMounted() {\n  const [hasMounted, setHasMounted] = useState(false);\n\n  useEffect(() => {\n    setHasMounted(true);\n  }, []);\n\n  return hasMounted;\n}\n\nexport default useHasMounted;\n","import { flattenObj } from \"../../shared/util\";\nimport type { FacetDetails } from \"../types/facet\";\nimport type { QueryDetails } from \"../types/query\";\n\nfunction remove(obj: Record<string, unknown>, key: string): void {\n  for (const k in obj) {\n    if (k === key) {\n      delete obj[k];\n    } else if (typeof obj[k] === \"object\" && obj[k] !== null) {\n      remove(obj[k] as Record<string, unknown>, key);\n    }\n  }\n}\n\nexport function hyperLink(\n  query: QueryDetails,\n  facet: FacetDetails | null,\n  pageNumber?: number,\n  numberRank?: number,\n) {\n  const newStartRank =\n    pageNumber && numberRank && 1 + (pageNumber - 1) * numberRank;\n  const newQuery = JSON.parse(JSON.stringify(query)); //deep clone\n\n  if (facet && facet.type === \"tag\" && facet.meta) {\n    remove(newQuery, facet.meta);\n  }\n  const flattenQuery = flattenObj(newQuery);\n\n  return (\n    \"?\" +\n    Object.entries(flattenQuery)\n      .filter((key) => {\n        const param = Object.values(key);\n\n        if (param[1] === \"\") {\n          return false;\n        } else {\n          switch (param[0]) {\n            case \"interacted\":\n              return false;\n            case \"num_rank\":\n              return false;\n            case \"start_rank\":\n              return false;\n            default:\n              return true;\n          }\n        }\n      })\n      .map((key) => {\n        const param = Object.values(key);\n\n        if (/fixedParameters/.test(param[0])) {\n          return (\n            encodeURIComponent(param[0].substring(16)) +\n            \"=\" +\n            encodeURIComponent(param[1])\n          );\n        } else if (/fixedFacets/.test(param[0])) {\n          return (\n            encodeURIComponent(`meta_${param[0].substring(12)}_sand`) +\n            \"=\" +\n            encodeURIComponent(param[1])\n          );\n        } else if (/parameters/.test(param[0])) {\n          return (\n            encodeURIComponent(param[0].substring(11)) +\n            \"=\" +\n            encodeURIComponent(param[1])\n          );\n        }\n        switch (param[0]) {\n          case \"collection\":\n            return (\n              encodeURIComponent(param[0]) + \"=\" + encodeURIComponent(param[1])\n            );\n          case \"profile\":\n            return (\n              encodeURIComponent(param[0]) + \"=\" + encodeURIComponent(param[1])\n            );\n          case \"query\":\n            return (\n              encodeURIComponent(param[0]) + \"=\" + encodeURIComponent(param[1])\n            );\n          case \"sortType\":\n            return (\n              encodeURIComponent(\"sort\") + \"=\" + encodeURIComponent(param[1])\n            );\n          case \"startRank\":\n            return (\n              encodeURIComponent(\"start_rank\") +\n              \"=\" +\n              encodeURIComponent(facet ? param[1] : newStartRank || '')\n            );\n          case \"numRanks\":\n            return (\n              encodeURIComponent(\"num_rank\") +\n              \"=\" +\n              encodeURIComponent(param[1])\n            );\n          default:\n            return (\n              encodeURIComponent(`meta_${param[0]}_sand`) +\n              \"=\" +\n              encodeURIComponent(param[1])\n            );\n        }\n      })\n      .join(\"&\")\n  );\n}\n","import { useState, useEffect, useRef } from \"react\";\nimport useHasMounted from \"./has-mounted\";\nimport replaceHistory from \"./replace-history\";\nimport { getNonFBParams, getFacetParams } from \"./url-params\";\nimport { reduceMotion } from \"../util\";\nimport { find } from './funnelback';\nimport scroll from \"zenscroll\";\n\nimport type { MatrixConfigJSON } from \"../types/configJSON\";\nimport type { Response } from \"../types/FBresponse\";\nimport type { QueryDetails } from \"../types/query\";\n\ntype Cancelable = { cancel: () => void };\n\nfunction useLogicWrapper(\n  config: MatrixConfigJSON,\n  results: Response,\n  matrixQuery: { [key: string]: string },\n  element: HTMLElement | null,\n) {\n  const summaryHeadingRef = useRef<HTMLDivElement | null>(null);\n  const hasMounted = useHasMounted();\n  const screenOffsetRatio = 10;\n\n  const scrollDuration =\n    typeof window !== \"undefined\" && !reduceMotion() ? 1000 : 0;\n\n  const initialResults = results || {};\n  const nonFBParams =\n    config.facetLabels && config.facetLabels.filter((p) => p.nonFBParam);\n  const initializeParams =\n    config.facetLabels && config.facetLabels.length > 0\n      ? getFacetParams(config.facetLabels, matrixQuery)\n      : {};\n  const site = config.site || undefined;\n  const profile = config.profile || \"_default\";\n\n  /**\n   * initial state for the Funnelback query, taken from URL parameters and\n   * configuration\n   **/\n  const initialQuery = {\n    collection: config.collection,\n    profile: profile,\n    facets: initializeParams,\n    parameters:\n      matrixQuery && matrixQuery.parameters && matrixQuery.parameters.length > 0\n        ? matrixQuery.parameters\n        : {},\n    fixedFacets: config.fixedFacets,\n    fixedParameters: config.fixParameters ? config.fixParameters : [],\n    interacted: false,\n    misspelling: null as string | null,\n    numRanks: config.numRanks,\n    query: matrixQuery && matrixQuery.query ? matrixQuery.query : \"\",\n    sortType: config.sort[0].type,\n    startRank: matrixQuery && matrixQuery.start_rank ? parseInt(matrixQuery.start_rank) : 1,\n  };\n\n  const [defaultParams, setDefaultParams] = useState(Object.keys(matrixQuery).length ? matrixQuery : null);\n  const [query, setQuery] = useState<QueryDetails>(initialQuery); // will set once defaultParams is ready\n  const [funnelbackResponse, setResponse] = useState<Readonly<Response>>(\n    Object.keys(initialResults).length > 0\n      ? Object.freeze(results)\n      : Object.freeze({\n          bestBets: [],\n          extraSearches: {},\n          facets: [],\n          results: [],\n          spell: null,\n          summary: {\n            currEnd: 0,\n            currStart: 0,\n            numRanks: 0,\n            totalMatching: 0,\n          },\n        }),\n  );\n\n  const [updating, setUpdating] = useState(\n    Object.keys(initialResults).length === 0,\n  );\n  const [call, setCall] = useState<Cancelable>({ cancel: () => {} });\n  const [update, setUpdate] = useState(false);\n\n  // Step 1: Initialize defaultParams after mount\n  useEffect(() => {\n    if (!defaultParams && typeof window !== \"undefined\") {\n      const searchParams = new URLSearchParams(window.location.search);\n      const obj: { [key: string]: string } = {};\n      searchParams.forEach((value, key) => {\n        obj[key] = value;\n      });\n      setDefaultParams(obj);\n      \n    }\n  }, [defaultParams]);\n\n  // Step 2: Build initial query once defaultParams is ready\n  useEffect(() => {\n    if (!defaultParams) return;\n   \n    const matrixState = !hasMounted && matrixQuery ? true : false;\n    const baseQuery = {\n      collection: config.collection,\n      facets:\n        config.facetLabels && config.facetLabels.length > 0\n          ? getFacetParams(config.facetLabels, defaultParams)\n          : {},\n      parameters:\n        config.facetLabels && nonFBParams && nonFBParams.length > 0\n          ? getNonFBParams(config.facetLabels, defaultParams)\n          : {},\n      fixedFacets: config.fixedFacets,\n      fixedParameters: config.fixParameters || [],\n      interacted: false,\n      misspelling: null as string | null,\n      numRanks: config.numRanks,\n      query:\n        !matrixState && defaultParams[\"query\"]\n          ? defaultParams[\"query\"]\n          : defaultParams.query || \"\",\n      sortType:\n        !matrixState && defaultParams[\"query\"]\n          ? \"\"\n          : !matrixState && defaultParams[\"sort\"]\n            ? defaultParams[\"sort\"]\n            : config.sort[0].type,\n      startRank:\n        !matrixState && defaultParams[\"start_rank\"]\n          ? parseInt(defaultParams[\"start_rank\"], 10)\n          : typeof defaultParams.start_rank === \"string\"\n            ? parseInt(defaultParams.start_rank, 10)\n            : 1,\n    };\n    setQuery(baseQuery);\n  }, [defaultParams, hasMounted]);\n\n  // Step 3: Patch query after mount\n  useEffect(() => {\n    if (hasMounted && defaultParams && defaultParams[\"num_ranks\"]) {\n      setQuery((prev) => ({\n        ...prev,\n        numRanks: parseInt(defaultParams[\"num_ranks\"], 10) || prev.numRanks,\n      }));\n    }\n  }, [hasMounted, defaultParams]);\n\n  // Step 4: Update response when `update` flips\n  useEffect(() => {\n    if (!query) return;\n\n    replaceHistory(\n      query.query,\n      query.startRank,\n      query.facets,\n      query.parameters || {},\n      query.sortType,\n      config.facetLabels || [],\n      config.sort[0].type,\n      hasMounted,\n    );\n\n    setUpdating(true);\n\n    if (query.interacted && element) {\n      const resultsEl = element.querySelector(\".finder__results\");\n      if (resultsEl instanceof HTMLElement) {\n        scroll.center(\n          resultsEl,\n          scrollDuration,\n          -window.innerHeight / screenOffsetRatio,\n        );\n      }\n    }\n\n    call.cancel();\n\n    const [request, requestToken] = find(\n      query.collection,\n      query.fixedFacets,\n      query.fixedParameters,\n      query.query,\n      query.sortType,\n      query.startRank,\n      query.numRanks,\n      query.facets,\n      query.parameters,\n      site,\n      profile,\n    );\n\n    setCall({ cancel: () => requestToken.cancel() });\n\n    request\n      .then((data) => {\n        setResponse(data as Readonly<Response>); //  Freeze before setting\n        setUpdating(false);\n      })\n      .then(() => {\n        if (query.interacted && summaryHeadingRef.current) {\n          summaryHeadingRef.current.scrollIntoView({\n            behavior: \"smooth\",\n            block: \"nearest\",\n            inline: \"center\",\n          });\n        }\n      })\n      .catch(() => {\n        setResponse(initialResults as Readonly<Response>);\n        setUpdating(false);\n      });\n  }, [update, query]);\n\n  const updater = {\n    query: (newQuery: QueryDetails) => setQuery(newQuery),\n    results: (newUpdate: boolean) => setUpdate(newUpdate),\n    updateState: update,\n  };\n\n  const clear = (resetSort?: boolean) => {\n    const newQuery = {\n      ...query,\n      sortType: resetSort ? config.sort[0].type : query.sortType,\n      facets: {},\n      parameters: {},\n      startRank: 1,\n      misspelling: null as string | null,\n      interacted: true,\n    };\n    call.cancel();\n    setQuery(newQuery);\n    setUpdate(!update);\n  };\n\n  return {\n    query,\n    funnelbackResponse,\n    updating,\n    updater,\n    clear,\n    hasMounted,\n    matrixState: !hasMounted && matrixQuery ? true : false,\n    summaryHeadingRef,\n  };\n}\n\nexport default useLogicWrapper;\n","import { isURLSearchParams } from \"./url-params\";\nimport type { FacetDetails } from \"../types/facet\";\n\n/**\n * Preserve the search state in the URL parameters.\n *\n * @param {string} currQuery The search query.\n * @param {integer} currStartRank The start rank.\n * @param {object[]} currFacets A map of facet meta labels to their values.\n * @param {*} facetLabels Array of facet definitions.\n */\nexport default function replaceHistory(\n  currQuery: string,\n  currStartRank: number,\n  currFacets: { [key: string]: string },\n  currParameters: { [key: string]: string },\n  currSort: string,\n  facetLabels: FacetDetails[],\n  defaultSort: string,\n  hasMounted: boolean,\n) {\n  if (hasMounted) {\n    const params = new URLSearchParams(window.location.search);\n\n    if (isURLSearchParams(params)) {\n      if (currQuery !== \"\") {\n        params.set(\"query\", currQuery);\n      } else {\n        params.delete(\"query\");\n      }\n\n      if (currStartRank && currStartRank !== 1) {\n        params.set(\"start_rank\", currStartRank.toString());\n      } else {\n        params.delete(\"start_rank\");\n      }\n\n      if (currSort !== defaultSort && currSort !== \"\") {\n        params.set(\"sort\", currSort);\n      } else {\n        params.delete(\"sort\");\n      }\n\n      facetLabels.forEach((facet) => {\n        if (currFacets[facet.meta]) {\n          params.set(`meta_${facet.meta}_sand`, currFacets[facet.meta]);\n        } else {\n          params.delete(`meta_${facet.meta}_sand`);\n        }\n      });\n\n      facetLabels.forEach((facet) => {\n        if (currParameters[facet.meta]) {\n          params.set(facet.meta, currParameters[facet.meta]);\n        } else {\n          params.delete(facet.meta);\n        }\n      });\n\n      const hasParams = params.toString().length ? \"?\" : \"\";\n\n      window.history.replaceState(\n        {},\n        \"\",\n        `${window.location.pathname}${hasParams}${params.toString()}`,\n      );\n    }\n  }\n}\n","import type { FacetDetails } from \"../types/facet\";\n\n/**\n * Search and replace substring in Key on URLSearchParams\n * remove when urls have been replace on Matrix\n *\n * @param {object} params URLSearchParams object for the current page.\n * @param {string} target substring to replace\n * @param {replacement} replacement substring to replace\n * @return {object} - URLSearchParams object of new replace keys.\n */\n\nexport function replaceAndDeleteKeys(\n  params: URLSearchParams | { [key: string]: string },\n  target: string,\n  replacement: string,\n) {\n  let entries: [string, string][];\n  if (params instanceof URLSearchParams) {\n    entries = Array.from(params.entries());\n  } else {\n    entries = Object.entries(params);\n  }\n\n  for (const [key, value] of entries) {\n    if (key.includes(target)) {\n      const newKey = key.replace(target, replacement);\n      if (params instanceof URLSearchParams) {\n        params.set(newKey, value); // Add new key\n        params.delete(key); // Delete old key\n      } else {\n        params[newKey] = value;\n        delete params[key];\n      }\n    }\n  }\n\n  return params;\n}\n\n/**\n * Retrieve non FB parameters from the URL parameters\n *\n * @param {object[]} facets Array of facet definitions.\n * @param {object} params URLSearchParams object for the current page.\n * @return {object} - Map of facet meta labels to their current value from the URL.\n */\nexport function isURLSearchParams(obj: {[key: string]: string} | URLSearchParams): obj is URLSearchParams {\n  return typeof obj?.get === \"function\";\n}\n\nexport function getNonFBParams(\n  facets: FacetDetails[],\n  params: URLSearchParams | { [key: string]: string }\n) {\n\n  if (isURLSearchParams(params)) {\n    return facets\n      .filter((facet) => facet.nonFBParam)\n      .map((facet) => {\n        const param: { [key: string]: string } = {};\n        const value = params.get(facet.meta);\n        if (value) {\n          param[facet.meta] = value;\n        }\n        return param;\n      })\n      .reduce((facetParams, facet) => Object.assign(facetParams, facet), {});\n  } else {\n    return facets\n      .map((facet) => {\n        const param: { [key: string]: string } = {};\n        if ((params as {[key: string]: string})[facet.meta]) {\n          param[facet.meta] = (params as {[key: string]: string})[facet.meta];\n        }\n        return param;\n      })\n      .reduce((facetParams, facet) => Object.assign(facetParams, facet), {});\n  }\n}\n\nexport function getFacetParams(\n  facets: FacetDetails[],\n  params: URLSearchParams | { [key: string]: string }\n) {\n\n  if (isURLSearchParams(params)) {\n    const reducedParams = facets\n      .map((facet) => {\n        const param: { [key: string]: string } = {};\n        const value = params.get(`meta_${facet.meta}_sand`);\n        if (value) {\n          param[facet.meta] = value;\n        }\n        return param;\n      })\n      .reduce((facetParams, facet) => Object.assign(facetParams, facet), {});\n    return reducedParams;\n  } else {\n    const typedParams = params as { [key: string]: string };\n    const reducedParams = facets\n      .map((facet) => {\n        const param: { [key: string]: string } = {};\n        const key = `meta_${facet.meta}_sand`;\n        if (typedParams[key]) {\n          param[facet.meta] = typedParams[key];\n        }\n        return param;\n      })\n      .reduce((facetParams, facet) => Object.assign(facetParams, facet), {});\n    return reducedParams;\n  }\n}\n","/**\n * Useful utility functions\n * @module util\n * @author ...\n */\n\nimport axios, { AxiosRequestConfig } from \"axios\";\nimport React from \"react\";\n\nimport type { Response, ExtraSearches } from \"./types/FBresponse\";\n\nexport function toBool(s: string): boolean {\n  return s === \"true\";\n}\n\nconst partialMatchFn = (m: string) => (s: string) => s.indexOf(m) < 0;\nconst fullMatchFn = (m: string) => (s: string) => s !== m;\n\nexport function removeClass(\n  elem: HTMLElement,\n  className: string,\n  removePartials = false,\n): void {\n  const matchFn = removePartials\n    ? partialMatchFn(className)\n    : fullMatchFn(className);\n  elem.className = elem.className\n    .split(/\\s+/)\n    .filter((s) => matchFn(s))\n    .join(\" \");\n}\n\nexport function reduceMotion(): boolean {\n  const reducedMotionQuery =\n    typeof window !== \"undefined\"\n      ? window.matchMedia(\"(prefers-reduced-motion: reduce)\")\n      : null;\n  return reducedMotionQuery && reducedMotionQuery.matches ? true : false;\n}\n\nexport function isVisible(elem: HTMLElement): boolean {\n  return elem.offsetHeight !== 0 && elem.offsetWidth !== 0;\n}\n\nexport function verticallyInWindow(elem: HTMLElement): boolean {\n  const rect = elem.getBoundingClientRect();\n  return rect.top >= 0 && rect.top <= window.innerHeight;\n}\n\nexport function parametersToObject(\n  parameterString: string,\n): Record<string, string> {\n  const parameters: Record<string, string> = {};\n  parameterString\n    .substring(1)\n    .split(\"&\")\n    .forEach((parameter) => {\n      const [k, v] = parameter.split(\"=\");\n      parameters[k] = v;\n    });\n  return parameters;\n}\n\nexport function objectToParameters(\n  parameterObj: Record<string, string>,\n): string {\n  const keys = Object.keys(parameterObj);\n  if (keys.length > 0) {\n    return (\n      \"?\" +\n      keys\n        .map((key) => `${key}=${encodeURIComponent(parameterObj[key])}`)\n        .join(\"&\")\n    );\n  }\n  return \"\";\n}\n\ndeclare global {\n  interface Window {\n    dataLayer?: any[];\n  }\n}\n\nexport function gaEvent(\n  event: string,\n  eventCategory: string,\n  eventAction: string,\n  eventLabel?: string,\n  eventValue?: number,\n  nonInteractionHit?: boolean,\n): void {\n  window.dataLayer = window.dataLayer || [];\n  window.dataLayer.push({\n    event,\n    eventCategory,\n    eventAction,\n    eventLabel,\n    eventValue,\n    nonInteractionHit,\n  });\n}\n\nexport function appendAll(elem: HTMLElement, children: HTMLElement[]): void {\n  children.forEach((child) => elem.appendChild(child));\n}\n\nexport function numberFromString(string: string): string {\n  return string.replace(/\\D/g, \"\");\n}\n\nexport function isMobile(screen = 432): boolean {\n  return window.innerWidth < screen;\n}\n\nexport function toArray(\n  obj: HTMLCollection | NodeListOf<HTMLElement>,\n): HTMLElement[] {\n  return Array.from(obj) as HTMLElement[];\n}\n\nexport function detectIE(): number | false {\n  const ua = window.navigator.userAgent;\n\n  const msie = ua.indexOf(\"MSIE \");\n  if (msie > 0) {\n    return parseInt(ua.substring(msie + 5, ua.indexOf(\".\", msie)), 10);\n  }\n\n  const trident = ua.indexOf(\"Trident/\");\n  if (trident > 0) {\n    const rv = ua.indexOf(\"rv:\");\n    return parseInt(ua.substring(rv + 3, ua.indexOf(\".\", rv)), 10);\n  }\n\n  const edge = ua.indexOf(\"Edge/\");\n  if (edge > 0) {\n    return parseInt(ua.substring(edge + 5, ua.indexOf(\".\", edge)), 10);\n  }\n\n  return false;\n}\n\nexport function checkIntersectionObserver(): boolean {\n  return (\n    \"IntersectionObserver\" in window &&\n    \"IntersectionObserverEntry\" in window &&\n    \"intersectionRatio\" in window.IntersectionObserverEntry.prototype\n  );\n}\n\ninterface Attribute {\n  label: string;\n  val: string;\n}\n\nexport function createHTMLElement(\n  type: string,\n  attributes: Attribute[],\n): HTMLElement {\n  const el = document.createElement(type);\n  attributes.forEach((att) => {\n    if (att.label === \"content\") {\n      el.appendChild(document.createTextNode(att.val));\n    } else if (att.label === \"html\") {\n      el.innerHTML = att.val;\n    } else {\n      el.setAttribute(att.label, att.val);\n    }\n  });\n  return el;\n}\n\nexport function uppercaseFirstLetterLowercaseRest(s: string): string {\n  return s.charAt(0).toUpperCase() + s.slice(1).toLowerCase();\n}\n\nexport function axiosRequest<T = unknown>(config: AxiosRequestConfig): Promise<T | undefined> {\n  return axios(config)\n    .then((response) => {\n      if (response.status === 200) return response.data;\n      throw new Error(`Bad response: ${response.status}`);\n    })\n    .catch((e: unknown) => {\n      if (!axios.isCancel(e)) {\n        const error = e as Error;\n        gaEvent(\n          \"jsError\",\n          \"JavaScript error\",\n          error.message || \"Unknown error\",\n          `axiosRequest (${window.location})`,\n          0,\n          true,\n        );\n      }\n      return undefined;\n    });\n}\n\nexport function formatTime(timeString: string, timeZone?: boolean) {\n  const timeDate = new Date(timeString);\n  let timeLabel = \"\";\n\n  if (timeZone) {\n    const timeOffset = timeDate.getTimezoneOffset() / -60;\n    timeLabel = timeOffset === 0 ? \"(GMT)\" : \"(BST)\";\n  }\n\n  const hours = timeDate.getHours().toString().padStart(2, \"0\");\n  const minutes = timeDate.getMinutes().toString().padStart(2, \"0\");\n\n  return (\n    <time dateTime={`${hours}:${minutes}`}>\n      {hours}:{minutes} {timeLabel}\n    </time>\n  );\n}\n\nfunction daySuffix(day: number): string {\n  const lastDigit = day % 10;\n  const lastTwoDigits = day % 100;\n  if (lastTwoDigits >= 11 && lastTwoDigits <= 13) return \"th\";\n  switch (lastDigit) {\n    case 1:\n      return \"st\";\n    case 2:\n      return \"nd\";\n    case 3:\n      return \"rd\";\n    default:\n      return \"th\";\n  }\n}\n\nexport function formatReactDate(date: Date): React.ReactElement {\n  const months = [\n    \"January\",\n    \"February\",\n    \"March\",\n    \"April\",\n    \"May\",\n    \"June\",\n    \"July\",\n    \"August\",\n    \"September\",\n    \"October\",\n    \"November\",\n    \"December\",\n  ];\n  const days = [\n    \"Sunday\",\n    \"Monday\",\n    \"Tuesday\",\n    \"Wednesday\",\n    \"Thursday\",\n    \"Friday\",\n    \"Saturday\",\n  ];\n\n  return (\n    <time dateTime={date.toISOString().split(\"T\")[0]}>\n      {days[date.getUTCDay()]}, {date.getUTCDate()}\n      <sup>{daySuffix(date.getUTCDate())}</sup> {months[date.getUTCMonth()]}{\" \"}\n      {date.getUTCFullYear()}\n    </time>\n  );\n}\n\nexport function arraySlicer<T>(arr: T[], len: number): T[][] {\n  const newArray: T[][] = [];\n  for (let i = 0; i < arr.length; i += len) {\n    newArray.push(arr.slice(i, i + len));\n  }\n  return newArray;\n}\n\nexport function flattenObj(ob: Record<string, unknown>): Record<string, string> {\n  // The object which contains the\n  // final result\n  const result: { [key: string]: string } | string = {};\n\n  // loop through the object \"ob\"\n  for (const i in ob) {\n    // We check the type of the i using\n    // typeof() function and recursively\n    // call the function again\n    if (typeof ob[i] === \"object\" && !Array.isArray(ob[i]) && ob[i] !== null) {\n      const temp = flattenObj(ob[i] as Record<string, unknown>);\n      for (const j in temp) {\n        if (i === \"parameters\") {\n          result[`${i}-${j}`] = temp[j];\n        } else {\n          result[j] = temp[j];\n        }\n        // Store temp in result\n      }\n    } else if (Array.isArray(ob[i])) {\n      (ob[i] as Array<{ meta?: string; name?: string; value: string }>).forEach((val) => {\n        if (i === \"fixedFacets\" && val.meta) {\n          result[`${i}-${val.meta}`] = val.value;\n        } else if (val.name) {\n          result[`${i}-${val.name}`] = val.value;\n        }\n      });\n    } else if (ob[i] !== null && ob[i] !== undefined) {\n      result[i] = String(ob[i]);\n    }\n  }\n  return result;\n}\n\nexport function getVerticalScrollbarWidth(): number {\n  const scrollDiv = document.createElement(\"div\");\n  scrollDiv.style.cssText =\n    \"width: 100px; height: 100px; overflow: scroll; position: absolute; top: -9999px;\";\n  document.body.appendChild(scrollDiv);\n  const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n  document.body.removeChild(scrollDiv);\n  document.documentElement.style.setProperty(\n    \"--scrollbar-width\",\n    `${scrollbarWidth}px`,\n  );\n  return scrollbarWidth;\n}\n\nexport function enableBodyScroll(): void {\n  document.documentElement.classList.remove(\"no-scroll\");\n  const btn = document.querySelector(\".back-to-top\");\n  if (btn) btn.removeAttribute(\"hidden\");\n}\n\nexport function disableBodyScroll(): void {\n  getVerticalScrollbarWidth();\n  const btn = document.querySelector(\".back-to-top\");\n  if (btn) btn.setAttribute(\"hidden\", \"true\");\n  document.documentElement.classList.add(\"no-scroll\");\n}\n\nexport function formatFBResponse(json: any): Response & {\n  extraSearches?: {\n    [key: string]: ExtraSearches;\n  };\n} {\n  return {\n    query: json.question.originalQuery,\n    inputParameters: json.question.inputParameters,\n    spell: json.response.resultPacket.spell,\n    summary: json.response.resultPacket.resultsSummary,\n    bestBets: json.response.curator.exhibits,\n    results: json.response.resultPacket.results,\n    facets: json.response.facets,\n    extraSearches: json.extraSearches,\n  };\n}\n\nexport function decodeHtml(html = \"\") {\n  const txt = document.createElement(\"textarea\");\n  txt.innerHTML = html;\n  return txt.value;\n}\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"finder\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkreact_matrix_rendering\"] = self[\"webpackChunkreact_matrix_rendering\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"core1\",\"vendor-dependencies1\",\"axios1\",\"react1\",\"vendor-direct1\"], () => (__webpack_require__(\"./src/browser/browser-files/finder.tsx\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["React","createRoot","Finder","finderConfig","document","addEventListener","test","navigator","userAgent","finders","querySelectorAll","Array","from","forEach","finder","dataset","config","then","root","render","createElement","element","PropTypes","uppercaseFirstLetterLowercaseRest","Finder__Results__Accommodation","props","mph","calculateTime","minutes","Math","floor","thumbnail","details","listMetadata","src","alt","className","level","join","split","features","Object","keys","filter","meta","key","value","includes","map","replace","sort","type","length","slice","price","deposit","transport","Fragment","parseInt","location","concat","trim","toLowerCase","distance","walk","href","liveUrl","title","propTypes","object","Finder__Results__BestBet","displayUrl","titleHtml","descriptionHtml","Accommodation","CaseStudy","Centre","Contact","Course","Event","Funding","Generic","Module","News","Profile","Research","Finder__Results__Card","query","defaultImage","string","Finder__Results__CaseStudy","subtitle","status","school","department","centre","c","Finder__Results__Centre","subject","related","Finder__Results__Contact","jobtitle","email","altemail","telephone","friendlytelephone","room","enquiry","enquiryurl","enquirylabel","formatLabel","externalSiteUrl","Finder__Results__Course","award","qualification","duration","method","facets","indexOf","Set","String","e","i","stGeorgesLabel","clearing","external","some","s","indexUrl","courseCode","code","entryYears","entryyears","description","formatTime","formatReactDate","decodeHtml","formatShortDate","dateString","months","date","Date","month","getUTCMonth","getUTCDate","compareDates","startDate","endDate","showTime","sDate","eDate","noTimeSDate","setUTCHours","noTimeEDate","time","getTime","Finder__Results__Event","shortDate","d","audience","str","capitalized","toUpperCase","eventStartDate","eventEndDate","eventLabel","displayTime","Finder__Results__Funding","hardship","programme","feestatus","Finder__Results__Generic","Finder__Results__Module","term","topic","specification","toBool","Finder__ToolTip","Finder__Results__News","thumbnailSourceName","thumbnailSourceUrl","thumbnailAuthorName","thumbnailAuthorUrl","thumbnailLicenceType","thumbnailLicenceUrl","displayToolTip","thumbnailToolTip","formattedDate","hashtags","hashtagtext","thumbnailTiny","thumbnailMax","thumbnailMobile","srcSet","media","defaultImg","Finder__Results__Profile","headshot","EDIAmbassadors","ediAmbassador","thumbnailExist","country","Finder__Results__Research","researchCentre","academic","student","degree","relatedDegree","site","Finder__Checkbox","randomNumber","mobile","toggleChecked","facet","responseFacetValue","responseFacet","allValues","checkedValue","data","count","toggleFacet","newQuery","dependencies","startRank","misspelling","interacted","update","results","updateState","id","name","onChange","checked","onClick","htmlFor","arrayOf","bool","Finder__paramCheckbox","dateDayFormat","stringLength","stringOffset","random","toString","pastEventsResponseTotal","pastEventsResponse","resultPacket","resultsSummary","fullyMatching","pastEventsPartialResponseTotal","partiallyMatching","parameters","totalText","currentDate","currentYear","getUTCFullYear","currentDateMonth","currentDateDay","currentDateString","_objectSpread","lt_eventDate","events","ge_eventDate","sortType","matrixState","funnelbackName","Finder__Select","console","log","currentValue","allFacets","values","reduce","acc","_toConsumableArray","responseFacets","hiddenFacets","setFacet","undefined","target","noSelection","responseFacetDetails","label","SelectFilter","EventSelectFilter","CheckboxFilter","ParamCheckBox","EventCheckBox","HiddenInput","TagFilter","Reset","Sort","gaEvent","dependencyMet","facetMap","setFacets","dependency","Finder__Filters","totalMatching","response","summary","clearFiltersDesktop","updating","clear","resetSort","clearFiltersMobile","displaySort","submitSSR","summariseAs","plural","hasMounted","fixedParameters","param","facetLabels","extraSearches","past","funnelbackFacet","candidate","func","useState","useEffect","useRef","Filters","createFocusTrap","enableBodyScroll","disableBodyScroll","Finder__FiltersMobile","_useState","_useState2","_slicedToArray","display","setDisplay","_useState3","_useState4","focusTrap","setFocusTrap","filtersRef","filtersEl","current","trap","initialFocus","querySelector","onDeactivate","clickOutsideDeactivates","active","activate","deactivate","result","singular","totalMatchingMessage","filtersCount","toggle","ref","disabled","Finder__hiddenInput","_props$query$paramete","_props$facet$checkedV","Finder__Reset","resetClassName","Finder__Sort","setSort","validSorts","hyperLink","useHasMounted","Finder__Tag","deleteFacet","labelText","ssrHiddenField","Finder__Clear","clearIconCLassName","suggest","Clear","maximumSuggestions","escapeKey","endKey","homeKey","arrowUp","arrowDown","highlightQueryTerm","suggestion","partialQuery","Finder__Query","searchIconClassName","inputRef","setPartialQuery","suggestions","setSuggestions","_useState5","_useState6","call","setCall","_useState7","collection","_useState8","inputId","_useState9","_useState0","showSuggestions","setShowSuggestions","_useState1","_useState10","activeSuggestionID","setActiveSuggestionID","cancel","focusInput","focus","clearQuery","submitForm","submitSuggestion","suggestionsList","role","onBlur","onFocus","onMouseDown","onKeyDown","_e$currentTarget$clos","_e$currentTarget$pare","_e$currentTarget$pare2","currentTarget","closest","preventDefault","parentElement","previousElementSibling","nextElementSibling","_e$currentTarget$clos2","first","firstChild","Element","_first$querySelector","_e$currentTarget$clos3","last","lastChild","_last$querySelector","placeholder","defaultValue","autoComplete","_e$currentTarget$pare3","_e$currentTarget$pare4","button","val","_ref","_ref2","promise","newCall","DOMPurify","Finder__Announcement","clean","sanitize","announcement","ALLOWED_TAGS","dangerouslySetInnerHTML","__html","Finder__DidYouMean","_props$response$spell","_props$response$spell2","spell","text","didyoumean","Finder__Pagination","numberOfPages","numRanks","ceil","currentPage","currStart","pages","changePage","pageNumber","newStartRank","push","_loop","page","abs","number","BestBet","Card","DidYouMean","Pagination","Summary","Announcement","Finder__Results","resultsClass","resultsVariant","currEnd","summaryHeadingRef","didYouMean","pagination","bestBets","start","card","docNum","resultsContent","promo","array","pastEventsQuery","pastEventsUpdate","Finder__Results__Summary","formatter","Intl","NumberFormat","format","parts","part","toggleLabel","setShow","show","labelAuthor","labelSource","labelLicense","oneOfType","thumbnailLicenseType","thumbnailLicenseUrl","Query","Results","useLogicWrapper","_props$initialResults","intialResults","freeze","_useLogicWrapper","initialResults","initialQuery","funnelbackResponse","updater","finderMain","resultCard","QueryInput","topSectionQueryInput","queryInputConfig","showQueryInTopSection","onSubmit","isRequired","axios","https","axiosRequest","baseURL","dxpFindRootUrl","dxpSuggestRootUrl","timeout","find","fixedFacets","numRank","profile","fixedParams","params","paramsKeys","fixedFacetParams","facetParams","facetKeys","CancelToken","source","cancelToken","token","httpsAgent","Agent","keepAlive","url","num_ranks","start_rank","defaultResponse","partial_query","setHasMounted","flattenObj","remove","obj","k","_typeof","numberRank","JSON","parse","stringify","flattenQuery","entries","encodeURIComponent","substring","replaceHistory","getNonFBParams","getFacetParams","reduceMotion","scroll","matrixQuery","screenOffsetRatio","scrollDuration","window","nonFBParams","p","nonFBParam","initializeParams","fixParameters","defaultParams","setDefaultParams","setQuery","setResponse","setUpdating","setUpdate","searchParams","URLSearchParams","search","baseQuery","prev","resultsEl","HTMLElement","center","innerHeight","_find","_find2","request","requestToken","scrollIntoView","behavior","block","inline","newUpdate","isURLSearchParams","currQuery","currStartRank","currFacets","currParameters","currSort","defaultSort","set","hasParams","history","replaceState","pathname","replaceAndDeleteKeys","replacement","_iterator","_createForOfIteratorHelper","_step","n","done","_step$value","newKey","err","f","get","assign","reducedParams","typedParams","partialMatchFn","m","fullMatchFn","removeClass","elem","removePartials","arguments","matchFn","reducedMotionQuery","matchMedia","matches","isVisible","offsetHeight","offsetWidth","verticallyInWindow","rect","getBoundingClientRect","top","parametersToObject","parameterString","parameter","_parameter$split","_parameter$split2","v","objectToParameters","parameterObj","event","eventCategory","eventAction","eventValue","nonInteractionHit","dataLayer","appendAll","children","child","appendChild","numberFromString","isMobile","screen","innerWidth","toArray","detectIE","ua","msie","trident","rv","edge","checkIntersectionObserver","IntersectionObserverEntry","prototype","createHTMLElement","attributes","el","att","createTextNode","innerHTML","setAttribute","charAt","Error","isCancel","error","message","timeString","timeZone","timeDate","timeLabel","timeOffset","getTimezoneOffset","hours","getHours","padStart","getMinutes","dateTime","daySuffix","day","lastDigit","lastTwoDigits","days","toISOString","getUTCDay","arraySlicer","arr","len","newArray","ob","isArray","temp","j","getVerticalScrollbarWidth","scrollDiv","style","cssText","body","scrollbarWidth","clientWidth","removeChild","documentElement","setProperty","classList","btn","removeAttribute","add","formatFBResponse","json","question","originalQuery","inputParameters","curator","exhibits","html","txt"],"sourceRoot":""}