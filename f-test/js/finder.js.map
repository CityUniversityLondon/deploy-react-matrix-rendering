{"version":3,"file":"finder.js","mappings":"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S;EACtCma,yBAAyB,CAAC,CAAC;EAC3B,IAAMU,GAAG,GAAG7uB,QAAQ,CAACgV,aAAa,CAAC,cAAc,CAAC;EAClD,IAAI6Z,GAAG,EAAEA,GAAG,CAAC3C,YAAY,CAAC,QAAQ,EAAE,MAAM,CAAC;EAC3ClsB,QAAQ,CAAC0uB,eAAe,CAACE,SAAS,CAACG,GAAG,CAAC,WAAW,CAAC;AACvD;;;;;;;;;;ACrSA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;;;;WC5BA;WACA;WACA;WACA;WACA,+BAA+B,wCAAwC;WACvE;WACA;WACA;WACA;WACA,iBAAiB,qBAAqB;WACtC;WACA;WACA,kBAAkB,qBAAqB;WACvC;WACA;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC3BA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;WACA;WACA;WACA;WACA;;;;;WCJA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;;;;;UEhDA;UACA;UACA;UACA;UACA","sources":["webpack://react-matrix-rendering/./src/browser/browser-files/finder.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__accommodation.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__bestbet.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__card.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__casestudy.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__centre.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__contact.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__course.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__event.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__funding.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__generic.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__module.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__news.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__profile.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__promo.tsx","webpack://react-matrix-rendering/./src/shared/components/cards/finder__results__research.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__checkbox.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__eventCheckbox.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__eventSelect.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__filters.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__filtersmobile.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__hiddenInput.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__paramCheckbox.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__reset.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__select.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__sort.tsx","webpack://react-matrix-rendering/./src/shared/components/filters/finder__tag.tsx","webpack://react-matrix-rendering/./src/shared/components/query/finder__clear.tsx","webpack://react-matrix-rendering/./src/shared/components/query/finder__query.tsx","webpack://react-matrix-rendering/./src/shared/components/results/finder__announcement.tsx","webpack://react-matrix-rendering/./src/shared/components/results/finder__didyoumean.tsx","webpack://react-matrix-rendering/./src/shared/components/results/finder__pagination.tsx","webpack://react-matrix-rendering/./src/shared/components/results/finder__results.tsx","webpack://react-matrix-rendering/./src/shared/components/results/finder__results__summary.tsx","webpack://react-matrix-rendering/./src/shared/components/results/formatLabel.tsx","webpack://react-matrix-rendering/./src/shared/components/tools/finder__toolTip.tsx","webpack://react-matrix-rendering/./src/shared/forms/finder/finder.tsx","webpack://react-matrix-rendering/./src/shared/logic/funnelback.ts","webpack://react-matrix-rendering/./src/shared/logic/has-mounted.ts","webpack://react-matrix-rendering/./src/shared/logic/hyper-link.ts","webpack://react-matrix-rendering/./src/shared/logic/logic.ts","webpack://react-matrix-rendering/./src/shared/logic/replace-history.ts","webpack://react-matrix-rendering/./src/shared/logic/url-params.ts","webpack://react-matrix-rendering/./src/shared/util.tsx","webpack://react-matrix-rendering/ignored|/home/rof/src/github.com/CityUniversityLondon/react-matrix-rendering/node_modules/stream-http/node_modules/readable-stream/lib/internal/streams|util","webpack://react-matrix-rendering/ignored|/home/rof/src/github.com/CityUniversityLondon/react-matrix-rendering/node_modules/object-inspect|./util.inspect","webpack://react-matrix-rendering/ignored|/home/rof/src/github.com/CityUniversityLondon/react-matrix-rendering/node_modules/stream-http/node_modules/readable-stream/lib|util","webpack://react-matrix-rendering/webpack/bootstrap","webpack://react-matrix-rendering/webpack/runtime/chunk loaded","webpack://react-matrix-rendering/webpack/runtime/compat get default export","webpack://react-matrix-rendering/webpack/runtime/define property getters","webpack://react-matrix-rendering/webpack/runtime/global","webpack://react-matrix-rendering/webpack/runtime/hasOwnProperty shorthand","webpack://react-matrix-rendering/webpack/runtime/make namespace object","webpack://react-matrix-rendering/webpack/runtime/node module decorator","webpack://react-matrix-rendering/webpack/runtime/jsonp chunk loading","webpack://react-matrix-rendering/webpack/before-startup","webpack://react-matrix-rendering/webpack/startup","webpack://react-matrix-rendering/webpack/after-startup"],"sourcesContent":["/**\n * Finder entry\n *\n * @author Web Development\n * @copyright City, University of London 2019\n */\nimport React from 'react';\nimport { createRoot } from 'react-dom/client';\nimport Finder from '../../shared/forms/finder/finder';\nimport { finderConfig } from '../../shared/logic/funnelback';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    if (/(Trident|MSIE)/.test(navigator.userAgent)) {\n        return;\n    } else {\n        const finders = document.querySelectorAll<HTMLElement>('.wrapper--finder') ;\n        finders &&\n            Array.from(finders).forEach((finder) => {\n                finder.dataset.config && finderConfig(finder.dataset.config).then((config) => {\n                    const root = createRoot(finder);\n                    root.render(<Finder config={config} element={finder} />);\n                });\n            });\n    }\n});\n","/**\n * @module patterns/finder/components/cards/finder__results__accommodation\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { uppercaseFirstLetterLowercaseRest } from '../../util';\nimport type { ResultsAccommodation, ResultsAccommodationMetaDataList } from '../../types/cards/card';\n\n/**\n * Render a Funnelback result as an accommodation card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\n\nfunction Finder__Results__Accommodation(props: ResultsAccommodation) {\n    const mph = 60,\n        calculateTime = (minutes: number): string | number =>\n            Math.floor(minutes / mph) > 0\n                ? Math.floor(minutes / mph) + ' hour ' + (minutes % mph)\n                : minutes,\n        thumbnail = props.details && props.details.listMetadata && props.details.listMetadata.thumbnail && props.details.listMetadata.thumbnail[0] && (\n            <img\n                src={props.details.listMetadata.thumbnail[0]}\n                alt=\"\"\n                className=\"card__thumbnail\"\n            />\n        ),\n        level = props.details && props.details.listMetadata && props.details.listMetadata.level && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-graduation-cap icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span className=\"sr-only\">Level:</span>{' '}\n                <span>\n                    {uppercaseFirstLetterLowercaseRest(\n                        props.details.listMetadata.level.join('|')\n                    )\n                        .split('|')\n                        .join(' or ')}\n                </span>\n            </p>\n        ),\n        features = props.details.listMetadata\n            ? Object.keys(props.details.listMetadata)\n                .filter((meta) => {\n                    const key = meta as keyof ResultsAccommodationMetaDataList;\n                    const value = props.details.listMetadata![key];\n                    return ['accessible', 'catered', 'ensuite'].includes(meta) && value && value[0] === 'Yes';\n                })\n                .map((meta) => meta.replace(/ensuite/, 'en suite'))\n                .sort()\n                .join(', ')\n            : '',\n        type = props.details && props.details.listMetadata && props.details.listMetadata.type && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-sharp fa-building icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span className=\"sr-only\">Type:</span>{' '}\n                <span>\n                    {props.details.listMetadata.type.length > 2\n                        ? uppercaseFirstLetterLowercaseRest(\n                              props.details.listMetadata.type.join('|')\n                          )\n                              .split('|')\n                              .slice(0, -1)\n                              .join(', ') +\n                          ' or ' +\n                          uppercaseFirstLetterLowercaseRest(\n                              props.details.listMetadata.type.join('|')\n                          )\n                              .split('|')\n                              .slice(-1)\n                        : uppercaseFirstLetterLowercaseRest(\n                              props.details.listMetadata.type.join('|')\n                          )\n                              .split('|')\n                              .join(' or ')}\n                    {features && ' (' + features + ')'}\n                </span>\n            </p>\n        ),\n        price = props.details.listMetadata && props.details.listMetadata.price && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-pound-sign icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span className=\"sr-only\">Price:</span>{' '}\n                <span>\n                    {props.details.listMetadata.price[0]} (\n                    {props.details.listMetadata.deposit && props.details.listMetadata.deposit[0]} deposit)\n                </span>\n            </p>\n        ),\n        transport = props.details.listMetadata && props.details.listMetadata.transport && (\n            <React.Fragment>\n                {' '}\n                ({calculateTime(parseInt(props.details.listMetadata.transport[0]))}{' '}\n                minutes by public transport)\n            </React.Fragment>\n        ),\n        location =\n            props.details.listMetadata &&\n            props.details.listMetadata.location &&\n            props.details.listMetadata.location[0] ? (\n                <React.Fragment>\n                    <span className=\"sr-only\">Distance to</span>{' '}\n                    <div\n                        className={`card__details__location card__details__location-${props.details.listMetadata.location[0]\n                            .trim()\n                            .replace(' ', '-')\n                            .toLowerCase()}`}\n                    >\n                        <span\n                            className=\"fas fa-fw fa-location-dot icon\"\n                            aria-hidden=\"true\"\n                        />{' '}\n                        <span>{props.details.listMetadata.location[0]}</span>\n                        <span className=\"sr-only\"> campus</span>\n                    </div>\n                </React.Fragment>\n            ) : (\n                <span className=\"sr-only\">\n                    Distance to Northampton Square campus:\n                </span>\n            ),\n        distance = props.details.listMetadata && props.details.listMetadata.walk && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-walking icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                {location}\n                <span>\n                    {calculateTime(parseInt(props.details.listMetadata.walk[0]))} minutes\n                    walk to campus\n                    {transport}\n                </span>\n            </p>\n        );\n\n    return (\n        <li className=\"card card--accommodation\">\n            <a\n                href={props.details.liveUrl}\n                className=\"card__anchor card__details\"\n            >\n                {thumbnail}\n                <div className=\"card__details__text\">\n                    <h3 className=\"card__heading\">{props.details.title}</h3>\n                    {distance}\n                    {type}\n                    {price}\n                    {level}\n                </div>\n            </a>\n        </li>\n    );\n}\n\nFinder__Results__Accommodation.propTypes = {\n    details: PropTypes.object,\n};\n\nexport default Finder__Results__Accommodation;\n","/**\n * @module patterns/finder/components/cards/finder__results__bestbet\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport type { BestBet } from '../../types/FBresponse'\n\ntype BestBetDetails = {\n    details: BestBet;\n}\n\n/**\n * Render a Funnelback best bet as a results card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__BestBet(props: BestBetDetails) {\n    return (\n        <li className=\"card card--bestbet\">\n            <a\n                href={props.details.displayUrl}\n                className=\"card__anchor card__details\"\n            >\n                <div className=\"card__details__text\">\n                    <h3 className=\"card__heading\">{props.details.titleHtml}</h3>\n                    <p className=\"card__description\">\n                        {props.details.descriptionHtml}\n                    </p>\n                </div>\n            </a>\n        </li>\n    );\n}\n\nFinder__Results__BestBet.propTypes = {\n    details: PropTypes.object,\n};\n\nexport default Finder__Results__BestBet;\n","/**\n * @module patterns/finder/components/cards/finder__results__card\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport Accommodation from './finder__results__accommodation';\nimport CaseStudy from './finder__results__casestudy';\nimport Centre from './finder__results__centre';\nimport Contact from './finder__results__contact';\nimport Course from './finder__results__course';\nimport Event from './finder__results__event';\nimport Funding from './finder__results__funding';\nimport Generic from './finder__results__generic';\nimport Module from './finder__results__module';\nimport News from './finder__results__news';\nimport Profile from './finder__results__profile';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport Research from './finder__results__research';\nimport type { Card } from '../../types/cards/card';\n\n/**\n * Render a Funnelback result as the appropriate card type.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Card(props: Card) {\n    switch (props.type) {\n        case 'accommodation':\n            return <Accommodation details={props.details} />;\n        case 'casestudy':\n            return <CaseStudy details={props.details} />;\n        case 'centre':\n            return <Centre details={props.details} />;\n        case 'contact':\n            return <Contact details={props.details} />;\n        case 'course':\n            return <Course details={props.details} query={props.query} />;\n        case 'event':\n            return <Event details={props.details} />;\n        case 'funding':\n            return <Funding details={props.details} query={props.query} />;\n        case 'module':\n            return <Module details={props.details} query={props.query} />;\n        case 'news':\n            return <News details={props.details} />;\n        case 'profile':\n            return <Profile details={props.details} query={props.query} />;\n        case 'research':\n            return <Research details={props.details} query={props.query} />;\n        default:\n            return <Generic details={props.details} />;\n    }\n}\n\nFinder__Results__Card.propTypes = {\n    details: PropTypes.object,\n    query: PropTypes.object,\n    type: PropTypes.string,\n};\n\nexport default Finder__Results__Card;\n","/**\n * @module patterns/finder/components/cards/finder__results__casestudy\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { ResultsCaseStudy } from '../../types/cards/card';\n\n/**\n * Render a Funnelback result as a case study card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__CaseStudy(props: ResultsCaseStudy) {\n    const subtitle = props.details.listMetadata && props.details.listMetadata.status ? (\n            <p className=\"card__type\">{props.details.listMetadata.status[0]}</p>\n        ) : (\n            props.details.listMetadata && props.details.listMetadata.type && (\n                <p className=\"card__type\">{props.details.listMetadata.type[0]}</p>\n            )\n        ),\n        school = props.details.listMetadata && props.details.listMetadata.school && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-sharp fa-university icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>School:</span>{' '}\n                <span>\n                    {props.details.listMetadata.school.length > 2\n                        ? props.details.listMetadata.school\n                              .slice(0, -1)\n                              .join(', ') +\n                          ', and ' +\n                          props.details.listMetadata.school.slice(-1)\n                        : props.details.listMetadata.school\n                              .join(', and ')}\n                </span>\n            </p>\n        ),\n        department = props.details.listMetadata && props.details.listMetadata.department && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-sharp fa-building icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>Department:</span>{' '}\n                <span>\n                    {props.details.listMetadata.department.length > 2\n                        ? props.details.listMetadata.department\n                              .slice(0, -1)\n                              .join(', ') +\n                          ', and ' +\n                          props.details.listMetadata.department.slice(-1)\n                        : props.details.listMetadata.department\n                              .join(', and ')}\n                </span>\n            </p>\n        ),\n        centre = props.details.listMetadata && props.details.listMetadata.centre && (\n            <p className=\"card__tag\">\n                <span className=\"fas fa-fw fa-vial icon\" aria-hidden=\"true\" />{' '}\n                <span>Research centre:</span>{' '}\n                <span>\n                    {props.details.listMetadata.centre.length > 2\n                        ? props.details.listMetadata.centre\n                              .slice(0, -1)\n                              .join(', ') +\n                          ', and ' +\n                          props.details.listMetadata.centre.slice(-1)\n                        : props.details.listMetadata.centre\n                              .join(', and ')}\n                </span>\n            </p>\n        );\n\n    return (\n        <li className=\"card card--casestudy\">\n            <a\n                href={props.details.liveUrl}\n                className=\"card__anchor card__details\"\n            >\n                <div className=\"card__details__text\">\n                    <h3 className=\"card__heading\">{props.details.title}</h3>\n                    {subtitle}\n                    <p className=\"card__description\">\n                        {props.details.listMetadata && props.details.listMetadata.c && props.details.listMetadata.c[0]}\n                    </p>\n                    {school}\n                    {department}\n                    {centre}\n                </div>\n            </a>\n        </li>\n    );\n}\n\nFinder__Results__CaseStudy.propTypes = {\n    details: PropTypes.object,\n};\n\nexport default Finder__Results__CaseStudy;\n","/**\n * @module patterns/finder/components/cards/finder__results__centre\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { uppercaseFirstLetterLowercaseRest } from '../../util';\nimport type { ResultsCentre } from '../../types/cards/card';\n/**\n * Render a Funnelback result as a centre card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Centre(props: ResultsCentre) {\n    const school = props.details.listMetadata && props.details.listMetadata.school && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-sharp fa-university icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>School:</span>{' '}\n                <span>\n                    {props.details.listMetadata.school.length > 2\n                        ? props.details.listMetadata.school\n                              .slice(0, -1)\n                              .join(', ') +\n                          ', and ' +\n                          props.details.listMetadata.school.slice(-1)\n                        : props.details.listMetadata.school\n                              .join(', and ')}\n                </span>\n            </p>\n        ),\n        department = props.details.listMetadata && props.details.listMetadata.department && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-building icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>Department:</span>{' '}\n                <span>\n                    {props.details.listMetadata.department.length > 2\n                        ? props.details.listMetadata.department\n                              .slice(0, -1)\n                              .join(', ') +\n                          ', and ' +\n                          props.details.listMetadata.department.slice(-1)\n                        : props.details.listMetadata.department\n                              .join(', and ')}\n                </span>\n            </p>\n        ),\n        subject = props.details.listMetadata && props.details.listMetadata.related && (\n            <p className=\"card__type\">\n                {props.details.listMetadata.related.length > 2\n                    ? uppercaseFirstLetterLowercaseRest(\n                          props.details.listMetadata.related.join('|')\n                      )\n                          .split('|')\n                          .slice(0, -1)\n                          .join(', ') +\n                      ' and ' +\n                      uppercaseFirstLetterLowercaseRest(\n                          props.details.listMetadata.related.join('|')\n                      )\n                          .split('|')\n                          .slice(-1)\n                    : uppercaseFirstLetterLowercaseRest(\n                          props.details.listMetadata.related.join('|')\n                      )\n                          .split('|')\n                          .join(' and ')}\n            </p>\n        );\n    return (\n        <li className=\"card card--centre\">\n            <a\n                href={props.details.liveUrl}\n                className=\"card__anchor card__details\"\n            >\n                <div className=\"card__details__text\">\n                    <h3 className=\"card__heading\">{props.details.title}</h3>\n                    {subject}\n                    <p className=\"card__description\">\n                        {props.details.listMetadata && props.details.listMetadata.c && props.details.listMetadata.c[0]}\n                    </p>\n                    {school}\n                    {department}\n                </div>\n            </a>\n        </li>\n    );\n}\n\nFinder__Results__Centre.propTypes = {\n    details: PropTypes.object,\n};\n\nexport default Finder__Results__Centre;\n","/**\n * @module patterns/finder/components/cards/finder__results__contact\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport type { ResultsContact } from '../../types/cards/card';\n\n/**\n * Render a Funnelback result as a contact card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Contact(props: ResultsContact) {\n    const department = props.details.listMetadata && props.details.listMetadata.department && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-sharp fa-building icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>Department:</span> {props.details.listMetadata.department[0]}\n            </p>\n        ),\n        school = props.details.listMetadata && props.details.listMetadata.school && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-sharp fa-university icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>School:</span> {props.details.listMetadata.school[0]}\n            </p>\n        ),\n        jobtitle = props.details.listMetadata && props.details.listMetadata.jobtitle && (\n            <p className=\"card__type\">{props.details.listMetadata.jobtitle[0]}</p>\n        ),\n        email = props.details.listMetadata && props.details.listMetadata.email && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-envelope icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>Email:</span>{' '}\n                <a href={'mailto:' + props.details.listMetadata.email[0]}>\n                    {props.details.listMetadata.email[0]}\n                </a>\n            </p>\n        ),\n        altemail = props.details.listMetadata && props.details.listMetadata.altemail && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fad fa-user icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>Executive Assistant:</span>{' '}\n                <a href={'mailto:' + props.details.listMetadata.altemail[0]}>\n                    {props.details.listMetadata.altemail[0]}\n                </a>\n            </p>\n        ),\n        telephone = props.details.listMetadata && props.details.listMetadata.telephone && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-phone fa-rotate-90 icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>Telephone:</span>{' '}\n                <a href={'tel:' + props.details.listMetadata.telephone[0]}>\n                    {props.details.listMetadata && props.details.listMetadata.friendlytelephone && props.details.listMetadata.friendlytelephone[0]}\n                </a>\n            </p>\n        ),\n        room = props.details.listMetadata && props.details.listMetadata.room && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-door-open icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>Room:</span> {props.details.listMetadata.room[0]}\n            </p>\n        ),\n        enquiry = props.details.listMetadata && props.details.listMetadata.enquiryurl && (\n            <p className=\"card__tag\">\n                <span className=\"fas fa-fw fa-edit icon\" aria-hidden=\"true\" />{' '}\n                <span>Enquiries:</span>{' '}\n                <a href={props.details.listMetadata.enquiryurl[0]}>\n                    {props.details.listMetadata && props.details.listMetadata.enquirylabel && props.details.listMetadata.enquirylabel[0]}\n                </a>\n            </p>\n        );\n\n    return (\n        <li className=\"card card--contact\">\n            <div className=\"card__details\">\n                <div className=\"card__details__text\">\n                    <h3 className=\"card__heading\">{props.details.title}</h3>\n                    {jobtitle}\n                    {school}\n                    {department}\n                    {room}\n                    {email}\n                    {telephone}\n                    {enquiry}\n                    {altemail}\n                </div>\n            </div>\n        </li>\n    );\n}\n\nFinder__Results__Contact.propTypes = {\n    details: PropTypes.object,\n};\n\nexport default Finder__Results__Contact;\n","/**\n * @module patterns/finder/components/cards/finder__results__course\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport formatLabel from '../results/formatLabel';\nimport { uppercaseFirstLetterLowercaseRest } from '../../util';\nimport type { ResultsCourse } from '../../types/cards/card'\n\n/**\n * Render a Funnelback result as a course card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\n\nconst externalSiteUrl = ['www.citystgeorges.ac.uk'];\nfunction Finder__Results__Course(props: ResultsCourse) {\n    const subtitle =\n            (props.details.listMetadata && props.details.listMetadata.type &&\n                props.details.listMetadata.type[0]) ||\n            (props.details.listMetadata && props.details.listMetadata.level &&\n                props.details.listMetadata.level[0]) ||\n            null,\n        award = props.details.listMetadata && props.details.listMetadata.qualification && (\n            <p className=\"card__tag\">\n                <span className=\"fas fa-fw fa-award icon\" aria-hidden=\"true\" />{' '}\n                <span>\n                    Award\n                    {props.details.listMetadata.qualification.length > 1 && 's'}\n                    :\n                </span>{' '}\n                <span>\n                    {props.details.listMetadata.qualification.join(', ')}\n                </span>\n            </p>\n        ),\n        duration = props.details.listMetadata && props.details.listMetadata.duration && (\n            <p className=\"card__tag\">\n                <span className=\"fal fa-fw fa-clock icon\" aria-hidden=\"true\" />{' '}\n                <span>Duration:</span>{' '}\n                <span>{props.details.listMetadata.duration[0]}</span>\n            </p>\n        ),\n        method = props.details.listMetadata && props.details.listMetadata.method && props.details.listMetadata.level &&\n            props.details.listMetadata.level[0] !==\n                'Short courses and professional development' &&\n            ((props.query.facets && props.query.facets.method) ||\n                props.query.query.indexOf(\n                    props.details.listMetadata.method[0]\n                ) >= 0 ||\n                props.details.listMetadata.method[0].indexOf('Online') >=\n                    0) && (\n                <p className=\"card__tag\">\n                    <span\n                        className=\"fa-solid fa-book-open-reader icon\"\n                        aria-hidden=\"true\"\n                    />{' '}\n                    <span>\n                        Method\n                        {props.details.listMetadata.method.length > 1 && 's'} of\n                        study:\n                    </span>{' '}\n                    <span>\n                        {uppercaseFirstLetterLowercaseRest(\n                            Array.from(\n                                new Set(props.details.listMetadata.method)\n                            ).join('|') // Remove any duplicates & format\n                        )\n                            .split('|')\n                            .join(', ')}\n                    </span>\n                </p>\n            ),\n        location =\n            props.details.listMetadata &&\n            String(props.details.listMetadata.location).toLowerCase() !==\n            'tooting'\n                ? props.details.listMetadata.location &&\n                  props.query.facets &&\n                  props.query.facets.location && (\n                      <p className=\"card__tag\">\n                          <span\n                              className=\"fas fa-fw fa-map-marker-alt icon\"\n                              aria-hidden=\"true\"\n                          />{' '}\n                          <span>Location:</span>{' '}\n                          <span>\n                              {/* Avoid duplication of 'Online' location label if location and method of study are both online */}\n                              {props.details.listMetadata.location.join('|') ===\n                              'Online|Online'\n                                  ? 'Online'\n                                  : props.details.listMetadata.location.join(\n                                        ', '\n                                    )}\n                          </span>\n                      </p>\n                  )\n                : null,\n        school = props.details.listMetadata && props.details.listMetadata.school && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-sharp fa-university icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>School:</span>{' '}\n                <span>\n                    {props.details.listMetadata.school.map((e, i) =>\n                        i === 0 ? (\n                            <React.Fragment key={i}>\n                                {e.replace('and', '&')}\n                            </React.Fragment>\n                        ) : (\n                            <React.Fragment key={i}>| {e}</React.Fragment>\n                        )\n                    )}\n                </span>\n            </p>\n        ),\n        // City St George's label temporarily in place according to branding guidelines\n        stGeorgesLabel =\n            props.details.listMetadata &&\n            String(props.details.listMetadata.location).toLowerCase() ===\n            'tooting' ? (\n                <div className=\"card__label card--course__label--stgeorges\">\n                    <p>\n                        <span\n                            className=\"fas fa-fw fa-map-marker-alt icon\"\n                            aria-hidden=\"true\"\n                        />{' '}\n                        Tooting Campus\n                    </p>\n                </div>\n            ) : null,\n        // City and Business School use different metadata values; check for both\n        clearing = props.details.listMetadata && props.details.listMetadata.clearing &&\n            ['Yes', 'yes'].includes(props.details.listMetadata.clearing[0]) && (\n                <div className=\"card__label card--course__label--clearing\">\n                    <p className=\"card__label card--course__label--clearing\">\n                        Clearing\n                    </p>\n                </div>\n            ),\n        external = !externalSiteUrl.some(\n            (s) => props.details.indexUrl && props.details.indexUrl.indexOf(s) >= 0\n        ) ? (\n            <>\n                {' '}\n                <span\n                    className=\"fas fa-sharp fa-external-link icon\"\n                    aria-label=\"(external link)\"\n                ></span>\n            </>\n        ) : null,\n        courseCode =\n            props.details.listMetadata && props.details.listMetadata.code &&\n            ([\n                'Undergraduate degree',\n                'Foundation course',\n                'Postgraduate taught degree',\n            ].some((s) => props.details.listMetadata && props.details.listMetadata.level && props.details.listMetadata.level.indexOf(s) >= 0) ||\n                props.query.query.indexOf(props.details.listMetadata.code[0]) >=\n                    0) ? (\n                <p className=\"card__tag\">\n                    <span\n                        className=\"fas fa-fw fa-graduation-cap icon\"\n                        aria-hidden=\"true\"\n                    />{' '}\n                    <span>\n                        Course code\n                        {props.details.listMetadata.code.length > 1 && 's'}:\n                    </span>{' '}\n                    <span>{props.details.listMetadata.code.join('/')}</span>\n                </p>\n            ) : null,\n        entryYears =\n            props.details.listMetadata &&\n            props.details.listMetadata.entryyears &&\n            (['Undergraduate degree'].some(\n                (s) => props.details.listMetadata && props.details.listMetadata.level && props.details.listMetadata.level.indexOf(s) >= 0\n            ) ||\n                props.query.query.indexOf(\n                    props.details.listMetadata.entryyears[0]\n                ) >= 0) ? (\n                <p className=\"card__tag\">\n                    <span\n                        className=\"fas fa-fw fa-calendar icon\"\n                        aria-hidden=\"true\"\n                    />{' '}\n                    <span>\n                        Year\n                        {props.details.listMetadata.entryyears.length > 1 &&\n                            's'}{' '}\n                        of entry:\n                    </span>{' '}\n                    <span>\n                        {props.details.listMetadata.entryyears.join('/')}\n                    </span>\n                </p>\n            ) : null,\n        description = props.details.listMetadata && props.details.listMetadata.c &&\n            props.details.listMetadata.c[0] && (\n                <p className=\"card__description\">\n                    {props.query.query\n                        ? formatLabel(\n                              props.details.listMetadata.c[0],\n                              props.query.query\n                          )\n                        : props.details.listMetadata.c[0]}\n                </p>\n            );\n\n    return (\n        <li className=\"card card--course\">\n            <a\n                href={props.details.liveUrl}\n                className=\"card__anchor card__details\"\n            >\n                <div className=\"wrapper--card__label__details\">\n                    {clearing}\n                    <div className=\"card__details__text\">\n                        <h3 className=\"card__heading\">\n                            {props.query.query\n                                ? formatLabel(\n                                      props.details.title,\n                                      props.query.query\n                                  )\n                                : props.details.title}\n                            {external}\n                        </h3>\n                        <p className=\"card__type\">\n                            {props.query.query && subtitle\n                                ? formatLabel(subtitle, props.query.query)\n                                : subtitle && subtitle}\n                        </p>\n                        {description}\n                        {stGeorgesLabel}\n                        {school}\n                        {award}\n                        {duration}\n                        {courseCode}\n                        {entryYears}\n                        {method}\n                        {location}\n                    </div>\n                </div>\n            </a>\n        </li>\n    );\n}\n\nFinder__Results__Course.propTypes = {\n    details: PropTypes.object,\n    query: PropTypes.object,\n};\n\nexport default Finder__Results__Course;\n","/**\n * @module patterns/finder/components/cards/finder__results__event\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { formatTime, formatReactDate } from '../../util';\nimport type { ResultsEvents } from '../../types/cards/card';\n\nfunction formatShortDate(dateString: string) {\n    const months = [\n            'Jan',\n            'Feb',\n            'Mar',\n            'Apr',\n            'May',\n            'Jun',\n            'Jul',\n            'Aug',\n            'Sep',\n            'Oct',\n            'Nov',\n            'Dec',\n        ],\n        date = new Date(dateString),\n        month = months[date.getUTCMonth()];\n\n    return (\n        <p className=\"card--event__label--shortdate\">\n            <span>{date.getUTCDate()}</span> {month}\n        </p>\n    );\n}\n\nfunction compareDates(startDate: string, endDate: string, showTime:number) {\n    const sDate = new Date(startDate),\n        eDate = new Date(endDate),\n        noTimeSDate = new Date(sDate.setUTCHours(0, 0, 0)),\n        noTimeEDate = new Date(eDate.setUTCHours(0, 0, 0)),\n        time = showTime ? (\n            <React.Fragment>\n                , {formatTime(startDate)} - {formatTime(endDate, true)}\n            </React.Fragment>\n        ) : null;\n\n    return noTimeSDate.getTime() === noTimeEDate.getTime() ? (\n        <p className=\"card__type true\">\n            {formatReactDate(sDate)}\n            {time}\n        </p>\n    ) : (\n        <p className=\"card__type false\">\n            {formatReactDate(sDate)} - {formatReactDate(eDate)}\n            {time}\n        </p>\n    );\n}\n\n/**\n * Render a Funnelback result as an event card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Event(props: ResultsEvents) {\n    const shortDate =\n            props.details.listMetadata &&\n            props.details.listMetadata.d &&\n            formatShortDate(props.details.listMetadata.d[0]),\n        location = props.details.listMetadata && props.details.listMetadata.location && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw icon fa-map-marker-alt\"\n                    aria-hidden=\"true\"\n                ></span>{' '}\n                <span>Location:</span>{' '}\n                <span>{props.details.listMetadata.location.join(', ')}</span>\n            </p>\n        ),\n        audience = props.details.listMetadata && props.details.listMetadata.audience && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw icon fa-users\"\n                    aria-hidden=\"true\"\n                ></span>{' '}\n                <span>Audience:</span>{' '}\n                <span>\n                    {Array.from(new Set(props.details.listMetadata.audience))\n                        .map((str) => {\n                            let capitalized = `${str[0].toUpperCase()}${str.slice(\n                                1\n                            )}`;\n                            return capitalized.replace(/-/g, ' ');\n                        })\n                        .join('|')\n                        .split('|')\n                        .join('; ')}\n                </span>\n            </p>\n        ),\n        thumbnail = props.details.listMetadata && props.details.listMetadata.thumbnail && (\n            <img\n                src={props.details.listMetadata.thumbnail[0]}\n                alt=\"\"\n                className=\"card__thumbnail\"\n            />\n        ),\n        eventStartDate =\n            props.details.listMetadata && props.details.listMetadata.d && props.details.listMetadata.d[0],\n        eventEndDate =\n            props.details.listMetadata && props.details.listMetadata.d && props.details.listMetadata.d[1],\n        eventLabel = eventStartDate && eventEndDate && props.details.listMetadata && props.details.listMetadata.displayTime && compareDates(\n            eventStartDate,\n            eventEndDate,\n            parseInt(props.details.listMetadata.displayTime[0])\n        );\n\n    return (\n        <li className=\"card card--event card--landscape\">\n            <a\n                href={props.details.liveUrl}\n                className=\"card__anchor card__details\"\n            >\n                {thumbnail}\n                {shortDate}\n                <div className=\"card__details__text\">\n                    <h3 className=\"card__heading\">{props.details.title}</h3>\n                    <p className=\"card__description\">\n                        {props.details.listMetadata && props.details.listMetadata.c &&\n                            props.details.listMetadata.c[0]}\n                    </p>\n                    {eventLabel}\n                    {location}\n                    {audience}\n                </div>\n            </a>\n        </li>\n    );\n}\n\nFinder__Results__Event.propTypes = {\n    details: PropTypes.object,\n};\n\nexport default Finder__Results__Event;\n","/**\n * @module patterns/finder/components/cards/finder__results__funding\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { uppercaseFirstLetterLowercaseRest } from '../../util';\nimport type { ResultsFunding } from '../../types/cards/card';\n\n/**\n * Render a Funnelback result as a funding card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Funding(props: ResultsFunding) {\n    const school = props.details.listMetadata && props.details.listMetadata.school &&\n            props.query.facets &&\n            props.query.facets.school && (\n                <p className=\"card__tag\">\n                    <span\n                        className=\"fas fa-fw fa-sharp fa-university icon\"\n                        aria-hidden=\"true\"\n                    />{' '}\n                    <span>School:</span>{' '}\n                    <span>\n                        {props.details.listMetadata.school.length > 2\n                            ? props.details.listMetadata.school\n                                  .slice(0, -1)\n                                  .join(', ') +\n                              ', or ' +\n                              props.details.listMetadata.school.slice(-1)\n                            : props.details.listMetadata.school.join(', or ')}\n                    </span>\n                </p>\n            ),\n        hardship = props.details.listMetadata && props.details.listMetadata.hardship &&\n            props.details.listMetadata.hardship[0] === '1' && (\n                <div className=\"card--funding__label--hardship\">\n                    <p>Hardship funding</p>\n                </div>\n            ),\n        programme = props.details.listMetadata && props.details.listMetadata.programme && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-graduation-cap icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>\n                    Programme\n                    {props.details.listMetadata.programme.length > 2\n                        ? 's'\n                        : null}\n                    :\n                </span>{' '}\n                <span>\n                    {props.details.listMetadata.programme.length > 2\n                        ? uppercaseFirstLetterLowercaseRest(\n                              props.details.listMetadata.programme.join('|')\n                          )\n                              .split('|')\n                              .slice(0, -1)\n                              .join(', ') +\n                          ' or ' +\n                          uppercaseFirstLetterLowercaseRest(\n                              props.details.listMetadata.programme.join('|')\n                          )\n                              .split('|')\n                              .slice(-1)\n                        : uppercaseFirstLetterLowercaseRest(\n                              props.details.listMetadata.programme.join('|')\n                          )\n                              .split('|')\n                              .join(' or ')}\n                </span>\n            </p>\n        ),\n        level = props.details.listMetadata && props.details.listMetadata.level && (\n            <p className=\"card__tag\">\n                <span className=\"fas fa-fw fa-award icon\" aria-hidden=\"true\" />{' '}\n                <span>Programme level:</span>{' '}\n                <span>\n                    {props.details.listMetadata.level.length > 2\n                        ? uppercaseFirstLetterLowercaseRest(\n                              props.details.listMetadata.level.join('|')\n                          )\n                              .split('|')\n                              .slice(0, -1)\n                              .join(', ') +\n                          ' or ' +\n                          uppercaseFirstLetterLowercaseRest(\n                              props.details.listMetadata.level.join('|')\n                          )\n                              .split('|')\n                              .slice(-1)\n                        : uppercaseFirstLetterLowercaseRest(\n                              props.details.listMetadata.level.join('|')\n                          )\n                              .split('|')\n                              .join(' or ')}\n                </span>\n            </p>\n        ),\n        feestatus = props.details.listMetadata && props.details.listMetadata.feestatus && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"far fa-fw fa-globe-europe icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>Fee status:</span>{' '}\n                <span>\n                    {props.details.listMetadata.feestatus.length > 2\n                        ? props.details.listMetadata.feestatus\n                              .slice(0, -1)\n                              .join(', ') +\n                          ' or ' +\n                          props.details.listMetadata.feestatus.slice(-1)\n                        : props.details.listMetadata.feestatus.join(' or ')}\n                </span>\n            </p>\n        );\n\n    return (\n        <li className=\"card card--funding\">\n            <a\n                href={props.details.liveUrl}\n                className=\"card__anchor card__details\"\n            >\n                {hardship}\n                <div className=\"card__details__text\">\n                    <h3 className=\"card__heading\">\n                        {props.details.title.replace('&amp;', '&')}\n                    </h3>\n                    <p className=\"card__type\">\n                        {props.details.listMetadata && props.details.listMetadata.type && props.details.listMetadata.type[0]}\n                    </p>\n                    <p className=\"card__description\">\n                        {props.details.listMetadata && props.details.listMetadata.c &&\n                            props.details.listMetadata.c[0]}\n                    </p>\n                    {level}\n                    {programme}\n                    {feestatus}\n                    {school}\n                </div>\n            </a>\n        </li>\n    );\n}\n\nFinder__Results__Funding.propTypes = {\n    details: PropTypes.object,\n    query: PropTypes.object,\n};\n\nexport default Finder__Results__Funding;\n","/**\n * @module patterns/finder/components/cards/finder__results__generic\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport type { ResultsGeneric } from '../../types/cards/card';\n/**\n * Render a Funnelback result as a generic card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Generic(props: ResultsGeneric) {\n    const school = props.details.listMetadata && props.details.listMetadata.school && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-sharp fa-university icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>School:</span>{' '}\n                <span>\n                    {props.details.listMetadata.school.length > 2\n                        ? props.details.listMetadata.school\n                              .slice(0, -1)\n                              .join(', ') +\n                          ', and ' +\n                          props.details.listMetadata.school.slice(-1)\n                        : props.details.listMetadata.school.join(', and ')}\n                </span>\n            </p>\n        ),\n        department = props.details.listMetadata && props.details.listMetadata.department && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-sharp fa-building icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>Department:</span>{' '}\n                <span>\n                    {props.details.listMetadata.department.length > 2\n                        ? props.details.listMetadata.department\n                              .slice(0, -1)\n                              .join(', ') +\n                          ', and ' +\n                          props.details.listMetadata.department.slice(-1)\n                        : props.details.listMetadata.department.join(', and ')}\n                </span>\n            </p>\n        ),\n        title = props.details.title && (\n            <h3 className=\"card__heading\">\n                {props.details.title.indexOf('School') >= 0\n                    ? props.details.title.replace('&amp;', '&')\n                    : props.details.title}\n            </h3>\n        );\n\n    return (\n        <li className=\"card card--generic\">\n            <a\n                href={props.details.liveUrl}\n                className=\"card__anchor card__details\"\n            >\n                <div className=\"card__details__text\">\n                    {title}\n                    <p className=\"card__description\">\n                        {props.details.listMetadata && props.details.listMetadata.c &&\n                            props.details.listMetadata.c[0]}\n                    </p>\n                    {school}\n                    {department}\n                </div>\n            </a>\n        </li>\n    );\n}\n\nFinder__Results__Generic.propTypes = {\n    details: PropTypes.object,\n};\n\nexport default Finder__Results__Generic;\n","/**\n * @module patterns/finder/components/cards/finder__results__module\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport type { ResultsModule } from '../../types/cards/card';\n\n/**\n * Render a Funnelback result as a module card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Module(props: ResultsModule) {\n    const location = props.details.listMetadata && props.details.listMetadata.location && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-map-marker-alt icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>Location:</span>{' '}\n                <span>{props.details.listMetadata.location[0]}</span>\n            </p>\n        ),\n        title = props.details.listMetadata && props.details.listMetadata.code ? (\n            <React.Fragment>\n                <span className=\"card--module__code\">\n                    {props.details.listMetadata.code[0]}\n                </span>{' '}\n                <span>{props.details.title}</span>\n            </React.Fragment>\n        ) : (\n            <React.Fragment>\n                <span>{props.details.title}</span>\n            </React.Fragment>\n        ),\n        school = props.details.listMetadata && props.details.listMetadata.school && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-sharp fa-university icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>School:</span>{' '}\n                <span>\n                    {props.details.listMetadata.school.length > 2\n                        ? props.details.listMetadata.school\n                              .slice(0, -1)\n                              .join(', ') +\n                          ', and ' +\n                          props.details.listMetadata.school.slice(-1)\n                        : props.details.listMetadata.school\n                              .join(', and ')}\n                </span>\n            </p>\n        ),\n        term = props.details.listMetadata && props.details.listMetadata.term && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"far fa-fw fa-calendar icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>Semester:</span>{' '}\n                <span>\n                    {props.details.listMetadata.term.length > 2\n                        ? 'All year'\n                        : props.details.listMetadata.term.join(' or ')}\n                </span>\n            </p>\n        ),\n        topic = props.details.listMetadata && props.details.listMetadata.related && (\n            <p className=\"card__type\">\n                {props.details.listMetadata.related\n                    .sort()\n                    .map((topic, i) => (i > 0 ? topic.toLowerCase() : topic))\n                    .join(', ')}\n            </p>\n        ),\n        specification = props.details.listMetadata && props.details.listMetadata.specification && (\n            <p className=\"card__tag\">\n                <span className=\"far fa-fw fa-file-pdf icon\" aria-label=\"PDF\" />{' '}\n                <a href={props.details.listMetadata.specification[0]}>\n                    Download module specification\n                </a>\n            </p>\n        );\n\n    return (\n        <li className=\"card card--module\">\n            <div className=\"card__details\">\n                <div className=\"card__details__text\">\n                    <h3 className=\"card__heading\">{title}</h3>\n                    {topic}\n                    <p className=\"card__description\">\n                        {props.details.listMetadata && props.details.listMetadata.c && props.details.listMetadata.c[0]}\n                    </p>\n                    {term}\n                    {school}\n                    {location}\n                    {specification}\n                </div>\n            </div>\n        </li>\n    );\n}\n\nFinder__Results__Module.propTypes = {\n    details: PropTypes.object,\n    query: PropTypes.object,\n};\n\nexport default Finder__Results__Module;\n","/**\n * @module patterns/finder/components/cards/finder__results__news\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { formatReactDate, toBool } from '../../util';\nimport Finder__ToolTip from '../tools/finder__toolTip';\nimport type { ResultsNews } from '../../types/cards/card';\n\n/**\n * Render a Funnelback result as a generic card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__News(props: ResultsNews) {\n    const thumbnailSourceName =\n            (props.details.listMetadata && props.details.listMetadata.thumbnailSourceName &&\n                props.details.listMetadata.thumbnailSourceName[0]) ||\n            false,\n        thumbnailSourceUrl =\n            (props.details.listMetadata && props.details.listMetadata.thumbnailSourceUrl &&\n                props.details.listMetadata.thumbnailSourceUrl[0]) ||\n            false,\n        thumbnailAuthorName =\n            (props.details.listMetadata && props.details.listMetadata.thumbnailAuthorName &&\n                props.details.listMetadata.thumbnailAuthorName[0]) ||\n            false,\n        thumbnailAuthorUrl =\n            (props.details.listMetadata && props.details.listMetadata.thumbnailAuthorUrl &&\n                props.details.listMetadata.thumbnailAuthorUrl[0]) ||\n            false,\n        thumbnailLicenceType =\n            (props.details.listMetadata && props.details.listMetadata.thumbnailLicenceType &&\n                props.details.listMetadata.thumbnailLicenceType[0]) ||\n            false,\n        thumbnailLicenceUrl =\n            (props.details.listMetadata && props.details.listMetadata.thumbnailLicenceUrl &&\n                props.details.listMetadata.thumbnailLicenceUrl[0]) ||\n            false,\n        displayToolTip =\n            props.details.listMetadata && props.details.listMetadata.thumbnailToolTip &&\n            toBool(props.details.listMetadata.thumbnailToolTip[0]);\n\n    const formattedDate =\n            props.details.listMetadata && props.details.listMetadata.d &&\n            formatReactDate(new Date(props.details.listMetadata.d[0])),\n        dateString = props.details.listMetadata && props.details.listMetadata.d && (\n            <p className=\"card__type\">{formattedDate}</p>\n        ),\n        hashtags = props.details.listMetadata && props.details.listMetadata.hashtagtext && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fad fa-fw fa-hashtag icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>\n                    Hashtag\n                    {props.details.listMetadata.hashtagtext.length > 1 && 's'}:\n                </span>{' '}\n                <span>{props.details.listMetadata.hashtagtext.join(', ')}</span>\n            </p>\n        ),\n        thumbnail =\n            props.details.listMetadata &&\n            props.details.listMetadata.thumbnailTiny &&\n            props.details.listMetadata.thumbnailTiny[0] &&\n            props.details.listMetadata.thumbnailMax &&\n            props.details.listMetadata.thumbnailMax[0] &&\n            props.details.listMetadata.thumbnailMobile &&\n            props.details.listMetadata.thumbnailMobile[0] ? (\n                <picture>\n                    <source\n                        srcSet={props.details.listMetadata.thumbnailTiny[0]}\n                        media=\"(max-width: 375px)\"\n                    />\n                    <source\n                        srcSet={props.details.listMetadata.thumbnailMax[0]}\n                        media=\"(min-width: 3840px)\"\n                    />\n                    <img\n                        src={props.details.listMetadata.thumbnailMobile[0]}\n                        alt={props.details.title}\n                    />\n                </picture>\n            ) : props.details.listMetadata && props.details.listMetadata.thumbnail ? (\n                <img\n                    src={props.details.listMetadata.thumbnail[0]}\n                    alt=\"\"\n                    className=\"card__thumbnail\"\n                />\n            ) : null;\n\n    return (\n        <li className=\"card card--news\">\n            <Finder__ToolTip\n                thumbnailSourceName={thumbnailSourceName}\n                thumbnailSourceUrl={thumbnailSourceUrl}\n                thumbnailAuthorName={thumbnailAuthorName}\n                thumbnailAuthorUrl={thumbnailAuthorUrl}\n                thumbnailLicenceType={thumbnailLicenceType}\n                thumbnailLicenceUrl={thumbnailLicenceUrl}\n                displayToolTip={displayToolTip}\n            />\n            <a\n                href={props.details.liveUrl}\n                className=\"card__anchor card__details\"\n            >\n                {thumbnail}\n                <div className=\"card__details__text\">\n                    {dateString}\n                    <h3 className=\"card__heading\">{props.details.title}</h3>\n                    <p className=\"card__description\">\n                        {props.details.listMetadata && props.details.listMetadata.c &&\n                            props.details.listMetadata.c[0]}\n                    </p>\n                    {hashtags}\n                </div>\n            </a>\n        </li>\n    );\n}\n\nFinder__Results__News.propTypes = {\n    details: PropTypes.object,\n};\n\nexport default Finder__Results__News;\n","/**\n * @module patterns/finder/components/cards/finder__results__profile\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport type { ResultsProfile } from '../../types/cards/card';\n\n/**\n * Render a Funnelback result as a profile card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Profile(props: ResultsProfile) {\n    const school = props.details.listMetadata && props.details.listMetadata.school && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-sharp fa-university icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>School:</span>{' '}\n                {props.details.listMetadata.school[0].replace('and', '&')}\n            </p>\n        ),\n        department = props.details.listMetadata && props.details.listMetadata.department && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-sharp fa-building icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>Department:</span>{' '}\n                {props.details.listMetadata.department[0]}\n            </p>\n        ),\n        headshot = props.details.listMetadata && props.details.listMetadata.thumbnail && (\n            <div className=\"card__thumbnail\">\n                <img\n                    src={props.details.listMetadata.thumbnail[0]}\n                    alt={'Photo of ' + props.details.title}\n                />\n            </div>\n        ),\n        EDIAmbassadors = props.details.listMetadata && props.details.listMetadata.ediAmbassador && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-sharp fa-people-roof icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>EDI Ambassador</span>\n            </p>\n        ),\n        thumbnailExist =\n            props.details.listMetadata &&\n            props.details.listMetadata.thumbnail &&\n            'card--profile--thumbnailAvailable',\n        country = props.query.facets &&\n            props.query.facets.country &&\n            props.details.listMetadata &&\n            props.details.listMetadata.country && (\n                <div className=\"card__tag\">\n                    <span\n                        className=\"fad fa-fw fa-globe-europe icon\"\n                        aria-hidden=\"true\"\n                    />{' '}\n                    <span>Country:</span>{' '}\n                    {props.details.listMetadata.country.length > 2\n                        ? props.details.listMetadata.country\n                              .slice(0, -1)\n                              .join(', ') +\n                          ' and ' +\n                          props.details.listMetadata.country.slice(-1)\n                        : props.details.listMetadata.country.join(' and ')}\n                </div>\n            );\n\n    return (\n        <li className=\"card card--profile\">\n            <a\n                href={props.details.liveUrl}\n                className={`card__anchor card__details ${thumbnailExist}`}\n            >\n                {headshot}\n                <div className=\"card__details__text\">\n                    <h3 className=\"card__heading\">{props.details.title}</h3>\n                    <p className=\"card__type\">\n                        {props.details.listMetadata && props.details.listMetadata.jobtitle &&\n                            props.details.listMetadata.jobtitle[0]}\n                    </p>\n                    {school}\n                    {department}\n                    {country}\n                    {EDIAmbassadors}\n                </div>\n            </a>\n        </li>\n    );\n}\n\nFinder__Results__Profile.propTypes = {\n    details: PropTypes.object,\n    query: PropTypes.object,\n};\n\nexport default Finder__Results__Profile;\n","/**\n * @module patterns/finder/components/finder__results__summary\n * @author Web Development\n * @copyright City, University of London\n */\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport type { ResultPromoProps }  from '../../types/cards/card';\n\nfunction Finder__Results__Promo({\n    heading,\n    body,\n    linkRef,\n    linkText,\n    }: ResultPromoProps) {\n    return (\n        <li className=\"card card--finder-promo promo-area__wrap\">\n            <div className=\"promo-area layout__left--full\">\n                <div className=\"promo-area__content background--pink90\">\n                    <h3 className=\"promo-area__heading\">{heading}</h3>\n                    <div className=\"promo-area__container\">\n                        <div className=\"promo-area__text\">\n                            <p>{body}</p>\n                            <p className=\"cta-block__cta\">\n                                <a\n                                    href={linkRef}\n                                    className=\"outline-cta-arrow--bright\"\n                                >\n                                    <span>{linkText}</span>\n                                </a>\n                            </p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </li>\n    );\n}\n\nFinder__Results__Promo.propTypes = {\n    heading: PropTypes.string,\n    body: PropTypes.string,\n    linkRef: PropTypes.string,\n    linkText: PropTypes.string,\n};\n\nexport default Finder__Results__Promo;\n","/**\n * @module patterns/finder/components/cards/finder__results__research\n * @author Web Development\n * @copyright City, University of London 2021\n */\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport type { ResultsResearch } from '../../types/cards/card';\n// import parse from 'html-react-parser';\n\n/**\n * Render a Funnelback result as a PhD research project card.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Research(props: ResultsResearch) {\n    const school = props.details.listMetadata && props.details.listMetadata.school && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-sharp fa-university icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>School:</span>{' '}\n                <span>\n                    {props.details.listMetadata.school.length > 2\n                        ? props.details.listMetadata.school\n                              .slice(0, -1)\n                              .join(', ') +\n                          ' and ' +\n                          props.details.listMetadata.school.slice(-1)\n                        : props.details.listMetadata.school.join(' and ')}\n                </span>\n            </p>\n        ),\n        department = props.details.listMetadata && props.details.listMetadata.department && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-sharp fa-building icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>Department:</span>{' '}\n                <span>\n                    {props.details.listMetadata.department.length > 2\n                        ? props.details.listMetadata.department\n                              .slice(0, -1)\n                              .join(', ') +\n                          ' and ' +\n                          props.details.listMetadata.department.slice(-1)\n                        : props.details.listMetadata.department.join(' and ')}\n                </span>\n            </p>\n        ),\n        centre = props.details.listMetadata&&  props.details.listMetadata.researchCentre && (\n            <p className=\"card__tag\">\n                <span className=\"fas fa-fw fa-vial icon\" aria-hidden=\"true\" />{' '}\n                {props.details.listMetadata.researchCentre.length > 1 ? (\n                    <span>Research centres: </span>\n                ) : (\n                    <span>Research centre: </span>\n                )}\n                {/* <span>\n                    {props.details.listMetadata.researchCentre.length > 2\n                        ? parse(\n                              props.details.listMetadata.researchCentre\n                                  .slice(0, -1)\n                                  .join(', ') +\n                                  ' and ' +\n                                  props.details.listMetadata.researchCentre.slice(\n                                      -1\n                                  )\n                          )\n                        : parse(\n                              props.details.listMetadata.researchCentre.join(\n                                  ' and '\n                              )\n                          )}\n                </span> */}\n            </p>\n        ),\n        academic = props.details.listMetadata && props.details.listMetadata.academic && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"fas fa-fw fa-chalkboard-teacher icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                {props.details.listMetadata.academic.length > 1 ? (\n                    <span>Academics: </span>\n                ) : (\n                    <span>Academic: </span>\n                )}\n                {/* <span>\n                    {props.details.listMetadata.academic.length > 2\n                        ? parse(\n                              props.details.listMetadata.academic\n                                  .slice(0, -1)\n                                  .join(', ') +\n                                  ' and ' +\n                                  props.details.listMetadata.academic.slice(-1)\n                          )\n                        : parse(\n                              props.details.listMetadata.academic.join(' and ')\n                          )}\n                </span> */}\n            </p>\n        ),\n        student = props.details.listMetadata && props.details.listMetadata.student && (\n            <p className=\"card__tag\">\n                <span className=\"fas fa-fw fa-users icon\" aria-hidden=\"true\" />{' '}\n                {props.details.listMetadata.student.length > 1 ? (\n                    <span>Students: </span>\n                ) : (\n                    <span>Student: </span>\n                )}\n                {/* <span>\n                    {props.details.listMetadata.student.length > 2\n                        ? parse(\n                              props.details.listMetadata.student\n                                  .slice(0, -1)\n                                  .join(', ') +\n                                  ' and ' +\n                                  props.details.listMetadata.student.slice(-1)\n                          )\n                        : parse(\n                              props.details.listMetadata.student.join(' and ')\n                          )}\n                </span> */}\n            </p>\n        ),\n        degree = props.details.listMetadata && props.details.listMetadata.relatedDegree && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"far fa-fw fa-diploma icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                {props.details.listMetadata.relatedDegree.length > 1 ? (\n                    <span>Related degrees: </span>\n                ) : (\n                    <span>Related degree: </span>\n                )}\n                {/* <span>\n                    {props.details.listMetadata.relatedDegree.length > 2\n                        ? parse(\n                              props.details.listMetadata.relatedDegree\n                                  .slice(0, -1)\n                                  .join(', ') +\n                                  ' and ' +\n                                  props.details.listMetadata.relatedDegree.slice(\n                                      -1\n                                  )\n                          )\n                        : parse(\n                              props.details.listMetadata.relatedDegree.join(\n                                  ' and '\n                              )\n                          )}\n                </span> */}\n            </p>\n        ),\n        status = props.details.listMetadata && props.details.listMetadata.status && (\n            <p className=\"card__tag\">\n                <span\n                    className=\"far fa-fw fa-hourglass icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span>Status:</span>{' '}\n                <span>{props.details.listMetadata.status[0]} </span>\n                {props.details.listMetadata.status[0] ===\n                'Completed project' ? (\n                    <span\n                        className=\"far fa-fw fa-check-circle icon\"\n                        aria-hidden=\"true\"\n                    />\n                ) : null}\n            </p>\n        ),\n        site = props.details.listMetadata && props.details.listMetadata.site && (\n            <p className=\"card__tag\">\n                <span className=\"far fa-fw fa-globe icon\" aria-hidden=\"true\" />{' '}\n                <span>\n                    <a href={props.details.listMetadata.site[0]}>\n                        View case study site\n                    </a>\n                </span>\n            </p>\n        );\n\n    return (\n        <li className=\"card card--research\">\n            <div className=\"card__details\">\n                <div className=\"card__details__text\">\n                    <h3 className=\"card--research__title-link\">\n                        {props.details.title}\n                    </h3>\n                    <p className=\"card__description\">\n                        {props.details.listMetadata && props.details.listMetadata.c &&\n                            props.details.listMetadata.c[0]}\n                    </p>\n                    {school}\n                    {department}\n                    {centre}\n                    {degree}\n                    {academic}\n                    {student}\n                    {status}\n                    {site}\n                </div>\n            </div>\n        </li>\n    );\n}\n\nFinder__Results__Research.propTypes = {\n    details: PropTypes.object,\n};\n\nexport default Finder__Results__Research;\n","/**\n * @module patterns/finder/components/finder__checkbox\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport type { CheckBox } from '../../types/filters/filters';\n\nfunction Finder__Checkbox(props: CheckBox) {\n    const randomNumber = props.mobile ? 'mobile' : 'desktop',\n        toggleChecked = props.facet.meta in props.query.facets,\n        responseFacetValue =\n            props.responseFacet[0] &&\n            props.responseFacet[0].allValues &&\n            props.responseFacet[0].allValues.filter(\n                (value) =>\n                    props.facet.checkedValue && value.data.toLowerCase() ===\n                    props.facet.checkedValue.toLowerCase()\n            );\n\n    if (\n        responseFacetValue &&\n        responseFacetValue[0] &&\n        responseFacetValue[0].count > 0\n    ) {\n        const toggleFacet = () => {\n            const newQuery = props.query;\n\n            props.dependencies && props.dependencies.map((facet) => {\n                delete newQuery.facets[facet.meta];\n            });\n\n            toggleChecked\n                ? delete newQuery.facets[props.facet.meta]\n                : props.facet.checkedValue ?\n                (newQuery.facets[props.facet.meta] =\n                      props.facet.checkedValue)\n                : null;\n\n            newQuery.startRank = 1;\n            newQuery.misspelling = null;\n            newQuery.interacted = true;\n\n            props.update.query(newQuery);\n            props.update.results(!props.update.updateState);\n        };\n\n        return (\n            <div className=\"finder__filter finder__checkbox\">\n                <input\n                    type=\"checkbox\"\n                    id={`meta_${props.facet.meta}_and--${randomNumber}`}\n                    name={`meta_${props.facet.meta}_and`}\n                    value={props.facet.checkedValue}\n                    onChange={() => toggleFacet()}\n                    checked={toggleChecked}\n                />\n                <div\n                    className=\"finder__checkbox__indicator finder__checkbox__indicator\"\n                    aria-hidden=\"true\"\n                    onClick={() => toggleFacet()}\n                >\n                    {toggleChecked ? (\n                        <span className=\"fa fa-fw fas fa-check icon\"></span>\n                    ) : null}\n                </div>\n                <label\n                    className=\"finder__filters__label--always\"\n                    htmlFor={`meta_${props.facet.meta}_and--${randomNumber}`}\n                >\n                    {props.facet.name}\n                    {!toggleChecked &&\n                        responseFacetValue &&\n                        ' (' + responseFacetValue[0].count + ')'}\n                </label>\n            </div>\n        );\n    } else {\n        return null;\n    }\n}\n\nFinder__Checkbox.propTypes = {\n    facet: PropTypes.object,\n    query: PropTypes.object,\n    responseFacet: PropTypes.arrayOf(PropTypes.object),\n    update: PropTypes.object,\n    dependencies: PropTypes.arrayOf(PropTypes.object),\n    mobile: PropTypes.bool,\n};\n\nexport default Finder__Checkbox;\n","/**\n * @module patterns/finder/components/finder__checkbox\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport type { EventCheckBox } from '../../types/filters/filters';\nimport type { Query } from '../../types/query';\n\nfunction Finder__paramCheckbox(props: EventCheckBox) {\n    const dateDayFormat = 10;\n    const stringLength = 16,\n        stringOffset = -4,\n        randomNumber = Math.random().toString(stringLength).slice(stringOffset),\n        pastEventsResponseTotal =\n            props.pastEventsResponse &&\n            props.pastEventsResponse.resultPacket.resultsSummary &&\n            props.pastEventsResponse.resultPacket.resultsSummary.fullyMatching,\n        pastEventsPartialResponseTotal =\n            props.pastEventsResponse &&\n            props.pastEventsResponse.resultPacket.resultsSummary &&\n            props.pastEventsResponse.resultPacket.resultsSummary\n                .partiallyMatching,\n        toggleChecked = props.query.parameters && 'lt_eventDate' in props.query.parameters,\n        totalText = pastEventsResponseTotal\n            ? pastEventsResponseTotal\n            : pastEventsPartialResponseTotal\n            ? pastEventsPartialResponseTotal\n            : 0;\n\n    const currentDate = new Date(),\n        currentYear = currentDate.getUTCFullYear(),\n        currentDateMonth =\n            currentDate.getUTCMonth() >= 10\n                ? currentDate.getUTCMonth()\n                : '0' + (currentDate.getUTCMonth() + 1),\n        currentDateDay = currentDate.getUTCDate(),\n        currentDateString = `${currentYear}${currentDateMonth}${\n            currentDateDay >= dateDayFormat\n                ? currentDateDay\n                : '0' + currentDateDay\n        }`;\n\n        const toggleFacet = () => {\n            const currentDate = new Date();\n            const dateDayFormat = 10;\n            const currentYear = currentDate.getUTCFullYear();\n            const currentDateMonth =\n                currentDate.getUTCMonth() + 1 >= 10\n                    ? currentDate.getUTCMonth() + 1\n                    : '0' + (currentDate.getUTCMonth() + 1);\n            const currentDateDay = currentDate.getUTCDate();\n            const currentDateString = `${currentYear}${currentDateMonth}${\n                currentDateDay >= dateDayFormat ? currentDateDay : '0' + currentDateDay\n            }`;\n        \n            const newQuery: Query['query'] = {\n                ...props.query,\n                parameters: props.query.parameters ? { ...props.query.parameters } : {},\n            };\n        \n            if (newQuery.parameters && 'lt_eventDate' in newQuery.parameters) {\n                // Remove past filters\n                delete newQuery.parameters.lt_eventDate;\n                delete newQuery.parameters.events;\n                newQuery.parameters.ge_eventDate = currentDateString;\n                newQuery.sortType = 'adate';\n            } else if(newQuery.parameters){\n                // Set past filters\n                delete newQuery.parameters.ge_eventDate;\n                newQuery.parameters.lt_eventDate = currentDateString;\n                newQuery.parameters.events = 'past';\n                newQuery.sortType = 'date';\n            }\n        \n            newQuery.startRank = 1;\n            newQuery.misspelling = null;\n            newQuery.interacted = true;\n        \n            props.update.query(newQuery);\n            props.update.results(!props.update.updateState);\n        };\n        \n\n    if (totalText > 0) {\n        if (props.matrixState) {\n            return (\n                <div className=\"finder__filter finder__select\">\n                    <label htmlFor=\"event--time\">Location</label>\n                    <select name=\"event--time\" id=\"event--time\">\n                        <option value={`ge_eventDate!${currentDateString}`}>\n                            Upcoming events\n                        </option>\n                        <option value={`lt_eventDate!${currentDateString}`}>\n                            Past events\n                        </option>\n                    </select>\n                </div>\n            );\n        } else {\n            return (\n                <div className=\"finder__filter finder__checkbox\">\n                    <input\n                        type=\"checkbox\"\n                        id={`${props.facet.funnelbackName}--${randomNumber}`}\n                        name={props.facet.meta}\n                        value={props.facet.checkedValue}\n                        onChange={() => toggleFacet()}\n                        checked={toggleChecked}\n                    />\n                    <div\n                        className=\"finder__checkbox__indicator finder__checkbox__indicator\"\n                        aria-hidden=\"true\"\n                        onClick={() => toggleFacet()}\n                    >\n                        {toggleChecked ? (\n                            <span className=\"fa fa-fw fas fa-check icon\"></span>\n                        ) : null}\n                    </div>\n                    <label\n                        className=\"finder__filters__label--always\"\n                        htmlFor={`${props.facet.funnelbackName}--${randomNumber}`}\n                    >\n                        {props.facet.name}\n                        {!toggleChecked && totalText && ' (' + totalText + ')'}\n                    </label>\n                </div>\n            );\n        }\n    } else {\n        return null;\n    }\n}\n\nFinder__paramCheckbox.propTypes = {\n    facet: PropTypes.object,\n    query: PropTypes.object,\n    pastEventsResponse: PropTypes.object,\n    update: PropTypes.object,\n    dependencies: PropTypes.arrayOf(PropTypes.object),\n    matrixState: PropTypes.bool,\n};\n\nexport default Finder__paramCheckbox;\n","/**<\n * @module patterns/finder/components/finder__select\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport type { EventSelect } from '../../types/filters/filters';\n\nfunction Finder__Select(props: EventSelect) {\n    const dateDayFormat = 10;\n    const currentDate = new Date(),\n        currentYear = currentDate.getUTCFullYear(),\n        currentDateMonth =\n            currentDate.getUTCMonth() >= 10\n                ? currentDate.getUTCMonth()\n                : '0' + (currentDate.getUTCMonth() + 1),\n        currentDateDay = currentDate.getUTCDate(),\n        currentDateString = `${currentYear}${currentDateMonth}${\n            currentDateDay >= dateDayFormat\n                ? currentDateDay\n                : '0' + currentDateDay\n        }`;\n\n    const randomNumber = props.mobile ? 'mobile' : 'desktop',\n        currentValue = props.facet && props.query.facets[props.facet.meta] || '';\n\n    // reduce the facet configuration to an array of all possible values for\n    // the facet\n    const allFacets = props.facet && props.facet.values && props.facet.values.reduce((acc, data) => {\n        return [...acc, data];\n    }, []);\n\n    // reduce the Funnelback response for the facet to an array of valid\n    // values for the current query\n    const responseFacets =\n        props.responseFacet[0] && props.responseFacet[0].allValues\n            ? props.responseFacet[0].allValues.reduce((acc, data) => {\n                  return [...acc, data.data];\n              }, [])\n            : [];\n\n    // count how many possible facets are not valid for the current query\n    // and will be hidden\n    const hiddenFacets = allFacets && allFacets\n        .map((facet) => facet.data)\n        .filter(\n            (facet) => responseFacets.indexOf(facet.toLowerCase()) < 0\n        ).length;\n\n    const setFacet = (value: string) => {\n        const newQuery = props.query;\n\n        if (!newQuery.parameters) {\n            newQuery.parameters = {};\n        }\n\n        props.dependencies && props.dependencies.map((facet) => {\n            delete newQuery.facets[facet.meta];\n        });\n\n        if (value && props.facet) {\n            newQuery.facets[props.facet.meta] = value;\n        } else {\n            props.facet && delete newQuery.facets[props.facet.meta];\n        }\n\n        if (props.query.parameters && props.query.parameters.events) {\n            newQuery.parameters.lt_eventDate = currentDateString;\n        } else {\n            newQuery.parameters.ge_eventDate = currentDateString;\n        }\n\n        newQuery.startRank = 1;\n        newQuery.misspelling = null;\n        newQuery.interacted = true;\n\n        props.update.query(newQuery);\n        props.update.results(!props.update.updateState);\n    };\n\n    if (props.facet && props.facet.values && hiddenFacets && props.facet.values.length > hiddenFacets) {\n        return (\n            <div\n                className={`finder__filter finder__select ${\n                    currentValue && 'finder__select--selected'\n                }`}\n            >\n                <label\n                    htmlFor={`meta_${props.facet.meta}_and--${randomNumber}`}\n                >\n                    {props.facet.name}\n                </label>\n                <select\n                    name={`meta_${props.facet.meta}_and`}\n                    id={`meta_${props.facet.meta}_and--${randomNumber}`}\n                    onChange={(e) => setFacet(e.target.value)}\n                    value={currentValue}\n                >\n                    <option\n                        value=\"\"\n                        id={`meta${props.facet.meta}all--${randomNumber}`}\n                    >\n                        {props.facet.noSelection}\n                    </option>\n\n                    {props.facet.values.map((value, i) => {\n                        const responseFacetDetails =\n                            props.responseFacet[0] &&\n                            props.responseFacet[0].allValues &&\n                            props.responseFacet[0].allValues.filter(\n                                (responseFacetValue) =>\n                                    responseFacetValue.data.toLowerCase() ===\n                                    value.data.toLowerCase()\n                            );\n                        if (\n                            currentValue.toLowerCase() ===\n                                value.data.toLowerCase() ||\n                            (responseFacetDetails && responseFacetDetails[0])\n                        ) {\n                            return (\n                                <option\n                                    key={i}\n                                    value={value.data.toLowerCase()}\n                                >\n                                    {value.label}\n                                    {currentValue !== value.data &&\n                                    responseFacetDetails[0] &&\n                                    responseFacetDetails[0].count > 0\n                                        ? ` (${responseFacetDetails[0].count})`\n                                        : ''}\n                                </option>\n                            );\n                        } else {\n                            return null;\n                        }\n                    })}\n                </select>\n            </div>\n        );\n    } else {\n        return null;\n    }\n}\n\nFinder__Select.propTypes = {\n    facet: PropTypes.object,\n    query: PropTypes.object,\n    responseFacet: PropTypes.arrayOf(PropTypes.object),\n    update: PropTypes.object,\n    dependencies: PropTypes.arrayOf(PropTypes.object),\n    mobile: PropTypes.bool,\n};\n\nexport default Finder__Select;\n","/**\n * @module patterns/finder/components/finder__filters\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport SelectFilter from './finder__select';\nimport EventSelectFilter from './finder__eventSelect';\nimport CheckboxFilter from './finder__checkbox';\nimport ParamCheckBox from './finder__paramCheckbox';\nimport EventCheckBox from './finder__eventCheckbox';\nimport HiddenInput from './finder__hiddenInput';\nimport TagFilter from './finder__tag';\nimport Reset from './finder__reset';\nimport Sort from './finder__sort';\nimport { gaEvent } from '../../util';\nimport type { Filters } from '../../types/filters/filters';\nimport type { FacetDetails } from '../../types/facet';\n\n/**\n * Predicate for whether a facet should be displayed, if it's dependent on\n * another facet being set.\n *\n * @param {object} facet The facet to potentially display.\n * @param {object} facetMap The facets currently set on the query.\n * @return {bool} - Has any dependency been met\n */\nfunction dependencyMet(facet: FacetDetails, facetMap: {[key: string]: string;}) {\n    const setFacets = Object.keys(facetMap);\n\n    if (!facet.dependency) {\n        return true;\n    }\n\n    if (\n        setFacets.indexOf(facet.dependency) >= 0 &&\n        facetMap[facet.dependency] !== ''\n    ) {\n        return true;\n    }\n\n    return false;\n}\n\n/**\n * Component to update facet values in the query.\n *\n * @param {object} props React props.\n * @returns {object} - React component.\n */\nfunction Finder__Filters(props: Filters) {\n    const totalMatching =\n        props.response &&\n        props.response.summary &&\n        props.response.summary.fullyMatching;\n    const clearFiltersDesktop =\n            !props.updating && Object.keys(props.query.facets).length > 0 ? (\n                <div className=\"finder__filters__reset finder__filters__reset--desktop\">\n                    <Reset\n                        clear={props.clear}\n                        resetSort={false}\n                        matrixState={props.matrixState}\n                    />\n                </div>\n            ) : null,\n        clearFiltersMobile =\n            (!props.updating && Object.keys(props.query.facets).length > 0) ||\n            props.query.sortType !== props.config.sort[0].type ? (\n                <Reset\n                    clear={props.clear}\n                    resetSort={true}\n                    matrixState={props.matrixState}\n                />\n            ) : null;\n\n    const sort =\n        !props.matrixState &&\n        props.config.sort.length > 1 &&\n        props.config.displaySort &&\n        totalMatching ? (\n            <div className=\"wrapper--finder__select--sort--mobile\">\n                <Sort\n                    key={props.mobile ? 'sort-mobile' : 'sort-desktop'}\n                    config={props.config}\n                    query={props.query}\n                    update={props.update}\n                />\n            </div>\n        ) : null;\n\n    const submitSSR = props.matrixState ? (\n        <div className=\"finder__filter__submit\">\n            <button\n                type=\"submit\"\n                className=\"finder__query__submit finder__submit\"\n            >\n                <span\n                    className=\"fal fa-sharp fa-search finder__query__submit__icon\"\n                    aria-hidden=\"true\"\n                />{' '}\n                <span className=\"finder__query__submit__text\">Find</span>\n            </button>\n        </div>\n    ) : null;\n\n    return (\n        <div className=\"finder__filters\">\n            <h2 className=\"finder__filters__heading\">\n                <span className=\"finder__filters__heading__text\">\n                    <span\n                        className=\"far fa-sharp fa-sliders-h icon\"\n                        aria-hidden=\"true\"\n                    />{' '}\n                    {`Filter ${props.config.summariseAs && props.config.summariseAs.plural}`}\n                </span>\n                {clearFiltersMobile}\n            </h2>\n\n            <fieldset>\n                {!props.hasMounted && props.query.fixedParameters\n                    ? props.query.fixedParameters.map((param) => {\n                          return (\n                              <HiddenInput\n                                  key={param.name}\n                                  name={param.name}\n                                  value={param.value}\n                              />\n                          );\n                      })\n                    : null}\n                <div className=\"wrapper--finder_filters--filters\">\n                    {props.config.facetLabels && props.config.facetLabels.map((facet) => {\n                        if (dependencyMet(facet, props.query.facets)) {\n                            switch (facet.type) {\n                                case 'eventCheckBox':\n                                    return (\n                                        <EventCheckBox\n                                            key={facet.meta}\n                                            facet={facet}\n                                            query={props.query}\n                                            update={props.update}\n                                            pastEventsResponse={\n                                                props.response.extraSearches &&\n                                                props.response.extraSearches\n                                                    .past &&\n                                                props.response.extraSearches\n                                                    .past.response\n                                            }\n                                            matrixState={props.matrixState}\n                                        />\n                                    );\n                                case 'paramCheckBox':\n                                    return (\n                                        <ParamCheckBox\n                                            key={facet.meta}\n                                            facet={facet}\n                                            query={props.query}\n                                            update={props.update}\n                                            pastEventsResponse={\n                                                props.response.extraSearches &&\n                                                props.response.extraSearches\n                                                    .past &&\n                                                props.response.extraSearches\n                                                    .past.response\n                                            }\n                                        />\n                                    );\n                                case 'eventSelect':\n                                    return (\n                                        <EventSelectFilter\n                                            key={facet.meta}\n                                            facet={facet}\n                                            query={props.query}\n                                            responseFacet={\n                                                props.response &&\n                                                props.response.facets\n                                                    ? props.response.facets.filter(\n                                                          (funnelbackFacet) =>\n                                                              funnelbackFacet.name ===\n                                                              facet.funnelbackName\n                                                      )\n                                                    : []\n                                            }\n                                            update={props.update}\n                                            dependencies={props.config.facetLabels && props.config.facetLabels.filter(\n                                                (candidate) =>\n                                                    candidate.dependency ===\n                                                    facet.meta\n                                            )}\n                                            mobile={props.mobile}\n                                        />\n                                    );\n                                case 'select':\n                                    return (\n                                        <SelectFilter\n                                            key={facet.meta}\n                                            facet={facet}\n                                            query={props.query}\n                                            responseFacet={\n                                                props.response &&\n                                                props.response.facets\n                                                    ? props.response.facets.filter(\n                                                          (funnelbackFacet) =>\n                                                              funnelbackFacet.name ===\n                                                              facet.funnelbackName\n                                                      )\n                                                    : []\n                                            }\n                                            update={props.update}\n                                            dependencies={props.config.facetLabels && props.config.facetLabels.filter(\n                                                (candidate) =>\n                                                    candidate.dependency ===\n                                                    facet.meta\n                                            )}\n                                            mobile={props.mobile}\n                                        />\n                                    );\n                                case 'checkbox':\n                                    return (\n                                        <CheckboxFilter\n                                            key={facet.meta}\n                                            facet={facet}\n                                            query={props.query}\n                                            responseFacet={\n                                                props.response &&\n                                                props.response.facets\n                                                    ? props.response.facets.filter(\n                                                          (funnelbackFacet) =>\n                                                              funnelbackFacet.name ===\n                                                              facet.funnelbackName\n                                                      )\n                                                    : []\n                                            }\n                                            update={props.update}\n                                            dependencies={props.config.facetLabels && props.config.facetLabels.filter(\n                                                (candidate) =>\n                                                    candidate.dependency ===\n                                                    facet.meta\n                                            )}\n                                            mobile={props.mobile}\n                                        />\n                                    );\n                                case 'tag':\n                                    return (\n                                        <TagFilter\n                                            key={facet.meta}\n                                            facet={facet}\n                                            query={props.query}\n                                            responseFacet={\n                                                props.response &&\n                                                props.response.facets\n                                                    ? props.response.facets.filter(\n                                                          (funnelbackFacet) =>\n                                                              funnelbackFacet.name ===\n                                                              facet.funnelbackName\n                                                      )\n                                                    : []\n                                            }\n                                            update={props.update}\n                                            dependencies={props.config.facetLabels && props.config.facetLabels.filter(\n                                                (candidate) =>\n                                                    candidate.dependency ===\n                                                    facet.meta\n                                            )}\n                                            matrixState={props.matrixState}\n                                        />\n                                    );\n                                default:\n                                    gaEvent(\n                                        'jsError',\n                                        'JavaScript error',\n                                        'finder__filters()',\n                                        'Unknown filter type in finder__filters.js',\n                                        0,\n                                        true\n                                    );\n                            }\n                        } else {\n                            return null;\n                        }\n                    })}\n                    <p className=\"finder__filters__nofilters\">\n                        No filters are valid for the current query.\n                    </p>\n                    {clearFiltersDesktop}\n                    {sort}\n                    {submitSSR}\n                </div>\n            </fieldset>\n        </div>\n    );\n}\n\nFinder__Filters.propTypes = {\n    config: PropTypes.object,\n    query: PropTypes.object,\n    response: PropTypes.object,\n    update: PropTypes.object,\n    clear: PropTypes.func,\n    mobile: PropTypes.bool,\n    hasMounted: PropTypes.bool,\n    matrixState: PropTypes.bool,\n    updating: PropTypes.bool,\n};\n\nexport default Finder__Filters;\n","/**\n * @module patterns/finder/components/wrapper--finder__filters--mobile\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport Filters from './finder__filters';\nimport * as createFocusTrap from 'focus-trap';\nimport type { FiltersMobiles } from '../../types/filters/filters';\n\nimport { enableBodyScroll, disableBodyScroll } from '../../util';\n\n/**\n * Render the mobile version of the filters.\n */\nfunction Finder__FiltersMobile(props: FiltersMobiles) {\n    const [display, setDisplay] = useState(false);\n    const [focusTrap, setFocusTrap] = useState<createFocusTrap.FocusTrap | null>(null);\n    const filtersRef = useRef<HTMLDivElement | null>(null);\n\n    // Set up the focus trap once after mount\n    useEffect(() => {\n        const filtersEl = filtersRef.current;\n        if (!filtersEl) return;\n\n        const trap = createFocusTrap.createFocusTrap(filtersEl, {\n            initialFocus: filtersEl.querySelector(\n                '.wrapper--finder__filters--mobile__apply'\n            ) as HTMLElement | undefined,\n            onDeactivate: () => setDisplay(false),\n            clickOutsideDeactivates: true,\n        });\n\n        setFocusTrap(trap);\n    }, []);\n\n    // Manage focus trap and scroll behavior based on `display`\n    useEffect(() => {\n        if (!focusTrap) return;\n\n        if (display) {\n            if (!focusTrap.active) focusTrap.activate();\n            disableBodyScroll();\n        } else {\n            if (focusTrap.active) focusTrap.deactivate();\n            enableBodyScroll();\n        }\n    }, [display, focusTrap]);\n\n    const totalMatching =\n        props.response && props.response.summary && props.response.summary.totalMatching;\n\n    const result =\n        totalMatching === 1 && props.summariseAs     \n            ? props.summariseAs.singular\n            : props.summariseAs && props.summariseAs.plural\n            ? props.summariseAs.plural:\n            null;\n\n    const totalMatchingMessage = totalMatching\n        ? `Show ${totalMatching} ${result}`\n        : 'Close';\n\n    const filtersCount =\n        props.config.displaySort ? (\n            props.config.sort[0].type !== props.query.sortType ||\n            Object.keys(props.query.facets).length > 0 ? (\n                <span>\n                    Filters{' '}\n                    <span className=\"wrapper--finder__filters--mobile__toggle__count\">\n                        (\n                        {props.config.sort[0].type !== props.query.sortType\n                            ? Object.keys(props.query.facets).length + 1\n                            : Object.keys(props.query.facets).length}\n                        )\n                    </span>\n                </span>\n            ) : (\n                <span>Filter</span>\n            )\n        ) : Object.keys(props.query.facets).length > 0 ? (\n            <span>\n                Filters{' '}\n                <span className=\"wrapper--finder__filters--mobile__toggle__count\">\n                    (\n                    {props.config.sort[0].type !== props.query.sortType\n                        ? Object.keys(props.query.facets).length + 1\n                        : Object.keys(props.query.facets).length}\n                    )\n                </span>\n            </span>\n        ) : (\n            <span>Filter</span>\n        );\n\n    const toggle = display ? null : (\n        <button\n            type=\"button\"\n            className=\"wrapper--finder__filters--mobile__toggle\"\n            aria-haspopup={true}\n            aria-expanded={display}\n            onClick={() => setDisplay(true)}\n            data-filters-applied={\n                Object.keys(props.query.facets).length !== 0 ||\n                (props.config.displaySort &&\n                    props.config.sort[0].type !== props.query.sortType)\n            }\n        >\n            <span>\n                <span className=\"far fa-sharp fa-sliders-h icon\" aria-hidden=\"true\" />{' '}\n                {filtersCount}\n            </span>\n        </button>\n    );\n\n    return (\n        <div\n            className=\"wrapper--finder__filters\"\n            data-open={display}\n            ref={filtersRef}\n        >\n            {toggle}\n            <div className=\"wrapper--finder__filters--mobile__filters\">\n                <div className=\"wrapper--finder__filters--mobile__filters__content\">\n                    <Filters\n                        config={props.config}\n                        query={props.query}\n                        response={props.response}\n                        update={props.update}\n                        clear={props.clear}\n                        mobile={props.mobile}\n                        hasMounted={props.hasMounted}\n                        matrixState={props.matrixState}\n                        updating={props.updating}\n                    />\n                </div>\n            </div>\n            <div className=\"wrapper--finder__filters--mobile__apply\">\n                <button\n                    type=\"button\"\n                    aria-expanded={display}\n                    onClick={() => setDisplay(false)}\n                    disabled={props.updating}\n                >\n                    {Object.keys(props.query.facets).length === 0 ? null : (\n                        <span className=\"far fa-chevron-left icon\"></span>\n                    )}\n\n                    <span aria-live=\"polite\">\n                        {props.updating ? (\n                            <>\n                                <span\n                                    className=\"fas fa-spinner fa-pulse icon\"\n                                    aria-hidden=\"true\"\n                                />{' '}\n                                <span className=\"wrapper--finder__filters--mobile__apply__text\">\n                                    Updating {props.summariseAs && props.summariseAs.plural}\n                                </span>\n                            </>\n                        ) : (\n                            <span className=\"wrapper--finder__filters--mobile__apply__text\">\n                                {Object.keys(props.query.facets).length === 0\n                                    ? 'Close'\n                                    : totalMatchingMessage}\n                            </span>\n                        )}\n                    </span>\n                </button>\n            </div>\n        </div>\n    );\n}\n\nFinder__FiltersMobile.propTypes = {\n    config: PropTypes.object,\n    query: PropTypes.object,\n    response: PropTypes.object,\n    update: PropTypes.object,\n    clear: PropTypes.func,\n    updating: PropTypes.bool,\n    summariseAs: PropTypes.object,\n    mobile: PropTypes.bool,\n    hasMounted: PropTypes.bool,\n    matrixState: PropTypes.bool,\n};\n\nexport default Finder__FiltersMobile;\n","/**\n * @module patterns/finder/components/finder__checkbox\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport type { FixedParameters } from '../../types/query';\nfunction Finder__hiddenInput(props: FixedParameters) {\n    return (\n        <input\n            type=\"hidden\"\n            id={props.name}\n            name={props.name}\n            value={props.value}\n        />\n    );\n}\n\nFinder__hiddenInput.propTypes = {\n    name: PropTypes.string,\n    value: PropTypes.string,\n};\n\nexport default Finder__hiddenInput;\n","/**\n * @module patterns/finder/components/finder__checkbox\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport type { ParamCheckBox } from '../../types/filters/filters';\n\nfunction Finder__paramCheckbox(props: ParamCheckBox) {\n    const stringLength = 16,\n        stringOffset = -4,\n        randomNumber = Math.random().toString(stringLength).slice(stringOffset),\n        pastEventsResponseTotal =\n            props.pastEventsResponse &&\n            props.pastEventsResponse.resultPacket.resultsSummary &&\n            props.pastEventsResponse.resultPacket.resultsSummary.fullyMatching,\n        pastEventsPartialResponseTotal =\n            props.pastEventsResponse &&\n            props.pastEventsResponse.resultPacket.resultsSummary &&\n            props.pastEventsResponse.resultPacket.resultsSummary\n                .partiallyMatching,\n        toggleChecked = props.query.parameters && props.facet.meta in props.query.parameters,\n        totalText = pastEventsResponseTotal\n            ? pastEventsResponseTotal\n            : pastEventsPartialResponseTotal\n            ? pastEventsPartialResponseTotal\n            : 0;\n\n    const toggleFacet = () => {\n        let newQuery = props.query;\n\n        if(!newQuery.parameters){\n            newQuery.parameters = {};\n        }\n\n        \n        if(toggleChecked){\n            delete newQuery.parameters[props.facet.meta]\n        }else if(props.facet.checkedValue !== undefined){\n            (newQuery.parameters[props.facet.meta] =\n                  props.facet.checkedValue);\n        }\n\n        newQuery.startRank = 1;\n        newQuery.misspelling = null;\n        newQuery.interacted = true;\n\n        props.update.query(newQuery);\n        props.update.results(!props.update.updateState);\n    };\n\n    if (totalText > 0) {\n        return (\n            <div className=\"finder__filter finder__checkbox\">\n                <input\n                    type=\"checkbox\"\n                    id={`${props.facet.funnelbackName}--${randomNumber}`}\n                    name={props.facet.meta}\n                    value={(props.facet.checkedValue ?? '') as string}\n                    onChange={() => toggleFacet()}\n                    checked={toggleChecked}\n                />\n                <div\n                    className=\"finder__checkbox__indicator finder__checkbox__indicator\"\n                    aria-hidden=\"true\"\n                    onClick={() => toggleFacet()}\n                >\n                    {toggleChecked ? (\n                        <span className=\"fa fa-fw fas fa-check icon\"></span>\n                    ) : null}\n                </div>\n                <label\n                    className=\"finder__filters__label--always\"\n                    htmlFor={`${props.facet.funnelbackName}--${randomNumber}`}\n                >\n                    {props.facet.name}\n                    {!toggleChecked && totalText && ' (' + totalText + ')'}\n                </label>\n            </div>\n        );\n    } else {\n        return null;\n    }\n}\n\nFinder__paramCheckbox.propTypes = {\n    facet: PropTypes.object,\n    query: PropTypes.object,\n    pastEventsResponse: PropTypes.object,\n    update: PropTypes.object,\n    dependencies: PropTypes.arrayOf(PropTypes.object),\n};\n\nexport default Finder__paramCheckbox;\n","/**\n * @module patterns/finder/components/filters/finder__reset\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport type { Reset } from '../../types/filters/filters';\n\n/**\n * Clear input button.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Reset(props: Reset) {\n    if (props.matrixState) {\n        return (\n            <a href=\"?\" className=\"finder__reset\" type=\"button\">\n                <span className=\"fa-sharp fa-solid fa-xmark icon\" />\n                <span className=\"finder__reset__text\">Reset</span>\n            </a>\n        );\n    } else {\n        return (\n            <button\n                className=\"finder__reset\"\n                type=\"button\"\n                onClick={() => {\n                    props.clear(props.resetSort);\n                }}\n            >\n                <span className=\"fa-sharp fa-solid fa-xmark icon\" />\n                <span className=\"finder__reset__text\">Reset</span>\n            </button>\n        );\n    }\n}\n\nFinder__Reset.propTypes = {\n    clear: PropTypes.func,\n    resetSort: PropTypes.bool,\n    matrixState: PropTypes.bool,\n};\n\nexport default Finder__Reset;\n","/**<\n * @module patterns/finder/components/finder__select\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport type { Select } from '../../types/filters/filters';\n\nfunction Finder__Select(props: Select) {\n    const randomNumber = props.mobile ? 'mobile' : 'desktop',\n        currentValue = props.facet && props.query.facets[props.facet.meta] || '';\n\n    // reduce the facet configuration to an array of all possible values for\n    // the facet\n    const allFacets = props.facet && props.facet.values && props.facet.values.reduce((acc, data) => {\n        return [...acc, data];\n    }, []);\n\n    // reduce the Funnelback response for the facet to an array of valid\n    // values for the current query\n    const responseFacets =\n        props.responseFacet[0] && props.responseFacet[0].allValues\n            ? props.responseFacet[0].allValues.reduce((acc, data) => {\n                  return [...acc, data.data];\n              }, [])\n            : [];\n\n    // count how many possible facets are not valid for the current query\n    // and will be hidden\n    const hiddenFacets: number = allFacets ? allFacets\n        .map((facet) => facet.data)\n        .filter(\n            (facet) => responseFacets.indexOf(facet.toLowerCase()) < 0\n        ).length\n        : 0;\n\n    const setFacet = (value: string) => {\n        const newQuery = props.query;\n\n        props.dependencies && props.dependencies.map((facet) => {\n            delete newQuery.facets[facet.meta];\n        });\n\n        if (value && props.facet) {\n            newQuery.facets[props.facet.meta] = value;\n        } else {\n            props.facet && delete newQuery.facets[props.facet.meta];\n        }\n\n        newQuery.startRank = 1;\n        newQuery.misspelling = null;\n        newQuery.interacted = true;\n\n        props.update.query(newQuery);\n        props.update.results(!props.update.updateState);\n    };\n\n    if (props.facet && props.facet.values && (props.facet.values.length > hiddenFacets)) {\n        return (\n            <div\n                className={`finder__filter finder__select ${\n                    currentValue && 'finder__select--selected'\n                }`}\n            >\n                <label\n                    htmlFor={`meta_${props.facet.meta}_and--${randomNumber}`}\n                >\n                    {props.facet.name}\n                </label>\n                <select\n                    name={`meta_${props.facet.meta}_and`}\n                    id={`meta_${props.facet.meta}_and--${randomNumber}`}\n                    onChange={(e) => setFacet(e.target.value)}\n                    value={currentValue}\n                >\n                    <option\n                        value=\"\"\n                        id={`meta${props.facet.meta}all--${randomNumber}`}\n                    >\n                        {props.facet.noSelection}\n                    </option>\n\n                    {props.facet.values.map((value, i) => {\n                        const responseFacetDetails =\n                            props.responseFacet[0] &&\n                            props.responseFacet[0].allValues &&\n                            props.responseFacet[0].allValues.filter(\n                                (responseFacetValue) =>\n                                    responseFacetValue.data.toLowerCase() ===\n                                    value.data.toLowerCase()\n                            );\n                        if (\n                            currentValue.toLowerCase() ===\n                                value.data.toLowerCase() ||\n                            (responseFacetDetails && responseFacetDetails[0])\n                        ) {\n                            return (\n                                <option\n                                    key={i}\n                                    value={value.data.toLowerCase()}\n                                >\n                                    {value.label}\n                                    {currentValue !== value.data &&\n                                    responseFacetDetails[0] &&\n                                    responseFacetDetails[0].count > 0\n                                        ? ` (${responseFacetDetails[0].count})`\n                                        : ''}\n                                </option>\n                            );\n                        } else {\n                            return null;\n                        }\n                    })}\n                </select>\n            </div>\n        );\n    } else {\n        return null;\n    }\n}\n\nFinder__Select.propTypes = {\n    facet: PropTypes.object,\n    query: PropTypes.object,\n    responseFacet: PropTypes.arrayOf(PropTypes.object),\n    update: PropTypes.object,\n    dependencies: PropTypes.arrayOf(PropTypes.object),\n    mobile: PropTypes.bool,\n};\n\nexport default Finder__Select;\n","/**\n * @module patterns/finder/components/finder__sort\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport type { Sort } from '../../types/filters/filters';\n\n/**\n * Component to change the sort order of the query.\n *\n * @param {object} props React props.\n * @returns {object} - React component.\n */\nfunction Finder__Sort(props: Sort) {\n    const stringLength = 16,\n        stringOffset = -4,\n        randomNumber = Math.random().toString(stringLength).slice(stringOffset);\n\n    const setSort = (type: string) => {\n        const newQuery = props.query;\n\n        newQuery.sortType = type;\n        newQuery.startRank = 1;\n        newQuery.misspelling = null;\n        newQuery.interacted = true;\n\n        props.update.query(newQuery);\n        props.update.results(!props.update.updateState);\n    };\n\n    const validSorts = props.config.sort.filter((sortType) =>\n        sortType.type === ''\n            ? props.query.query !== '' ||\n              Object.keys(props.query.facets).length > 0 ||\n              props.query.sortType === ''\n                ? true\n                : false\n            : true\n    );\n\n    return validSorts.length > 1 ? (\n        <div\n            className={`finder__select--sort finder__select${\n                props.query.sortType !== props.config.sort[0].type\n                    ? ' finder__select--selected'\n                    : ''\n            }`}\n        >\n            <label\n                className=\"finder__select__overline\"\n                htmlFor={`sort--${randomNumber}`}\n            >\n                Sort by\n            </label>\n            <select\n                name=\"sort\"\n                id={`sort--${randomNumber}`}\n                onChange={(e) => setSort(e.target.value)}\n                value={props.query.sortType}\n            >\n                {validSorts.map((sortType, i) => {\n                    return (\n                        <option key={i} value={sortType.type}>\n                            {sortType.label}\n                        </option>\n                    );\n                })}\n            </select>\n        </div>\n    ) : null;\n}\n\nFinder__Sort.propTypes = {\n    config: PropTypes.object,\n    query: PropTypes.object,\n    update: PropTypes.object,\n};\n\nexport default Finder__Sort;\n","/**\n * @module patterns/finder/components/finder__tag\n * @author Web Development\n * @copyright City St George's, University of London 2020\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { hyperLink } from '../../logic/hyper-link';\nimport useHasMounted from '../../logic/has-mounted';\nimport type { Tag } from '../../types/filters/filters';\n\nfunction Finder__Tag(props: Tag) {\n    const hasMounted = useHasMounted();\n\n    if (!hasMounted) return null;\n\n    // reduce the facet configuration to an array of all possible values for\n    // the facet\n    const allFacets = props.facet && props.facet.values&&  props.facet.values.reduce((acc, data) => {\n        return [...acc, data];\n    }, []);\n\n    // reduce the Funnelback response for the facet to an array of valid\n    // values for the current query\n    const responseFacets =\n        props.responseFacet[0] && props.responseFacet[0].allValues\n            ? props.responseFacet[0].allValues.reduce((acc, data) => {\n                  return [...acc, data.data];\n              }, [])\n            : [];\n\n    // count how many possible facets are not valid for the current query\n    // and will be hidden\n    const hiddenFacets = allFacets && allFacets\n        .map((facet) => facet.data)\n        .filter(\n            (facet) => responseFacets.indexOf(facet.toLowerCase()) < 0\n        ).length;\n\n    const deleteFacet = () => {\n        const newQuery = props.query;\n\n        props.dependencies && props.dependencies.map((facet) => {\n            delete newQuery.facets[facet.meta];\n        });\n\n        delete newQuery.facets[props.facet.meta];\n\n        newQuery.startRank = 1;\n        newQuery.misspelling = null;\n        newQuery.interacted = true;\n\n        props.update.query(newQuery);\n        props.update.results(!props.update.updateState);\n    };\n\n    const labelText = props.query.facets[props.facet.meta] && props.facet.values && hiddenFacets &&\n        props.facet.values.length >= hiddenFacets && (\n            <React.Fragment>\n                <span\n                    className=\"fa-sharp fa-solid fa-xmark icon\"\n                    aria-hidden=\"true\"\n                ></span>\n                <span className=\"finder__tag__text\">\n                    <span className=\"sr-only\">Remove filter for </span>\n                    {props.facet.name}:{' '}\n                    {\n                        props.facet.values.filter(\n                            (value) =>\n                                value.data.toLowerCase() ===\n                                props.query.facets[\n                                    props.facet.meta\n                                ].toLowerCase()\n                        )[0].label\n                    }\n                </span>\n            </React.Fragment>\n        );\n\n    const ssrHiddenField =\n        props.matrixState && props.query.facets[props.facet.meta] ? (\n            <input\n                type=\"hidden\"\n                name={`meta_${props.facet.meta}_and`}\n                value={props.query.facets[props.facet.meta]}\n            />\n        ) : null;\n\n    if (\n        props.facet.values && hiddenFacets &&\n        props.facet.values.length >= hiddenFacets &&\n        props.query.facets[props.facet.meta]\n    ) {\n        return (\n            <div className=\"finder__filter finder__tag\">\n                {ssrHiddenField}\n                {props.matrixState && props.query.facets[props.facet.meta] ? (\n                    <a href={hyperLink(props.query, props.facet)}>\n                        {labelText}\n                    </a>\n                ) : (\n                    <button onClick={() => deleteFacet()} type=\"button\">\n                        {labelText}\n                    </button>\n                )}\n            </div>\n        );\n    } else {\n        return null;\n    }\n}\n\nFinder__Tag.propTypes = {\n    facet: PropTypes.object,\n    query: PropTypes.object,\n    responseFacet: PropTypes.arrayOf(PropTypes.object),\n    update: PropTypes.object,\n    dependencies: PropTypes.arrayOf(PropTypes.object),\n    matrixState: PropTypes.bool,\n};\n\nexport default Finder__Tag;\n","/**\n * @module patterns/finder/components/finder__clear\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport type { Clear, ResetSort } from '../../types/update';\n\n/**\n * Clear input button.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Clear(props: Clear & {resetSort?: ResetSort}) {\n    return (\n        <button\n            className=\"finder__clear\"\n            type=\"button\"\n            onClick={() => {\n                props.clear(props.resetSort);\n            }}\n        >\n            <span className=\"fa-sharp fa-solid fa-xmark icon \" />\n            <span className=\"finder__clear__text\">Clear query</span>\n        </button>\n    );\n}\n\nFinder__Clear.propTypes = {\n    clear: PropTypes.func,\n    resetSort: PropTypes.bool,\n};\n\nexport default Finder__Clear;\n","/**\n * @module patterns/finder/components/finder__query\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport type { CancelTokenSource } from 'axios';\nimport { suggest } from '../../logic/funnelback';\nimport Clear from './finder__clear';\nimport useHasMounted from '../../logic/has-mounted'; //  added\nimport type { QueryInput } from '../../types/query/query';\n\nconst maximumSuggestions = 5;\nconst escapeKey = 'Escape',\n    endKey = 'End',\n    homeKey = 'Home',\n    arrowUp = 'ArrowUp',\n    arrowDown = 'ArrowDown';\n\nfunction highlightQueryTerm(suggestion: string, partialQuery: string) {\n    return (\n        <span>\n            <span className=\"sr-only\">{suggestion}</span>\n            <span aria-hidden=\"true\">\n                <span className=\"finder__suggestion\">\n                    {suggestion.slice(\n                        suggestion.indexOf(partialQuery.toLowerCase()),\n                        suggestion.indexOf(partialQuery.toLowerCase()) +\n                            partialQuery.length\n                    )}\n                </span>\n                {suggestion.slice(\n                    suggestion.indexOf(partialQuery.toLowerCase()) +\n                        partialQuery.length\n                )}\n            </span>\n        </span>\n    );\n}\n\nfunction Finder__Query(props: QueryInput) {\n    const hasMounted = useHasMounted(); //  detect client vs server\n\n    const [partialQuery, setPartialQuery] = useState(props.query.query || '');\n    const [suggestions, setSuggestions] = useState([]);\n    const [call, setCall] = useState<CancelTokenSource | null>(null);\n    const [inputId] = useState('finder--' + props.query.collection);\n    const [showSuggestions, setShowSuggestions] = useState(false);\n    const [activeSuggestionID, setActiveSuggestionID] = useState('');\n    let textInput: HTMLInputElement | null = null;\n\n    useEffect(() => {\n        setPartialQuery(props.query.query);\n    }, [props.query.query, props.updating]);\n\n    useEffect(() => {\n        return () => {\n            if (call) call.cancel();\n        };\n    }, [call]);\n\n    function focusInput() {\n        textInput && textInput.focus();\n    }\n\n    const clearQuery = () => {\n        if (call) call.cancel();\n\n        setPartialQuery('');\n        setSuggestions([]);\n        focusInput();\n\n        const newQuery = { ...props.query };\n        newQuery.misspelling = null;\n        newQuery.query = '';\n        newQuery.sortType = props.config.sort[0].type;\n        newQuery.startRank = 1;\n        newQuery.interacted = true;\n\n        props.update.query(newQuery);\n        props.update.results(!props.update.updateState);\n    };\n\n    const submitForm = (query?: string) => {\n        if (call) call.cancel();\n        setSuggestions([]);\n\n        const newQuery = props.query;\n\n        newQuery.misspelling = null;\n        newQuery.query = query ? query : partialQuery ? partialQuery : '';\n        newQuery.sortType = partialQuery ? '' : props.config.sort[0].type;\n        newQuery.startRank = 1;\n        newQuery.interacted = true;\n\n        props.update.query(newQuery);\n        props.update.results(!props.update.updateState);\n    };\n\n    const clear = partialQuery && (\n        <Clear\n            clear={() => {\n                clearQuery();\n            }}\n        />\n    );\n\n    const submitSuggestion = (suggestion: string) => {\n        setShowSuggestions(false);\n        setSuggestions([]);\n        focusInput();\n        submitForm(suggestion);\n    };\n    const suggestionsList = suggestions && suggestions.length > 0 && (\n        <ul\n            role=\"listbox\"\n            aria-label=\"Search suggestions\"\n            aria-activedescendant={activeSuggestionID}\n            className={\n                showSuggestions\n                    ? 'finder__query__suggestions show'\n                    : 'finder__query__suggestions hide'\n            }\n        >\n            {[...new Set(suggestions)]\n                .slice(0, maximumSuggestions)\n                .map((suggestion, i) => (\n                    <li key={suggestion} role=\"option\" id={inputId + '--' + i}>\n                        <button\n                            type=\"button\"\n                            onBlur={() => {\n                                setActiveSuggestionID('');\n                                setShowSuggestions(false);\n                            }}\n                            onFocus={() => setShowSuggestions(true)}\n                            onMouseDown={() => submitSuggestion(suggestion)}\n                            onClick={() => submitSuggestion(suggestion)}\n                            onKeyDown={(e) => {\n                                switch (e.key) {\n                                    case escapeKey:\n                                        e.currentTarget\n                                            .closest('.finder__query')\n                                            ?.querySelector('input')\n                                            ?.focus();\n                                        setSuggestions([]);\n                                        setActiveSuggestionID('');\n                                        break;\n                                    case arrowUp:\n                                        e.preventDefault();\n                                        e.currentTarget.parentElement\n                                            ?.previousElementSibling\n                                            ?.querySelector('button')\n                                            ?.focus();\n                                        break;\n                                    case arrowDown:\n                                        e.preventDefault();\n                                        e.currentTarget.parentElement\n                                            ?.nextElementSibling\n                                            ?.querySelector('button')\n                                            ?.focus();\n                                        break;\n                                    case homeKey:\n                                        e.preventDefault();\n                                        const first = e.currentTarget.closest('ul')?.firstChild;\n                                        if (first instanceof Element) {\n                                            first.querySelector('button')?.focus();\n                                        }\n                                        break;\n                                    case endKey:\n                                        e.preventDefault();\n                                        const last = e.currentTarget.closest('ul')?.lastChild;\n                                        if (last instanceof Element) {\n                                            last.querySelector('button')?.focus();\n                                        }\n                                        break;\n                                }\n                            }}\n                        >\n                            {highlightQueryTerm(suggestion, partialQuery)}\n                        </button>\n                    </li>\n                ))}\n        </ul>\n    );\n\n    //  Server-side fallback\n    if (!hasMounted) {\n        return (\n            <fieldset className=\"finder__query\">\n                <div className=\"finder__query__input\">\n                    <label className=\"sr-only\" htmlFor={inputId}>\n                        {`Search ${props.config.summariseAs && props.config.summariseAs.plural}`}\n                    </label>\n                    <input\n                        type=\"text\"\n                        id={inputId}\n                        name=\"query\"\n                        className=\"finder__query-input\"\n                        placeholder={props.config.placeholder}\n                        defaultValue={partialQuery}\n                    />\n                    <button type=\"submit\" className=\"finder__query__submit\">\n                        <span\n                            className=\"fal fa-sharp fa-search finder__query__submit__icon\"\n                            aria-hidden=\"true\"\n                        />\n                        <span className=\"finder__query__submit__text\">Find</span>\n                    </button>\n                </div>\n            </fieldset>\n        );\n    }\n\n    //  Interactive version after hydration\n    return (\n        <fieldset className=\"finder__query\">\n            <div className=\"finder__query__input\">\n                <div className=\"finder__query__icon--wrapper\">\n                    <span\n                        className=\"finder__icon fal fa-sharp fa-search icon\"\n                        aria-hidden=\"true\"\n                    ></span>\n                </div>\n                <label className=\"sr-only\" htmlFor={inputId}>\n                    {`Search ${props.config.summariseAs && props.config.summariseAs.plural}`}\n                </label>\n                <input\n                    autoComplete=\"off\"\n                    id={inputId}\n                    name=\"query\"\n                    placeholder={props.config.placeholder}\n                    ref={(input) => {\n                        textInput = input;\n                    }}\n                    type=\"text\"\n                    value={partialQuery}\n                    onKeyDown={(e) => {\n                        if (e.key === escapeKey) clearQuery();\n                        else if (e.key === arrowDown && suggestions.length > 0) {\n                            e.preventDefault(); \n                            const button = e.currentTarget\n                            .parentElement\n                            ?.querySelector('.finder__query__suggestions button') as HTMLButtonElement | null; \n                                 \n                            button?.focus();\n                            setActiveSuggestionID(\n                                e.currentTarget.parentElement?.querySelector(\n                                    '.finder__query__suggestions li'\n                                )?.id || ''\n                            );\n                        }\n                    }}\n                    onFocus={() => setShowSuggestions(true)}\n                    onBlur={() => setShowSuggestions(false)}\n                    onChange={(e) => {\n                        const val = e.target.value;\n                        setPartialQuery(val);\n                        setSuggestions([]);\n                        if (call) call.cancel();\n\n                        if (val) {\n                            const [promise, newCall] = suggest(\n                                props.query.collection,\n                                val,\n                                props.config.dxp ? props.config.dxp : false\n                            ) as [Promise<any>, CancelTokenSource];;\n                            setCall(newCall);\n                            promise\n                                .then((data) => setSuggestions(data))\n                                .catch(() => setSuggestions([]));\n                        } else {\n                            setSuggestions([]);\n                        }\n                    }}\n                />\n                {suggestionsList}\n                {clear}\n                <button\n                    type=\"submit\"\n                    className=\"finder__query__submit\"\n                    onClick={() => submitForm()}\n                >\n                    <span\n                        className=\"fal fa-sharp fa-search finder__query__submit__icon\"\n                        aria-hidden=\"true\"\n                    />\n                    <span className=\"finder__query__submit__text\">Find</span>\n                </button>\n            </div>\n        </fieldset>\n    );\n}\n\nFinder__Query.propTypes = {\n    config: PropTypes.object,\n    query: PropTypes.object,\n    update: PropTypes.object,\n    updating: PropTypes.bool,\n};\n\nexport default Finder__Query;\n","/**\n * @module patterns/finder/components/results/finder__announcement\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport DOMPurify from 'dompurify';\nimport type { Announcement } from '../../types/results/results';\n\n/**\n * Renders the announcement box\n *\n * @param {object} props React props.\n * @returns {object} - React component.\n */\n\nfunction Finder__Announcement(props: Announcement) {\n    const clean = DOMPurify.sanitize(props.announcement, {\n        ALLOWED_TAGS: ['strong', 'p', 'h2', 'h3', 'a'],\n    });\n\n    return (\n        <div className=\"finder__results__announcement\">\n            <p dangerouslySetInnerHTML={{ __html: clean }} />\n        </div>\n    );\n}\n\nFinder__Announcement.propTypes = {\n    announcement: PropTypes.string,\n};\n\nexport default Finder__Announcement;\n","/**\n * @module patterns/finder/components/finder__didyoumean\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport type { DidYouMean } from '../../types/results/results';\n\n/**\n * Returns a Funnelback spelling suggestion as a button to update the query.\n *\n * @param {object} props React props.\n * @returns {object} - React component.\n */\nfunction Finder__DidYouMean(props: DidYouMean) {\n    const suggestion =\n    props.response.spell?.text?.split(/\\s/)[0].trim() ?? '';\n\n    const didyoumean = props.query.misspelling ? (\n        <p className=\"finder__results__didyoumean\">\n            No {props.summariseAs && props.summariseAs.plural} found for {props.query.misspelling}.\n            Searching instead for {props.query.query}.\n        </p>\n    ) : (\n        <p className=\"finder__results__didyoumean\">\n            Did you mean{' '}\n            <button\n                type=\"button\"\n                className=\"finder__didyoumean__button\"\n                onClick={() => {\n                    const newQuery = { ...props.query }; // clone the query object\n                    newQuery.query = suggestion;\n                    newQuery.startRank = 1;\n                    newQuery.misspelling = null;\n                    newQuery.interacted = true;\n                    newQuery.facets = {};\n                    props.update.query(newQuery);\n                    props.update.results(!props.update.updateState);\n                }}\n            >\n                {suggestion}\n            </button>\n\n            ?\n        </p>\n    );\n\n    return didyoumean;\n}\n\nFinder__DidYouMean.propTypes = {\n    query: PropTypes.object,\n    response: PropTypes.object,\n    summariseAs: PropTypes.object,\n    update: PropTypes.object,\n};\n\nexport default Finder__DidYouMean;\n","/**\n * @module patterns/finder/components/finder__pagination\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { hyperLink } from '../../logic/hyper-link';\nimport type { Pagination } from '../../types/results/results';\n\n/**\n * Renders standard pagination controls patttern for the results.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Pagination(props: Pagination) {\n    const numberOfPages = props.totalMatching && props.numRanks && Math.ceil(props.totalMatching / props.numRanks),\n        currentPage = props.currStart && props.numRanks && Math.ceil(props.currStart / props.numRanks),\n        pages = [];\n\n    const changePage = (pageNumber: number) => {\n        const newStartRank = props.numRanks && 1 + (pageNumber - 1) * props.numRanks,\n            newQuery = props.query;\n\n        newQuery.startRank = newStartRank;\n        newQuery.misspelling = null;\n        newQuery.interacted = true;\n\n        props.update.query(newQuery);\n        props.update.results(!props.update.updateState);\n    };\n\n    pages.push(\n        currentPage === 1 ? (\n            <span\n                key=\"previousPage\"\n                className=\"pagination__controls__button--prev\"\n            >\n                <span>Previous page</span>\n            </span>\n        ) : (\n            <a\n                className=\"pagination__controls__button--prev\"\n                key=\"prev\"\n                onClick={(e) => {\n                    e.preventDefault();\n                    currentPage && changePage(currentPage - 1);\n                }}\n                href={hyperLink(\n                    props.query,\n                    null,\n                    currentPage - 1,\n                    props.numRanks\n                )}\n            >\n                <span>Previous page {currentPage}</span>\n            </a>\n        )\n    );\n\n    for (let page = 1; page <= numberOfPages; page++) {\n        let className;\n        switch (page - numberOfPages) {\n            case 0:\n                className =\n                    'pagination__controls__element pagination__controls__button pagination__controls__button--last';\n                break;\n            case -1:\n                className =\n                    'pagination__controls__element pagination__controls__button pagination__controls__button--penultimate';\n                break;\n            default:\n                className =\n                    'pagination__controls__element pagination__controls__button';\n        }\n\n        pages.push(\n            <a\n                aria-current={page === currentPage ? 'page' : undefined}\n                aria-expanded={page === currentPage ? true : false}\n                aria-label={`Open page ${page}`}\n                className={className}\n                data-page={page}\n                data-proximity={Math.abs(page - currentPage)}\n                key={page}\n                onClick={(e) => {\n                    e.preventDefault();\n                    changePage(page);\n                }}\n                href={hyperLink(props.query, null, page, props.numRanks)}\n            >\n                <span>{page}</span>\n            </a>\n        );\n\n        if (page === 1) {\n            pages.push(\n                <span\n                    key=\"firstEllipsis\"\n                    className=\"pagination__controls__element pagination__controls__ellipsis pagination__controls__ellipsis--first\"\n                >\n                    <span></span>\n                </span>\n            );\n        } else if (page === numberOfPages - 1) {\n            pages.push(\n                <span\n                    key=\"lastEllipsis\"\n                    className=\"pagination__controls__element pagination__controls__ellipsis pagination__controls__ellipsis--last\"\n                >\n                    <span></span>\n                </span>\n            );\n        }\n    }\n\n    pages.push(\n        currentPage === numberOfPages ? (\n            <span key=\"nextPage\" className=\"pagination__controls__button--next\">\n                <span>Next page</span>\n            </span>\n        ) : (\n            <a\n                className=\"pagination__controls__button--next\"\n                key=\"next\"\n                onClick={(e) => {\n                    e.preventDefault();\n                    currentPage === numberOfPages ? null : changePage(currentPage + 1);\n                }}\n                href={hyperLink(\n                    props.query,\n                    null,\n                    currentPage + 1,\n                    props.numRanks\n                )}\n            >\n                <span>Next page</span>\n            </a>\n        )\n    );\n\n    return (\n        <div className=\"pagination__wrapper\">\n            <nav\n                className=\"pagination__controls\"\n                data-pagecount={numberOfPages}\n            >\n                {pages}\n            </nav>\n        </div>\n    );\n}\n\nFinder__Pagination.propTypes = {\n    currStart: PropTypes.number,\n    query: PropTypes.object,\n    numRanks: PropTypes.number,\n    totalMatching: PropTypes.number,\n    update: PropTypes.object,\n};\n\nexport default Finder__Pagination;\n","/**\n * @module patterns/finder/components/finder__results\n * @author Web Development\n * @copyright City, University of London 2021\n */\n\nimport BestBet from '../cards/finder__results__bestbet';\nimport Card from '../cards/finder__results__card';\nimport DidYouMean from './finder__didyoumean';\nimport Pagination from './finder__pagination';\nimport PromoCard from '../cards/finder__results__promo';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport Summary from './finder__results__summary';\nimport Announcement from './finder__announcement';\nimport type { FinderResults } from '../../types/results/results';\n\n/**\n * Render Funnelback results.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results(props: FinderResults) {\n    const updating = (\n        <p className=\"finder__results__updating\" aria-live=\"polite\">\n            <span className=\"fas fa-spinner fa-pulse icon\" aria-hidden=\"true\" />{' '}\n            <span>Updating {props.summariseAs && props.summariseAs.plural}</span>\n        </p>\n    );\n\n    /**\n     * Display promo card based on user search/filter input.\n     *\n     * Props passed from finder. If conditions are met, promo card will display between first\n     * result card and the rest of the returned results.\n     */\n    let promoCardConditionMet = false, // Are conditions met to render promo card?\n        matchedPromoGroup: {[key: string]: string}[] = [], // Matching promo group based on query parameters\n        matchedPromoGroupDetails; // Matched promo group data to render to card\n\n    if (props.promo) {\n        let promoConditions = props.promo[0]['conditions'], // Conditions to render promo card\n            promoDetails = props.promo[0]['details'], // Details rendered to promo card\n            filterFacets = props.query.facets, // User-defined filter/search values\n            searchFacets = props.query.query.toLowerCase(), // User-input search value\n            promoCardConditionGroup: string, // Group-specific data to render in promo card\n            queryFacetsAll = { ...filterFacets, searchFacets }; // Combine filter and search inputs\n\n        // Promo condition check and define group\n        let queryFacetsArray = [];\n        let queries = Object.values(queryFacetsAll);\n        for (const query of queries) {\n            queryFacetsArray.push(query);\n        }\n\n        // Remove empty array items\n        queries = queries.filter((item) => item);\n\n        // Loop query parameters and check if they match any of the promo card conditions\n        for (const q of queries) {\n            matchedPromoGroup = promoConditions.filter(\n                (el) =>\n                    el.school === q ||\n                    el.level === q ||\n                    el.related === q ||\n                    el.subject === q ||\n                    el.type === q ||\n                    el.searchQuery1 === q\n            );\n        }\n\n        // Assign promo group value and define if promo card conditions are met\n        matchedPromoGroup.length > 0\n            ? (promoCardConditionGroup = matchedPromoGroup[0]['promoGroup']) &&\n              (promoCardConditionMet = true)\n            : (promoCardConditionMet = false);\n\n        // Filter promo card details to match correct group of data\n        matchedPromoGroupDetails = promoDetails.filter(\n            (el) => el.promoGroup === promoCardConditionGroup\n        );\n    }\n\n    const resultsClass =\n        'resultsVariant' in props.config\n            ? `finder__results__list finder__results__list--${props.config.resultsVariant}`\n            : 'finder__results__list';\n\n    if (props.response) {\n        const summary = (\n            <Summary\n                clear={props.clear}\n                config={props.config}\n                currEnd={props.response.summary.currEnd}\n                currStart={props.response.summary.currStart}\n                numRanks={props.response.summary.numRanks}\n                query={props.query}\n                summariseAs={props.summariseAs}\n                totalMatching={props.response.summary.totalMatching}\n                update={props.update}\n                summaryHeadingRef={props.summaryHeadingRef}\n            />\n        );\n\n        const announcement = props.config.announcement && (\n            <Announcement announcement={props.config.announcement} />\n        );\n\n        const didYouMean = (props.query.misspelling ||\n            props.response.spell) && (\n            <DidYouMean\n                query={props.query}\n                summariseAs={props.summariseAs}\n                response={props.response}\n                update={props.update}\n            />\n        );\n\n        // if we have more results than will fit on a single page, we need\n        // pagination\n        const pagination = props.response.summary.totalMatching && props.response.summary.numRanks && props.response.summary.totalMatching >\n            props.response.summary.numRanks && (\n            <Pagination\n                currStart={props.response.summary.currStart}\n                numRanks={props.response.summary.numRanks}\n                query={props.query}\n                totalMatching={props.response.summary.totalMatching}\n                update={props.update}\n            />\n        );\n\n        const promoCard = matchedPromoGroupDetails && (<PromoCard\n                            heading={matchedPromoGroupDetails[0]['heading']}\n                            body={matchedPromoGroupDetails[0]['body']}\n                            linkRef={matchedPromoGroupDetails[0]['linkRef']}\n                            linkText={matchedPromoGroupDetails[0]['linkText']}\n                        />);\n\n        let results,\n            secondItemOnwards = props.response.results;\n\n        if (\n            promoCardConditionMet &&\n            (props.response.bestBets && props.response.bestBets.length > 0 ||\n                props.response.results.length > 0)\n        ) {\n            if (props.query.startRank === 1) {\n                const firstItemData = props.response.results[0];\n                const secondItemOnwardsData = Array.from(\n                    secondItemOnwards.slice(1)\n                );\n\n                results = (\n                    <ol\n                        start={props.response.summary.currStart}\n                        className={resultsClass}\n                    >\n                        <Card\n                            bestBets={false}\n                            details={firstItemData}\n                            type={props.type}\n                            query={props.query}\n                        />\n                        {promoCard}\n                        {secondItemOnwardsData.map((s) => (\n                            <Card\n                                bestBets={false}\n                                details={s}\n                                key={s.docNum}\n                                type={props.type}\n                                query={props.query}\n                            />\n                        ))}\n                    </ol>\n                );\n            } else {\n                results = (\n                    <ol\n                        start={props.response.summary.currStart}\n                        className={resultsClass}\n                    >\n                        {props.response.results.map((card) => (\n                            <Card\n                                bestBets={false}\n                                details={card}\n                                key={card.docNum}\n                                type={props.type}\n                                query={props.query}\n                            />\n                        ))}\n                    </ol>\n                );\n            }\n        }\n\n        if (props.response.results && !promoCardConditionMet) {\n            results =\n                props.response.bestBets && props.response.bestBets.length > 0 ||\n                props.response.results.length > 0 ? (\n                    <ol\n                        start={props.response.summary.currStart}\n                        className={resultsClass}\n                    >\n                        {props.response.bestBets && props.response.bestBets.map((card, i) => (\n                            <BestBet details={card} key={`best-bet__${i}`} />\n                        ))}\n\n                        {props.response.results.map((card) => (\n                            <Card\n                                bestBets={false}\n                                details={card}\n                                key={card.docNum}\n                                type={props.type}\n                                query={props.query}\n                            />\n                        ))}\n                    </ol>\n                ) : null;\n        }\n\n        // render either the results, or a spinner while we wait for Funnelback\n        const resultsContent = props.updating ? (\n            <React.Fragment>{updating}</React.Fragment>\n        ) : (\n            <React.Fragment>\n                {didYouMean}\n                {announcement}\n                {summary}\n                {results}\n                {pagination}\n            </React.Fragment>\n        );\n        return <div className=\"finder__results\">{resultsContent}</div>;\n    } else {\n        return <div className=\"finder__results\">{updating}</div>;\n    }\n}\n\nFinder__Results.propTypes = {\n    clear: PropTypes.func,\n    query: PropTypes.object,\n    response: PropTypes.object,\n    summariseAs: PropTypes.object,\n    type: PropTypes.string,\n    update: PropTypes.object,\n    updating: PropTypes.bool,\n    config: PropTypes.object,\n    promo: PropTypes.array,\n    pastEventsQuery: PropTypes.object,\n    pastEventsResponse: PropTypes.object,\n    pastEventsUpdate: PropTypes.object,\n    matrixState: PropTypes.object,\n};\n\nexport default Finder__Results;\n","/**\n * @module patterns/finder/components/finder__results__summary\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport Sort from '../filters/finder__sort';\nimport type { SummaryResults } from '../../types/results/results';\n\n/**\n * Results heading, summarising the response.\n *\n * @param {object} props React props.\n * @return {object} - React component.\n */\nfunction Finder__Results__Summary(props: SummaryResults) {\n    const result =\n            props.totalMatching === 1\n                ? props.summariseAs.singular\n                : props.summariseAs.plural,\n        formatter = new Intl.NumberFormat('en-GB'),\n        sort =\n            props.config.sort.length > 1 && props.config.displaySort ? (\n                <div className=\"wrapper--finder__select--sort--desktop\">\n                    <Sort\n                        config={props.config}\n                        query={props.query}\n                        update={props.update}\n                    />\n                </div>\n            ) : null;\n\n    if (props.totalMatching === 0) {\n        return (\n            <div className=\"finder__results__summary finder__results__summary--noresults\" ref={props.summaryHeadingRef}>\n                <h2 className=\"finder__results__summary__heading\">\n                    Your search did not match any {props.summariseAs.plural}.\n                </h2>\n                <p>Suggestions:</p>\n                <ul>\n                    <li>Make sure that all words are spelled correctly</li>\n                    <li>Try different keywords</li>\n                    <li>Try more general keywords</li>\n                    <li>Try fewer keywords</li>\n                    <li>Try fewer filters</li>\n                    {Object.keys(props.query.facets).length > 0 && (\n                        <li>\n                            <button\n                                type=\"button\"\n                                onClick={() => {\n                                    props.clear(true);\n                                }}\n                            >\n                                Reset filters\n                            </button>\n                        </li>\n                    )}\n                    {props.query.query && (\n                        <li>\n                            <button\n                                type=\"button\"\n                                onClick={() => {\n                                    const newQuery = props.query;\n\n                                    newQuery.query = '';\n                                    newQuery.sortType =\n                                        props.config.sort[0].type;\n                                    newQuery.misspelling = null;\n                                    newQuery.startRank = 1;\n                                    newQuery.interacted = true;\n\n                                    props.update.query(newQuery);\n                                    props.update.results(\n                                        !props.update.updateState\n                                    );\n                                }}\n                            >\n                                Reset query\n                            </button>\n                        </li>\n                    )}\n                </ul>\n            </div>\n        );\n    } else {\n        return (\n            <div className=\"finder__results__summary\" ref={props.summaryHeadingRef}>\n                <h2\n                    aria-live=\"polite\"\n                    className=\"finder__results__summary__heading\"\n                >\n                    {props.query.query ||\n                    Object.keys(props.query.facets).length > 0\n                        ? 'Matching'\n                        : 'All'}{' '}\n                    {result}{' '}\n                    <span>\n                        (showing{' '}\n                        {props.totalMatching > props.numRanks && (\n                            <>\n                                <span>{formatter.format(props.currStart)}</span>\n                                <span>{props.currEnd && formatter.format(props.currEnd)}</span>{' '}\n                                of{' '}\n                            </>\n                        )}\n                        <span>{formatter.format(props.totalMatching)}</span>{' '}\n                        {result}\n                        {props.query.query && ` for ${props.query.query}`})\n                    </span>\n                </h2>\n                {sort}\n            </div>\n        );\n    }\n}\n\nFinder__Results__Summary.propTypes = {\n    clear: PropTypes.func,\n    config: PropTypes.object,\n    currEnd: PropTypes.number,\n    currStart: PropTypes.number,\n    numRanks: PropTypes.number,\n    query: PropTypes.object,\n    summariseAs: PropTypes.object,\n    totalMatching: PropTypes.number,\n    update: PropTypes.object,\n};\n\nexport default Finder__Results__Summary;\n","import React from 'react';\n\nconst formatLabel = (label: string, value: string) => {\n    if (!value) return label;\n\n    const parts = label.split(value);\n\n    return (\n        <React.Fragment>\n            {parts.reduce<React.ReactNode[]>((acc, part, i) => {\n                if (i === 0) {\n                    return [part];\n                }\n                return acc.concat(\n                    <span className=\"highlightText\" key={value + part}>\n                        {value}\n                    </span>,\n                    part\n                );\n            }, [])}\n        </React.Fragment>\n    );\n};\n\nexport default formatLabel;\n","/**\n * @module patterns/finder/component/tools/finder__toolTip\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport type { ToolTip }  from '../../types/cards/card';\n\nfunction Finder__ToolTip(props: ToolTip) {\n    const toggleLabel = () => setShow(!show);\n\n    const [show, setShow] = useState(false);\n\n    const {\n        thumbnailSourceName,\n        thumbnailSourceUrl,\n        thumbnailAuthorName,\n        thumbnailAuthorUrl,\n        thumbnailLicenceType,\n        thumbnailLicenceUrl,\n        displayToolTip,\n    } = props;\n\n    const labelAuthor =\n            thumbnailAuthorUrl && thumbnailAuthorName ? (\n                <a href={thumbnailAuthorUrl}>{thumbnailAuthorName}</a>\n            ) : thumbnailAuthorName ? (\n                <span>{thumbnailAuthorName}</span>\n            ) : null,\n        labelSource =\n            thumbnailSourceUrl && thumbnailSourceName ? (\n                <a href={thumbnailSourceUrl}>{thumbnailSourceName}</a>\n            ) : thumbnailSourceName ? (\n                <span>{thumbnailSourceName}</span>\n            ) : null,\n        labelLicense =\n            thumbnailLicenceUrl && thumbnailLicenceType ? (\n                <a href={thumbnailLicenceUrl}>{thumbnailLicenceType}</a>\n            ) : thumbnailLicenceType ? (\n                thumbnailLicenceType\n            ) : null;\n\n    if (displayToolTip && (thumbnailAuthorName || thumbnailSourceName)) {\n        return (\n            <figure className=\"wrapper--tooltip__label\" data-open={show}>\n                <button\n                    className=\"tooltip tooltip--image-credit\"\n                    type=\"button\"\n                    aria-expanded={show}\n                    onClick={toggleLabel}\n                >\n                    <span\n                        className={`tooltip__icon icon fa-sharp fa-light fa-subtitles ${\n                            show ? 'fa-xmark' : 'fa-subtitles'\n                        }`}\n                    />\n                    <span className=\"sr-only\">Show image credit</span>\n                </button>\n                <figcaption className=\"tooltip__label\">\n                    {labelAuthor} {labelSource && '/ '} {labelSource}{' '}\n                    {labelLicense}\n                </figcaption>\n            </figure>\n        );\n    } else {\n        return null;\n    }\n}\n\nFinder__ToolTip.propTypes = {\n    thumbnailSourceName: PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.bool,\n    ]),\n    thumbnailSourceUrl: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n    thumbnailAuthorName: PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.bool,\n    ]),\n    thumbnailAuthorUrl: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n    thumbnailLicenseType: PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.bool,\n    ]),\n    thumbnailLicenseUrl: PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.bool,\n    ]),\n    displayToolTip: PropTypes.bool,\n};\n\nexport default Finder__ToolTip;\n","import React, { useEffect, useState, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport Query from '../../components/query/finder__query';\nimport Filters from '../../components/filters/finder__filtersmobile';\nimport Results from '../../components/results/finder__results';\nimport useLogicWrapper from '../../logic/logic';\nimport useHasMounted from '../../logic/has-mounted';\n\nimport type { MatrixConfigJSON } from '../../types/configJSON';\n\ntype FinderProps = {\n    config:MatrixConfigJSON;\n    initialResults?: any;\n    initialQuery?: any;\n    element: HTMLElement | null;\n}\n\nfunction Finder(props: FinderProps) {\n    const hasMounted = useHasMounted();\n    const {\n        query,\n        funnelbackResponse,\n        updating,\n        updater,\n        clear,\n        matrixState,\n        summaryHeadingRef,\n    } = useLogicWrapper(\n        props.config,\n        props.initialResults || {},\n        props.initialQuery,\n        props.element\n    );\n\n    // Generate class name based on filters\n    const formClass =\n        props.config.facetLabels && props.config.facetLabels.length > 0 ? 'finder' : 'finder finder--nofilters';\n\n    return (\n        <form\n            className='finder'\n            method=\"GET\"\n            // prevent default only after mount\n            onSubmit={(e) => {\n                if(useHasMounted()){\n                    e.preventDefault();\n                }\n            }}\n        >\n            <Query\n                config={props.config}\n                query={query}\n                update={updater}\n                updating={updating}\n            />\n            {props.config.facetLabels && props.config.facetLabels.length > 0 && (\n                <Filters\n                    config={props.config}\n                    query={query}\n                    response={funnelbackResponse}\n                    update={updater}\n                    updating={updating}\n                    summariseAs={props.config.summariseAs}\n                    clear={clear}\n                    mobile={true}\n                    hasMounted={hasMounted}\n                    matrixState={matrixState}\n                />\n            )}\n\n            <Results\n                clear={clear}\n                config={props.config}\n                query={query}\n                response={funnelbackResponse}\n                summariseAs={props.config.summariseAs}\n                type={props.config.resultCard}\n                update={updater}\n                updating={updating}\n                summaryHeadingRef={summaryHeadingRef}\n            />\n        </form>\n    );\n}\n\nFinder.propTypes = {\n    config: PropTypes.object.isRequired,\n    element: PropTypes.object,\n    initialQuery: PropTypes.object,\n    initialResults: PropTypes.object,\n};\n\nexport default Finder;\n","/**\n * Functions for making requests to Funnelback\n *\n * @module funnelback\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport axios from 'axios';\nimport https from 'https';\nimport { axiosRequest } from '../util';\nimport type { FixedParameters, FixedFacets } from '../types/query';\nimport type { CancelTokenSource } from 'axios';\nimport type { Response } from '../types/FBresponse';\n\ntype Facets = { [key: string]: string };\ntype Parameters = { [key: string]: string };\n\nconst baseUrl = 'https://www.citystgeorges.ac.uk/web-services',\n    dxpBaseUrl = 'https://www.citystgeorges.ac.uk/web-services/dxp-fb',\n    findRootUrl = '/funnelback-16-find',\n    dxpFindRootUrl = '/funnelback-dxp-find',\n    dxpSuggestRootUrl = '/funnelback-dxp-suggest',\n    suggestRootUrl = '/funnelback-16-suggest',\n    maximumSuggestions = 100,\n    timeout = 30000;\n\n/**\n * Funnelback search query.\n *\n * @param {string} collection The Funnelback collection to query.\n * @param {string} [query] The query string.\n * @param {string} [sortType] The field to sort by.\n * @param {integer} startRank The first result to return.\n * @param {integer} numRank The number of results to return.\n * @param {object} [facets] A map of facets to query strings.\n * @return {Promise} - A promise of search results.\n */\nexport function find(\n    collection: string,\n    fixedFacets: FixedFacets[] | undefined,\n    fixedParameters: FixedParameters[] | undefined,\n    query: string,\n    sortType: string | undefined,\n    startRank: number | undefined,\n    numRank: number | undefined,\n    facets: Facets,\n    parameters: Parameters | undefined,\n    dxp: boolean\n):[Promise<Response>, CancelTokenSource] {\n    const fixedParams: {[key: string] : string} = {};\n    fixedParameters && fixedParameters.forEach((param) => {\n        fixedParams[`${param.name}`] = param.value;\n    });\n\n    const params: {[key: string] : string} = {},\n        paramsKeys = parameters ? Object.keys(parameters) : [];\n\n    parameters && paramsKeys.forEach((key: string) => (params[key] = parameters[key]));\n\n    const fixedFacetParams: {[key: string] : string} = {};\n    fixedFacets && fixedFacets.forEach((facet) => {\n        fixedFacetParams[`meta_${facet.meta}_and`] = facet.value;\n    });\n\n    const facetParams: {[key: string] : string} = {},\n        facetKeys = Object.keys(facets);\n\n    facetKeys.forEach((key: string) => (facetParams[`meta_${key}_and`] = facets[key]));\n\n    const CancelToken = axios.CancelToken,\n        call = CancelToken.source(),\n        config = {\n            baseURL: dxp ? dxpBaseUrl : baseUrl,\n            cancelToken: call.token,\n            httpsAgent: new https.Agent({ keepAlive: true }),\n            url: dxp ? dxpFindRootUrl : findRootUrl,\n            timeout: timeout,\n            params: {\n                ...fixedParams,\n                ...fixedFacetParams,\n                ...facetParams,\n                ...params,\n                collection: collection,\n                num_ranks: numRank,\n                query: query,\n                sort: sortType || '',\n                start_rank: startRank,\n            },\n        };\n\n    return [axiosRequest(config), call];\n}\n\n/**\n * Funnelback suggestion query.\n *\n * @param {string} collection The Funnelback collection to query.\n * @param {string} partialQuery The string to make suggestions for.\n * @return {Promise} - A promise of an array of suggestion strings.\n */\nexport function suggest(collection: string, partialQuery: string, dxp: boolean) {\n    const CancelToken = axios.CancelToken,\n        call = CancelToken.source(),\n        config = {\n            baseURL: dxp ? dxpBaseUrl : baseUrl,\n            cancelToken: call.token,\n            url: dxp ? dxpSuggestRootUrl : suggestRootUrl,\n            timeout: timeout,\n            params: {\n                collection: collection,\n                partial_query: partialQuery,\n                show: maximumSuggestions,\n            },\n        };\n\n    return [axiosRequest(config), call];\n}\n\n/**\n * Finder configuration.\n *\n * @param {string} url The Finder configuration file.\n * @return {Promise} - A promise of  configuration object.\n */\nexport function finderConfig(url: string) {\n    const config = {\n        timeout: timeout,\n        url: url,\n    };\n\n    return axiosRequest(config);\n}\n","/**\n * custom hook to check if react has mounted\n *\n *\n * @module patterns/finder/finder\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport { useState, useEffect } from 'react';\n\nfunction useHasMounted() {\n    const [hasMounted, setHasMounted] = useState(false);\n\n    useEffect(() => {\n        setHasMounted(true);\n    }, []);\n\n    return hasMounted;\n}\n\nexport default useHasMounted;\n","import { flattenObj } from '../../shared/util';\nimport type { FacetDetails } from '../types/facet';\nimport type { QueryDetails } from '../types/query'\n\nfunction remove(obj: Record<string, any>, key: string): void {\n    for (let k in obj) {\n        if (k === key) {\n            delete obj[k];\n        } else if (typeof obj[k] === 'object' && obj[k] !== null) {\n            remove(obj[k], key);\n        }\n    }\n}\n\nexport function hyperLink(query: QueryDetails, facet: FacetDetails | null, pageNumber?: number, numberRank?: number) {\n    const newStartRank = pageNumber && numberRank && 1 + (pageNumber - 1) * numberRank;\n    let newQuery = JSON.parse(JSON.stringify(query)); //deep clone\n\n    facet && facet.type === 'tag' && facet.meta && remove(newQuery, facet.meta);\n\n    const flattenQuery = flattenObj(newQuery);\n\n    return (\n        '?' +\n        Object.entries(flattenQuery)\n            .filter((key) => {\n                let param = Object.values(key);\n\n                if (param[1] === '') {\n                    return false;\n                } else {\n                    switch (param[0]) {\n                        case 'interacted':\n                            return false;\n                        case 'num_rank':\n                            return false;\n                        case 'start_rank':\n                            return false;\n                        default:\n                            return true;\n                    }\n                }\n            })\n            .map((key) => {\n                let param = Object.values(key);\n\n                if (/fixedParameters/.test(param[0])) {\n                    return (\n                        encodeURIComponent(param[0].substring(16)) +\n                        '=' +\n                        encodeURIComponent(param[1])\n                    );\n                } else if (/fixedFacets/.test(param[0])) {\n                    return (\n                        encodeURIComponent(\n                            `meta_${param[0].substring(12)}_and`\n                        ) +\n                        '=' +\n                        encodeURIComponent(param[1])\n                    );\n                } else if (/parameters/.test(param[0])) {\n                    return (\n                        encodeURIComponent(param[0].substring(11)) +\n                        '=' +\n                        encodeURIComponent(param[1])\n                    );\n                }\n                switch (param[0]) {\n                    case 'collection':\n                        return (\n                            encodeURIComponent(param[0]) +\n                            '=' +\n                            encodeURIComponent(param[1])\n                        );\n                    case 'query':\n                        return (\n                            encodeURIComponent(param[0]) +\n                            '=' +\n                            encodeURIComponent(param[1])\n                        );\n                    case 'sortType':\n                        return (\n                            encodeURIComponent('sort') +\n                            '=' +\n                            encodeURIComponent(param[1])\n                        );\n                    case 'startRank':\n                        return (\n                            encodeURIComponent('start_rank') +\n                            '=' +\n                            encodeURIComponent(facet ? param[1] : newStartRank)\n                        );\n                    case 'numRanks':\n                        return (\n                            encodeURIComponent('num_rank') +\n                            '=' +\n                            encodeURIComponent(param[1])\n                        );\n                    default:\n                        return (\n                            encodeURIComponent(`meta_${param[0]}_and`) +\n                            '=' +\n                            encodeURIComponent(param[1])\n                        );\n                }\n            })\n            .join('&')\n    );\n}\n","import { useState, useEffect, useRef } from 'react';\nimport useHasMounted from './has-mounted';\nimport replaceHistory from './replace-history';\nimport { getNonFBParams, getFacetParams } from './url-params';\nimport { reduceMotion } from '../util';\nimport { find } from './funnelback';\nimport scroll from 'zenscroll';\n\nimport type { MatrixConfigJSON } from '../types/configJSON';\nimport type { Response } from '../types/FBresponse';\nimport type { QueryDetails } from '../types/query';\n\ntype Cancelable = { cancel: () => void };\n\n\nfunction useLogicWrapper(config: MatrixConfigJSON, results: Response, matrixQuery: {[key: string]: string}, element: HTMLElement | null) {\n    const summaryHeadingRef = useRef<HTMLDivElement | null>(null);\n    const hasMounted = useHasMounted();\n    const screenOffsetRatio = 10;\n\n    const scrollDuration = typeof window !== 'undefined' && !reduceMotion() ? 1000 : 0;\n\n    const initialResults = results || {};\n    const nonFBParams = config.facetLabels && config.facetLabels.filter(p => p.nonFBParam);\n    const initializeParams = !hasMounted && matrixQuery && config.facetLabels ? getFacetParams(config.facetLabels, matrixQuery, true) : {};\n\n\n    /**\n     * initial state for the Funnelback query, taken from URL parameters and\n     * configuration\n     **/\n    const initialQuery = {\n        collection: config.collection,\n        facets: initializeParams,\n        parameters: matrixQuery && matrixQuery.parameters && matrixQuery.parameters.length > 0 ? matrixQuery.parameters : {},\n        fixedFacets: config.fixedFacets,\n        fixedParameters: config.fixParameters ? config.fixParameters : [],\n        interacted: false,\n        misspelling: null as string | null,\n        numRanks: config.numRanks,\n        query: matrixQuery && matrixQuery.query ? matrixQuery.query : '',\n        sortType: config.sort[0].type,\n        startRank: 1,\n    };\n\n    const [defaultParams, setDefaultParams] = useState(matrixQuery || null);\n    const [query, setQuery] = useState<QueryDetails>(initialQuery); // will set once defaultParams is ready\n    const [funnelbackResponse, setResponse] = useState<Readonly<Response>>(\n            Object.keys(initialResults).length > 0\n                ? Object.freeze(results)\n                : Object.freeze({\n                    bestBets: [],\n                    extraSearches: {},\n                    facets: [],\n                    results: [],\n                    spell: null,\n                    summary: {\n                    currEnd: 0,\n                    currStart: 0,\n                    numRanks: 0,\n                    totalMatching: 0,\n                    },\n                })\n            );\n\n\n    const [updating, setUpdating] = useState(Object.keys(initialResults).length === 0);\n    const [call, setCall] = useState<Cancelable>({ cancel: () => {} });\n    const [update, setUpdate] = useState(false);\n\n    // Step 1: Initialize defaultParams after mount\n    useEffect(() => {\n        if (!defaultParams && typeof window !== 'undefined') {\n            const searchParams = new URLSearchParams(window.location.search);\n            const obj: { [key: string]: string } = {};\n            searchParams.forEach((value, key) => {\n                obj[key] = value;\n                });\n            setDefaultParams(obj);\n        }\n    }, [defaultParams]);\n\n    // Step 2: Build initial query once defaultParams is ready\n    useEffect(() => {\n        if (!defaultParams) return;\n\n        const matrixState = !hasMounted && matrixQuery ? true : false;\n\n        const baseQuery = {\n            collection: config.collection,\n            facets: config.facetLabels && config.facetLabels.length > 0\n                ? getFacetParams(config.facetLabels, defaultParams, matrixState)\n                : {},\n            parameters: config.facetLabels && nonFBParams && nonFBParams.length > 0\n                ? getNonFBParams(config.facetLabels, defaultParams, matrixState)\n                : {},\n            fixedFacets: config.fixedFacets,\n            fixedParameters: config.fixParameters || [],\n            interacted: false,\n            misspelling: null as string | null,\n            numRanks: config.numRanks,\n            query: !matrixState && defaultParams['query']\n                ? defaultParams['query']\n                : defaultParams.query || '',\n            sortType: !matrixState && defaultParams['query']\n                ? ''\n                : !matrixState && defaultParams['sort']\n                ? defaultParams['sort']\n                : config.sort[0].type,\n            startRank: !matrixState && defaultParams['start_rank']\n                ? parseInt(defaultParams['start_rank'], 10)\n                : typeof defaultParams.start_rank === 'string'\n                    ? parseInt(defaultParams.start_rank, 10)\n                    : 1,\n        };\n\n        setQuery(baseQuery);\n    }, [defaultParams, hasMounted]);\n\n    // Step 3: Patch query after mount\n    useEffect(() => {\n        if (hasMounted && defaultParams && defaultParams['num_ranks']) {\n            setQuery(prev => ({\n                ...prev,\n                numRanks: parseInt(defaultParams['num_ranks'], 10) || prev.numRanks,\n            }));\n        }\n    }, [hasMounted, defaultParams]);\n\n    // Step 4: Update response when `update` flips\n    useEffect(() => {\n        if (!query) return;\n\n        replaceHistory(\n            query.query,\n            query.startRank,\n            query.facets,\n            query.parameters || {},\n            query.sortType,\n            config.facetLabels || [],\n            config.sort[0].type,\n            hasMounted\n        );\n\n        setUpdating(true);\n\n        if (query.interacted && element) {\n            const resultsEl = element.querySelector('.finder__results');\n            if(resultsEl instanceof HTMLElement){\n                scroll.center(\n                    resultsEl,\n                    scrollDuration,\n                    -window.innerHeight / screenOffsetRatio\n                );\n            }\n        }\n\n        call.cancel();\n\n        const [request, requestToken] = find(\n            query.collection,\n            query.fixedFacets,\n            query.fixedParameters,\n            query.query,\n            query.sortType,\n            query.startRank,\n            query.numRanks,\n            query.facets,\n            query.parameters,\n            config.dxp || false\n        );\n\n        setCall({ cancel: () => requestToken.cancel() });\n\n        request\n            .then(data => {\n                setResponse(data as Readonly<Response>); //  Freeze before setting\n                setUpdating(false);\n            })\n            .then(() => {\n                if (query.interacted && summaryHeadingRef.current) {\n                    summaryHeadingRef.current.scrollIntoView({\n                        behavior: 'smooth',\n                        block: 'nearest',\n                        inline: 'center'\n                });\n                }\n            })\n            .catch(() => {\n                setResponse(initialResults as Readonly<Response>);\n                setUpdating(false);\n            });\n    }, [update, query]);\n\n    const updater = {\n        query: (newQuery: QueryDetails) => setQuery(newQuery),\n        results: (newUpdate: boolean) => setUpdate(newUpdate),\n        updateState: update,\n    };\n\n    const clear = (resetSort?:boolean) => {\n        const newQuery = {\n            ...query,\n            sortType: resetSort ? config.sort[0].type : query.sortType,\n            facets: {},\n            parameters: {},\n            startRank: 1,\n            misspelling: null as string | null,\n            interacted: true,\n        };\n        call.cancel();\n        setQuery(newQuery);\n        setUpdate(!update);\n    };\n\n    return {\n        query,\n        funnelbackResponse,\n        updating,\n        updater,\n        clear,\n        hasMounted,\n        matrixState: !hasMounted && matrixQuery ? true : false,\n        summaryHeadingRef,\n    };\n}\n\nexport default useLogicWrapper;\n","import { replaceAndDeleteKeys, isURLSearchParams } from './url-params';\nimport type { FacetDetails } from '../types/facet';\n\n/**\n * Preserve the search state in the URL parameters.\n *\n * @param {string} currQuery The search query.\n * @param {integer} currStartRank The start rank.\n * @param {object[]} currFacets A map of facet meta labels to their values.\n * @param {*} facetLabels Array of facet definitions.\n */\nexport default function replaceHistory(\n    currQuery: string,\n    currStartRank: number,\n    currFacets: {[key: string]: string},\n    currParameters: {[key: string]: string},\n    currSort: string,\n    facetLabels: FacetDetails[],\n    defaultSort: string,\n    hasMounted: boolean\n) {\n    if (hasMounted) {\n        const searchURLParams = new URLSearchParams(window.location.search);\n        const params = replaceAndDeleteKeys(searchURLParams, '_sand', '_and');\n\n        if (isURLSearchParams(params)) {\n            currQuery !== ''\n                ? params.set('query', currQuery)\n                : params.delete('query');\n\n            currStartRank && currStartRank !== 1\n                ? params.set('start_rank', currStartRank.toString())\n                : params.delete('start_rank');\n\n            currSort !== defaultSort && currSort !== ''\n                ? params.set('sort', currSort)\n                : params.delete('sort');\n\n            facetLabels.forEach((facet) => {\n                if (currFacets[facet.meta]) {\n                    params.set(`meta_${facet.meta}_and`, currFacets[facet.meta]);\n                } else {\n                    params.delete(`meta_${facet.meta}_and`);\n                }\n            });\n\n            facetLabels.forEach((facet) => {\n                if (currParameters[facet.meta]) {\n                    params.set(facet.meta, currParameters[facet.meta]);\n                } else {\n                    params.delete(facet.meta);\n                }\n            });\n\n            const hasParams = params.toString().length ? '?' : '';\n\n            window.history.replaceState(\n                {},\n                '',\n                `${window.location.pathname}${hasParams}${params.toString()}`\n            );\n        }\n    }\n}\n","import type { FacetDetails } from '../types/facet';\nimport type { QueryDetails } from '../types/query';\n\n\n/**\n * Search and replace substring in Key on URLSearchParams\n * remove when urls have been replace on Matrix\n *\n * @param {object} params URLSearchParams object for the current page.\n * @param {string} target substring to replace\n * @param {replacement} replacement substring to replace\n * @return {object} - URLSearchParams object of new replace keys.\n */\n\nexport function replaceAndDeleteKeys(\n    params: URLSearchParams | { [key: string]: string },\n    target: string,\n    replacement: string\n) {\n    let entries: [string, string][];\n    if (params instanceof URLSearchParams) {\n        entries = Array.from(params.entries());\n    } else {\n        entries = Object.entries(params);\n    }\n\n    for (const [key, value] of entries) {\n        if (key.includes(target)) {\n            const newKey = key.replace(target, replacement);\n            if (params instanceof URLSearchParams) {\n                params.set(newKey, value); // Add new key\n                params.delete(key); // Delete old key\n            } else {\n                params[newKey] = value;\n                delete params[key];\n            }\n        }\n    }\n\n    return params;\n}\n\n/**\n * Retrieve non FB parameters from the URL parameters\n *\n * @param {object[]} facets Array of facet definitions.\n * @param {object} params URLSearchParams object for the current page.\n * @return {object} - Map of facet meta labels to their current value from the URL.\n */\nexport function isURLSearchParams(obj: any): obj is URLSearchParams {\n  return typeof obj?.get === 'function';\n}\n\nexport function getNonFBParams(\n    facets: FacetDetails[],\n    params: URLSearchParams | { [key: string]: string },\n    matrixState: boolean\n) {\n    const updatedParams =\n        params && replaceAndDeleteKeys(params, '_sand', '_and');\n        \n    if (isURLSearchParams(updatedParams)) {\n        return facets\n            .filter((facet) => facet.nonFBParam)\n            .map((facet) => {\n                const param: { [key: string]: string } = {};\n                const value = updatedParams.get(facet.meta);\n                if (value) {\n                    param[facet.meta] = value;\n                }\n                return param;\n            })\n            .reduce((facetParams, facet) => Object.assign(facetParams, facet), {});\n    } else {\n        return facets\n            .map((facet) => {\n                const param: { [key: string]: string } = {};\n                if ((params as any)[facet.meta]) {\n                    param[facet.meta] = (params as any)[facet.meta];\n                }\n                return param;\n            })\n            .reduce((facetParams, facet) => Object.assign(facetParams, facet), {});\n    }\n}\n\nexport function getFacetParams(\n    facets: FacetDetails[],\n    params: URLSearchParams | { [key: string]: string },\n    matrixState: boolean\n) {\n    const updatedParams =\n        params && replaceAndDeleteKeys(params, '_sand', '_and');\n        \n    if (isURLSearchParams(updatedParams)) {\n        return facets\n            .map((facet) => {\n                const param: { [key: string]: string } = {};\n                const value = updatedParams.get(`meta_${facet.meta}_and`);\n                if (value) {\n                    param[facet.meta] = value;\n                }\n                return param;\n            })\n            .reduce((facetParams, facet) => Object.assign(facetParams, facet), {});\n    } else {\n        const typedParams = updatedParams as { [key: string]: string };\n        return facets\n            .map((facet) => {\n                const param: { [key: string]: string } = {};\n                const key = `meta_${facet.meta}_and`;\n                if (typedParams[key]) {\n                    param[facet.meta] = typedParams[key];\n                }\n                return param;\n            })\n            .reduce((facetParams, facet) => Object.assign(facetParams, facet), {});\n    }\n}\n\n","/**\n * Useful utility functions\n * @module util\n * @author ...\n */\n\nimport axios, { AxiosRequestConfig } from 'axios';\nimport React from 'react';\n\nexport function toBool(s: string): boolean {\n    return s === 'true';\n}\n\nconst partialMatchFn = (m: string) => (s: string) => s.indexOf(m) < 0;\nconst fullMatchFn = (m: string) => (s: string) => s !== m;\n\nexport function removeClass(elem: HTMLElement, className: string, removePartials = false): void {\n    const matchFn = removePartials ? partialMatchFn(className) : fullMatchFn(className);\n    elem.className = elem.className\n        .split(/\\s+/)\n        .filter((s) => matchFn(s))\n        .join(' ');\n}\n\nexport function reduceMotion(): boolean {\n    const reducedMotionQuery = typeof window !== 'undefined'\n        ? window.matchMedia('(prefers-reduced-motion: reduce)')\n        : null;\n    return reducedMotionQuery && reducedMotionQuery.matches ? true : false;\n}\n\nexport function isVisible(elem: HTMLElement): boolean {\n    return elem.offsetHeight !== 0 && elem.offsetWidth !== 0;\n}\n\nexport function verticallyInWindow(elem: HTMLElement): boolean {\n    const rect = elem.getBoundingClientRect();\n    return rect.top >= 0 && rect.top <= window.innerHeight;\n}\n\nexport function parametersToObject(parameterString: string): Record<string, string> {\n    const parameters: Record<string, string> = {};\n    parameterString\n        .substring(1)\n        .split('&')\n        .forEach((parameter) => {\n            const [k, v] = parameter.split('=');\n            parameters[k] = v;\n        });\n    return parameters;\n}\n\nexport function objectToParameters(parameterObj: Record<string, string>): string {\n    const keys = Object.keys(parameterObj);\n    if (keys.length > 0) {\n        return (\n            '?' +\n            keys\n                .map((key) => `${key}=${encodeURIComponent(parameterObj[key])}`)\n                .join('&')\n        );\n    }\n    return '';\n}\n\ndeclare global {\n    interface Window {\n        dataLayer?: any[];\n    }\n}\n\nexport function gaEvent(\n    event: string,\n    eventCategory: string,\n    eventAction: string,\n    eventLabel?: string,\n    eventValue?: number,\n    nonInteractionHit?: boolean\n): void {\n    window.dataLayer = window.dataLayer || [];\n    window.dataLayer.push({\n        event,\n        eventCategory,\n        eventAction,\n        eventLabel,\n        eventValue,\n        nonInteractionHit,\n    });\n}\n\nexport function appendAll(elem: HTMLElement, children: HTMLElement[]): void {\n    children.forEach((child) => elem.appendChild(child));\n}\n\nexport function numberFromString(string: string): string {\n    return string.replace(/\\D/g, '');\n}\n\nexport function isMobile(screen = 432): boolean {\n    return window.innerWidth < screen;\n}\n\nexport function toArray(obj: HTMLCollection | NodeListOf<HTMLElement>): HTMLElement[] {\n    return Array.from(obj) as HTMLElement[];\n}\n\nexport function detectIE(): number | false {\n    const ua = window.navigator.userAgent;\n\n    const msie = ua.indexOf('MSIE ');\n    if (msie > 0) {\n        return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\n    }\n\n    const trident = ua.indexOf('Trident/');\n    if (trident > 0) {\n        const rv = ua.indexOf('rv:');\n        return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\n    }\n\n    const edge = ua.indexOf('Edge/');\n    if (edge > 0) {\n        return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\n    }\n\n    return false;\n}\n\nexport function checkIntersectionObserver(): boolean {\n    return (\n        'IntersectionObserver' in window &&\n        'IntersectionObserverEntry' in window &&\n        'intersectionRatio' in window.IntersectionObserverEntry.prototype\n    );\n}\n\ninterface Attribute {\n    label: string;\n    val: string;\n}\n\nexport function createHTMLElement(type: string, attributes: Attribute[]): HTMLElement {\n    const el = document.createElement(type);\n    attributes.forEach((att) => {\n        if (att.label === 'content') {\n            el.appendChild(document.createTextNode(att.val));\n        } else if (att.label === 'html') {\n            el.innerHTML = att.val;\n        } else {\n            el.setAttribute(att.label, att.val);\n        }\n    });\n    return el;\n}\n\nexport function uppercaseFirstLetterLowercaseRest(s: string): string {\n    return s.charAt(0).toUpperCase() + s.slice(1).toLowerCase();\n}\n\nexport function axiosRequest(config: AxiosRequestConfig): Promise<any> {\n    return axios(config)\n        .then((response) => {\n            if (response.status === 200) return response.data;\n            throw new Error(`Bad response: ${response.status}`);\n        })\n        .catch((e: any) => {\n            if (!axios.isCancel(e)) {\n                gaEvent(\n                    'jsError',\n                    'JavaScript error',\n                    `Line ${e.lineNumber}  ${e.message}`,\n                    `axiosRequest ${e.fileName} (${window.location})`,\n                    0,\n                    true\n                );\n            }\n        });\n}\n\nexport function formatTime(timeString: string, timeZone?: boolean) {\n    const timeDate = new Date(timeString);\n    let timeLabel = '';\n\n    if (timeZone) {\n        const timeOffset = timeDate.getTimezoneOffset() / -60;\n        timeLabel = timeOffset === 0 ? '(GMT)' : '(BST)';\n    }\n\n    const hours = timeDate.getHours().toString().padStart(2, '0');\n    const minutes = timeDate.getMinutes().toString().padStart(2, '0');\n\n    return (\n        <time dateTime={`${hours}:${minutes}`}>\n            {hours}:{minutes} {timeLabel}\n        </time>\n    );\n}\n\nfunction daySuffix(day: number): string {\n    const lastDigit = day % 10;\n    const lastTwoDigits = day % 100;\n    if (lastTwoDigits >= 11 && lastTwoDigits <= 13) return 'th';\n    switch (lastDigit) {\n        case 1: return 'st';\n        case 2: return 'nd';\n        case 3: return 'rd';\n        default: return 'th';\n    }\n}\n\nexport function formatReactDate(date: Date): React.ReactElement {\n    const months = [\n        'January', 'February', 'March', 'April', 'May', 'June',\n        'July', 'August', 'September', 'October', 'November', 'December'\n    ];\n    const days = [\n        'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\n    ];\n\n    return (\n        <time dateTime={date.toISOString().split('T')[0]}>\n            {days[date.getUTCDay()]}, {date.getUTCDate()}\n            <sup>{daySuffix(date.getUTCDate())}</sup> {months[date.getUTCMonth()]} {date.getUTCFullYear()}\n        </time>\n    );\n}\n\nexport function arraySlicer<T>(arr: T[], len: number): T[][] {\n    const newArray: T[][] = [];\n    for (let i = 0; i < arr.length; i += len) {\n        newArray.push(arr.slice(i, i + len));\n    }\n    return newArray;\n}\n\nexport function flattenObj(ob: Record<string, any>): Record<string, any> {\n    // The object which contains the\n    // final result\n    let result:{[key: string]: string}  = {};\n\n    // loop through the object \"ob\"\n    for (const i in ob) {\n        // We check the type of the i using\n        // typeof() function and recursively\n        // call the function again\n        if (typeof ob[i] === 'object' && !Array.isArray(ob[i])) {\n            const temp = flattenObj(ob[i]);\n            for (const j in temp) {\n                if (i === 'parameters') {\n                    result[`${i}-${j}`] = temp[j];\n                } else {\n                    result[j] = temp[j];\n                }\n                // Store temp in result\n            }\n        } else if (Array.isArray(ob[i])) {\n            ob[i].forEach((val) => {\n                if (i === 'fixedFacets') {\n                    result[`${i}-${val.meta}`] = val.value;\n                } else {\n                    result[`${i}-${val.name}`] = val.value;\n                }\n            });\n        }\n        // Else store ob[i] in result directly\n        else {\n            result[i] = ob[i];\n        }\n    }\n    return result;\n}\n\nexport function getVerticalScrollbarWidth(): number {\n    const scrollDiv = document.createElement('div');\n    scrollDiv.style.cssText = 'width: 100px; height: 100px; overflow: scroll; position: absolute; top: -9999px;';\n    document.body.appendChild(scrollDiv);\n    const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n    document.body.removeChild(scrollDiv);\n    document.documentElement.style.setProperty('--scrollbar-width', `${scrollbarWidth}px`);\n    return scrollbarWidth;\n}\n\nexport function enableBodyScroll(): void {\n    document.documentElement.classList.remove('no-scroll');\n    const btn = document.querySelector('.back-to-top');\n    if (btn) btn.removeAttribute('hidden');\n}\n\nexport function disableBodyScroll(): void {\n    getVerticalScrollbarWidth();\n    const btn = document.querySelector('.back-to-top');\n    if (btn) btn.setAttribute('hidden', 'true');\n    document.documentElement.classList.add('no-scroll');\n}\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"finder\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkreact_matrix_rendering\"] = self[\"webpackChunkreact_matrix_rendering\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"core1\",\"vendor-dependencies1\",\"axios1\",\"react1\",\"vendor-direct1\"], () => (__webpack_require__(\"./src/browser/browser-files/finder.tsx\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["React","createRoot","Finder","finderConfig","document","addEventListener","test","navigator","userAgent","finders","querySelectorAll","Array","from","forEach","finder","dataset","config","then","root","render","createElement","element","PropTypes","uppercaseFirstLetterLowercaseRest","Finder__Results__Accommodation","props","mph","calculateTime","minutes","Math","floor","thumbnail","details","listMetadata","src","alt","className","level","join","split","features","Object","keys","filter","meta","key","value","includes","map","replace","sort","type","length","slice","price","deposit","transport","Fragment","parseInt","location","concat","trim","toLowerCase","distance","walk","href","liveUrl","title","propTypes","object","Finder__Results__BestBet","displayUrl","titleHtml","descriptionHtml","Accommodation","CaseStudy","Centre","Contact","Course","Event","Funding","Generic","Module","News","Profile","Research","Finder__Results__Card","query","string","Finder__Results__CaseStudy","subtitle","status","school","department","centre","c","Finder__Results__Centre","subject","related","Finder__Results__Contact","jobtitle","email","altemail","telephone","friendlytelephone","room","enquiry","enquiryurl","enquirylabel","formatLabel","externalSiteUrl","Finder__Results__Course","award","qualification","duration","method","facets","indexOf","Set","String","e","i","stGeorgesLabel","clearing","external","some","s","indexUrl","courseCode","code","entryYears","entryyears","description","formatTime","formatReactDate","formatShortDate","dateString","months","date","Date","month","getUTCMonth","getUTCDate","compareDates","startDate","endDate","showTime","sDate","eDate","noTimeSDate","setUTCHours","noTimeEDate","time","getTime","Finder__Results__Event","shortDate","d","audience","str","capitalized","toUpperCase","eventStartDate","eventEndDate","eventLabel","displayTime","Finder__Results__Funding","hardship","programme","feestatus","Finder__Results__Generic","Finder__Results__Module","term","topic","specification","toBool","Finder__ToolTip","Finder__Results__News","thumbnailSourceName","thumbnailSourceUrl","thumbnailAuthorName","thumbnailAuthorUrl","thumbnailLicenceType","thumbnailLicenceUrl","displayToolTip","thumbnailToolTip","formattedDate","hashtags","hashtagtext","thumbnailTiny","thumbnailMax","thumbnailMobile","srcSet","media","Finder__Results__Profile","headshot","EDIAmbassadors","ediAmbassador","thumbnailExist","country","Finder__Results__Promo","_ref","heading","body","linkRef","linkText","Finder__Results__Research","researchCentre","academic","student","degree","relatedDegree","site","Finder__Checkbox","randomNumber","mobile","toggleChecked","facet","responseFacetValue","responseFacet","allValues","checkedValue","data","count","toggleFacet","newQuery","dependencies","startRank","misspelling","interacted","update","results","updateState","id","name","onChange","checked","onClick","htmlFor","arrayOf","bool","Finder__paramCheckbox","dateDayFormat","stringLength","stringOffset","random","toString","pastEventsResponseTotal","pastEventsResponse","resultPacket","resultsSummary","fullyMatching","pastEventsPartialResponseTotal","partiallyMatching","parameters","totalText","currentDate","currentYear","getUTCFullYear","currentDateMonth","currentDateDay","currentDateString","_objectSpread","lt_eventDate","events","ge_eventDate","sortType","matrixState","funnelbackName","Finder__Select","currentValue","allFacets","values","reduce","acc","_toConsumableArray","responseFacets","hiddenFacets","setFacet","target","noSelection","responseFacetDetails","label","SelectFilter","EventSelectFilter","CheckboxFilter","ParamCheckBox","EventCheckBox","HiddenInput","TagFilter","Reset","Sort","gaEvent","dependencyMet","facetMap","setFacets","dependency","Finder__Filters","totalMatching","response","summary","clearFiltersDesktop","updating","clear","resetSort","clearFiltersMobile","displaySort","submitSSR","summariseAs","plural","hasMounted","fixedParameters","param","facetLabels","extraSearches","past","funnelbackFacet","candidate","func","useState","useEffect","useRef","Filters","createFocusTrap","enableBodyScroll","disableBodyScroll","Finder__FiltersMobile","_useState","_useState2","_slicedToArray","display","setDisplay","_useState3","_useState4","focusTrap","setFocusTrap","filtersRef","filtersEl","current","trap","initialFocus","querySelector","onDeactivate","clickOutsideDeactivates","active","activate","deactivate","result","singular","totalMatchingMessage","filtersCount","toggle","ref","disabled","Finder__hiddenInput","undefined","_props$facet$checkedV","Finder__Reset","Finder__Sort","setSort","validSorts","hyperLink","useHasMounted","Finder__Tag","deleteFacet","labelText","ssrHiddenField","Finder__Clear","suggest","Clear","maximumSuggestions","escapeKey","endKey","homeKey","arrowUp","arrowDown","highlightQueryTerm","suggestion","partialQuery","Finder__Query","setPartialQuery","suggestions","setSuggestions","_useState5","_useState6","call","setCall","_useState7","collection","_useState8","inputId","_useState9","_useState10","showSuggestions","setShowSuggestions","_useState11","_useState12","activeSuggestionID","setActiveSuggestionID","textInput","cancel","focusInput","focus","clearQuery","submitForm","submitSuggestion","suggestionsList","role","onBlur","onFocus","onMouseDown","onKeyDown","_e$currentTarget$clos","_e$currentTarget$pare","_e$currentTarget$pare2","_e$currentTarget$clos2","_e$currentTarget$clos3","currentTarget","closest","preventDefault","parentElement","previousElementSibling","nextElementSibling","first","firstChild","Element","_first$querySelector","last","lastChild","_last$querySelector","placeholder","defaultValue","autoComplete","input","_e$currentTarget$pare3","_e$currentTarget$pare4","button","val","dxp","_ref2","promise","newCall","DOMPurify","Finder__Announcement","clean","sanitize","announcement","ALLOWED_TAGS","dangerouslySetInnerHTML","__html","Finder__DidYouMean","_props$response$spell","_props$response$spell2","spell","text","didyoumean","Finder__Pagination","numberOfPages","numRanks","ceil","currentPage","currStart","pages","changePage","pageNumber","newStartRank","push","_loop","page","abs","number","BestBet","Card","DidYouMean","Pagination","PromoCard","Summary","Announcement","Finder__Results","promoCardConditionMet","matchedPromoGroup","matchedPromoGroupDetails","promo","promoConditions","promoDetails","filterFacets","searchFacets","promoCardConditionGroup","queryFacetsAll","queryFacetsArray","queries","_i","_queries","item","_iterator","_createForOfIteratorHelper","_step","q","el","searchQuery1","n","done","err","f","promoGroup","resultsClass","resultsVariant","currEnd","summaryHeadingRef","didYouMean","pagination","promoCard","secondItemOnwards","bestBets","firstItemData","secondItemOnwardsData","start","docNum","card","resultsContent","array","pastEventsQuery","pastEventsUpdate","Finder__Results__Summary","formatter","Intl","NumberFormat","format","parts","part","toggleLabel","setShow","show","labelAuthor","labelSource","labelLicense","oneOfType","thumbnailLicenseType","thumbnailLicenseUrl","Query","Results","useLogicWrapper","_useLogicWrapper","initialResults","initialQuery","funnelbackResponse","updater","formClass","onSubmit","resultCard","isRequired","axios","https","axiosRequest","baseUrl","dxpBaseUrl","findRootUrl","dxpFindRootUrl","dxpSuggestRootUrl","suggestRootUrl","timeout","find","fixedFacets","numRank","fixedParams","params","paramsKeys","fixedFacetParams","facetParams","facetKeys","CancelToken","source","baseURL","cancelToken","token","httpsAgent","Agent","keepAlive","url","num_ranks","start_rank","partial_query","setHasMounted","flattenObj","remove","obj","k","_typeof","numberRank","JSON","parse","stringify","flattenQuery","entries","encodeURIComponent","substring","replaceHistory","getNonFBParams","getFacetParams","reduceMotion","scroll","matrixQuery","screenOffsetRatio","scrollDuration","window","nonFBParams","p","nonFBParam","initializeParams","fixParameters","defaultParams","setDefaultParams","setQuery","freeze","setResponse","setUpdating","setUpdate","searchParams","URLSearchParams","search","baseQuery","prev","resultsEl","HTMLElement","center","innerHeight","_find","_find2","request","requestToken","scrollIntoView","behavior","block","inline","newUpdate","replaceAndDeleteKeys","isURLSearchParams","currQuery","currStartRank","currFacets","currParameters","currSort","defaultSort","searchURLParams","set","hasParams","history","replaceState","pathname","replacement","_step$value","newKey","get","updatedParams","assign","typedParams","partialMatchFn","m","fullMatchFn","removeClass","elem","removePartials","arguments","matchFn","reducedMotionQuery","matchMedia","matches","isVisible","offsetHeight","offsetWidth","verticallyInWindow","rect","getBoundingClientRect","top","parametersToObject","parameterString","parameter","_parameter$split","_parameter$split2","v","objectToParameters","parameterObj","event","eventCategory","eventAction","eventValue","nonInteractionHit","dataLayer","appendAll","children","child","appendChild","numberFromString","isMobile","screen","innerWidth","toArray","detectIE","ua","msie","trident","rv","edge","checkIntersectionObserver","IntersectionObserverEntry","prototype","createHTMLElement","attributes","att","createTextNode","innerHTML","setAttribute","charAt","Error","isCancel","lineNumber","message","fileName","timeString","timeZone","timeDate","timeLabel","timeOffset","getTimezoneOffset","hours","getHours","padStart","getMinutes","dateTime","daySuffix","day","lastDigit","lastTwoDigits","days","toISOString","getUTCDay","arraySlicer","arr","len","newArray","ob","isArray","temp","j","getVerticalScrollbarWidth","scrollDiv","style","cssText","scrollbarWidth","clientWidth","removeChild","documentElement","setProperty","classList","btn","removeAttribute","add"],"sourceRoot":""}